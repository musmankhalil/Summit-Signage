!function(){var t,e,n,u,a,i,l,r,s,o,c,h;if(t=this,e=function(){return function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,r),e.loaded=!0,e.exports}return r.m=n,r.c=i,r.p="",r(0)}([function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var r=i(n(2)),s=i(n(35)),o=n(36),a=n(41),l=i(n(42)),c=i(n(39)),u=i(n(34)),h=r.default.create;function d(){var n=h();return n.compile=function(t,e){return a.compile(t,e,n)},n.precompile=function(t,e){return a.precompile(t,e,n)},n.AST=s.default,n.Compiler=a.Compiler,n.JavaScriptCompiler=l.default,n.Parser=o.parser,n.parse=o.parse,n}var p=d();p.create=d,u.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,n){"use strict";var i=n(3).default,r=n(1).default;e.__esModule=!0;var s=i(n(4)),o=r(n(21)),a=r(n(6)),l=i(n(5)),c=i(n(22)),u=r(n(34));function h(){var e=new s.HandlebarsEnvironment;return l.extend(e,s),e.SafeString=o.default,e.Exception=a.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var d=h();d.create=h,u.default(d),d.default=d,e.default=d,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__esModule=!0},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.HandlebarsEnvironment=u;var r=n(5),s=i(n(6)),o=n(10),a=n(18),l=i(n(20));e.VERSION="4.0.11";e.COMPILER_REVISION=7;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};var c="[object Object]";function u(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}u.prototype={constructor:u,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(r.toString.call(t)===c){if(e)throw new s.default("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(r.toString.call(t)===c)r.extend(this.partials,t);else{if(void 0===e)throw new s.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(r.toString.call(t)===c){if(e)throw new s.default("Arg not supported with multiple decorators");r.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var h=l.default.log;e.log=h,e.createFrame=r.createFrame,e.logger=l.default},function(t,e){"use strict";e.__esModule=!0,e.extend=o,e.indexOf=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}if(!r.test(t))return t;return t.replace(i,s)},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=o({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},i=/[&<>"'`=]/g,r=/[&<>"'`=]/;function s(t){return n[t]}function o(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var a=Object.prototype.toString;e.toString=a;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===a.call(t)};e.isArray=c},function(t,e,n){"use strict";var a=n(7).default;e.__esModule=!0;var l=["description","fileName","lineNumber","message","name","number","stack"];function c(t,e){var n=e&&e.loc,i=void 0,r=void 0;n&&(t+=" - "+(i=n.start.line)+":"+(r=n.start.column));for(var s=Error.prototype.constructor.call(this,t),o=0;o<l.length;o++)this[l[o]]=s[l[o]];Error.captureStackTrace&&Error.captureStackTrace(this,c);try{n&&(this.lineNumber=i,a?Object.defineProperty(this,"column",{value:r,enumerable:!0}):this.column=r)}catch(t){}}c.prototype=new Error,e.default=c,t.exports=e.default},function(t,e,n){t.exports={default:n(8),__esModule:!0}},function(t,e,n){var i=n(9);t.exports=function(t,e,n){return i.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){r.default(t),s.default(t),o.default(t),a.default(t),l.default(t),c.default(t),u.default(t)};var r=i(n(11)),s=i(n(12)),o=i(n(13)),a=i(n(14)),l=i(n(15)),c=i(n(16)),u=i(n(17))},function(t,e,n){"use strict";e.__esModule=!0;var o=n(5);e.default=function(s){s.registerHelper("blockHelperMissing",function(t,e){var n=e.inverse,i=e.fn;if(!0===t)return i(this);if(!1===t||null==t)return n(this);if(o.isArray(t))return 0<t.length?(e.ids&&(e.ids=[e.name]),s.helpers.each(t,e)):n(this);if(e.data&&e.ids){var r=o.createFrame(e.data);r.contextPath=o.appendContextPath(e.data.contextPath,e.name),e={data:r}}return i(t,e)})},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var d=n(5),p=i(n(6));e.default=function(t){t.registerHelper("each",function(i,t){if(!t)throw new p.default("Must pass iterator to #each");var r=t.fn,e=t.inverse,n=0,s="",o=void 0,a=void 0;function l(t,e,n){o&&(o.key=t,o.index=e,o.first=0===e,o.last=!!n,a&&(o.contextPath=a+t)),s+=r(i[t],{data:o,blockParams:d.blockParams([i[t],t],[a+t,null])})}if(t.data&&t.ids&&(a=d.appendContextPath(t.data.contextPath,t.ids[0])+"."),d.isFunction(i)&&(i=i.call(this)),t.data&&(o=d.createFrame(t.data)),i&&"object"==typeof i)if(d.isArray(i))for(var c=i.length;n<c;n++)n in i&&l(n,n,n===i.length-1);else{var u=void 0;for(var h in i)i.hasOwnProperty(h)&&(void 0!==u&&l(u,n-1),u=h,n++);void 0!==u&&l(u,n-1,!0)}return 0===n&&(s=e(this)),s})},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var r=i(n(6));e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5);e.default=function(n){n.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),n.registerHelper("unless",function(t,e){return n.helpers.if.call(this,t,{fn:e.inverse,inverse:e.fn,hash:e.hash})})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(r){r.registerHelper("log",function(){for(var t=[void 0],e=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=e.hash.level?i=e.hash.level:e.data&&null!=e.data.level&&(i=e.data.level),t[0]=i,r.log.apply(r,t)})},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);e.default=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&((i=r.createFrame(e.data)).contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:i,blockParams:r.blockParams([t],[i&&i.contextPath])})})},t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){r.default(t)};var r=i(n(19))},function(t,e,n){"use strict";e.__esModule=!0;var a=n(5);e.default=function(t){t.registerDecorator("inline",function(r,s,o,t){var e=r;return s.partials||(s.partials={},e=function(t,e){var n=o.partials;o.partials=a.extend({},n,s.partials);var i=r(t,e);return o.partials=n,i}),s.partials[t.args[0]]=t.fn,e})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5),s={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.indexOf(s.methodMap,t.toLowerCase());t=0<=e?e:parseInt(t,10)}return t},log:function(t){if(t=s.lookupLevel(t),"undefined"!=typeof console&&s.lookupLevel(s.level)<=t){var e=s.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];console[e].apply(console,i)}}};e.default=s,t.exports=e.default},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(23).default,r=n(3).default,s=n(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,n=d.COMPILER_REVISION;if(e!==n){if(e<n){var i=d.REVISION_CHANGES[n],r=d.REVISION_CHANGES[e];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(a,l){if(!l)throw new h.default("No environment passed to template");if(!a||!a.main)throw new h.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,l.VM.checkRevision(a.compiler);var o={strict:function(t,e){if(!(e in t))throw new h.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:u.escapeExpression,invokePartial:function(t,e,n){n.hash&&(e=u.extend({},e,n.hash),n.ids&&(n.ids[0]=!0));t=l.VM.resolvePartial.call(this,t,e,n);var i=l.VM.invokePartial.call(this,t,e,n);null==i&&l.compile&&(n.partials[n.name]=l.compile(t,a.compilerOptions,l),i=n.partials[n.name](e,n));{if(null!=i){if(n.indent){for(var r=i.split("\n"),s=0,o=r.length;s<o&&(r[s]||s+1!==o);s++)r[s]=n.indent+r[s];i=r.join("\n")}return i}throw new h.default("The partial "+n.name+" could not be compiled when running in runtime-only mode")}},fn:function(t){var e=a[t];return e.decorator=a[t+"_d"],e},programs:[],program:function(t,e,n,i,r){var s=this.programs[t],o=this.fn(t);return e||r||i||n?s=p(this,t,o,e,n,i,r):s||(s=this.programs[t]=p(this,t,o)),s},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=u.extend({},e,t)),n},nullContext:i({}),noop:l.VM.noop,compilerInfo:a.compiler};function c(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.data;c._setup(e),!e.partial&&a.useData&&(n=function(t,e){e&&"root"in e||((e=e?d.createFrame(e):{}).root=t);return e}(t,n));var i=void 0,r=a.useBlockParams?[]:void 0;function s(t){return""+a.main(o,t,o.helpers,o.partials,n,r,i)}return a.useDepths&&(i=e.depths?t!=e.depths[0]?[t].concat(e.depths):e.depths:[t]),(s=f(a.main,s,o,e.depths||[],n,r))(t,e)}return c.isTop=!0,c._setup=function(t){t.partial?(o.helpers=t.helpers,o.partials=t.partials,o.decorators=t.decorators):(o.helpers=o.merge(t.helpers,l.helpers),a.usePartial&&(o.partials=o.merge(t.partials,l.partials)),(a.usePartial||a.useDecorators)&&(o.decorators=o.merge(t.decorators,l.decorators)))},c._child=function(t,e,n,i){if(a.useBlockParams&&!n)throw new h.default("must pass block params");if(a.useDepths&&!i)throw new h.default("must pass parent depths");return p(o,t,a[t],e,0,n,i)},c},e.wrapProgram=p,e.resolvePartial=function(t,e,n){t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return t},e.invokePartial=function(t,e,i){var r=i.data&&i.data["partial-block"];i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var s=void 0;i.fn&&i.fn!==o&&function(){i.data=d.createFrame(i.data);var n=i.fn;s=i.data["partial-block"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e.data=d.createFrame(e.data),e.data["partial-block"]=r,n(t,e)},n.partials&&(i.partials=u.extend({},i.partials,n.partials))}();void 0===t&&s&&(t=s);{if(void 0===t)throw new h.default("The partial "+i.name+" could not be found");if(t instanceof Function)return t(e,i)}},e.noop=o;var u=r(n(5)),h=s(n(6)),d=n(4);function p(i,t,r,s,e,o,a){function n(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=a;return!a||t==a[0]||t===i.nullContext&&null===a[0]||(n=[t].concat(a)),r(i,t,i.helpers,i.partials,e.data||s,o&&[e.blockParams].concat(o),n)}return(n=f(r,n,i,a,s,o)).program=t,n.depth=a?a.length:0,n.blockParams=e||0,n}function o(){return""}function f(t,e,n,i,r,s){if(t.decorator){var o={};e=t.decorator(e,o,n,i&&i[0],r,s,i),u.extend(e,o)}return e}},function(t,e,n){t.exports={default:n(24),__esModule:!0}},function(t,e,n){n(25),t.exports=n(30).Object.seal},function(t,e,n){var i=n(26);n(27)("seal",function(e){return function(t){return e&&i(t)?e(t):t}})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(28),s=n(30),o=n(33);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},function(t,e,n){var f=n(29),m=n(30),g=n(31),v="prototype",b=function(t,e,n){var i,r,s,o=t&b.F,a=t&b.G,l=t&b.S,c=t&b.P,u=t&b.B,h=t&b.W,d=a?m:m[e]||(m[e]={}),p=a?f:l?f[e]:(f[e]||{})[v];for(i in a&&(n=e),n)(r=!o&&p&&i in p)&&i in d||(s=r?p[i]:n[i],d[i]=a&&"function"!=typeof p[i]?n[i]:u&&r?g(s,f):h&&p[i]==s?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[v]=e[v],t}(s):c&&"function"==typeof s?g(Function.call,s):s,c&&((d[v]||(d[v]={}))[i]=s))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,t.exports=b},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var s=n(32);t.exports=function(i,r,t){if(s(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){(function(i){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==i?i:window,n=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=n),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var n={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!n.helpers.scopedId(t)&&!t.depth}}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default,r=n(3).default;e.__esModule=!0,e.parse=function(t,e){if("Program"===t.type)return t;return(s.default.yy=c).locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},new o.default(e).accept(s.default.parse(t))};var s=i(n(37)),o=i(n(38)),a=r(n(40)),l=n(5);e.parser=s.default;var c={};l.extend(c,a)},function(t,e){"use strict";e.__esModule=!0;var n=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,n,i,r,s,o){var a=s.length-1;switch(r){case 1:return s[a-1];case 2:this.$=i.prepareProgram(s[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=s[a];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(s[a]),strip:i.stripFlags(s[a],s[a]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:s[a],value:s[a],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(s[a-2],s[a-1],s[a],this._$);break;case 12:this.$={path:s[a-3],params:s[a-2],hash:s[a-1]};break;case 13:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!1,this._$);break;case 14:this.$=i.prepareBlock(s[a-3],s[a-2],s[a-1],s[a],!0,this._$);break;case 15:this.$={open:s[a-5],path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 16:case 17:this.$={path:s[a-4],params:s[a-3],hash:s[a-2],blockParams:s[a-1],strip:i.stripFlags(s[a-5],s[a])};break;case 18:this.$={strip:i.stripFlags(s[a-1],s[a-1]),program:s[a]};break;case 19:var l=i.prepareBlock(s[a-2],s[a-1],s[a],s[a],!1,this._$),c=i.prepareProgram([l],s[a-1].loc);c.chained=!0,this.$={strip:s[a-2].strip,program:c,chain:!0};break;case 20:this.$=s[a];break;case 21:this.$={path:s[a-1],strip:i.stripFlags(s[a-2],s[a])};break;case 22:case 23:this.$=i.prepareMustache(s[a-3],s[a-2],s[a-1],s[a-4],i.stripFlags(s[a-4],s[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:s[a-3],params:s[a-2],hash:s[a-1],indent:"",strip:i.stripFlags(s[a-4],s[a]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(s[a-2],s[a-1],s[a],this._$);break;case 26:this.$={path:s[a-3],params:s[a-2],hash:s[a-1],strip:i.stripFlags(s[a-4],s[a])};break;case 27:case 28:this.$=s[a];break;case 29:this.$={type:"SubExpression",path:s[a-3],params:s[a-2],hash:s[a-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:s[a],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(s[a-2]),value:s[a],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(s[a-1]);break;case 33:case 34:this.$=s[a];break;case 35:this.$={type:"StringLiteral",value:s[a],original:s[a],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(s[a]),original:Number(s[a]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===s[a],original:"true"===s[a],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 40:case 41:this.$=s[a];break;case 42:this.$=i.preparePath(!0,s[a],this._$);break;case 43:this.$=i.preparePath(!1,s[a],this._$);break;case 44:s[a-2].push({part:i.id(s[a]),original:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 45:this.$=[{part:i.id(s[a]),original:s[a]}];break;case 46:this.$=[];break;case 47:s[a-1].push(s[a]);break;case 48:this.$=[s[a]];break;case 49:s[a-1].push(s[a]);break;case 50:this.$=[];break;case 51:s[a-1].push(s[a]);break;case 58:this.$=[];break;case 59:s[a-1].push(s[a]);break;case 64:this.$=[];break;case 65:s[a-1].push(s[a]);break;case 70:this.$=[];break;case 71:s[a-1].push(s[a]);break;case 78:this.$=[];break;case 79:s[a-1].push(s[a]);break;case 82:this.$=[];break;case 83:s[a-1].push(s[a]);break;case 86:this.$=[];break;case 87:s[a-1].push(s[a]);break;case 90:this.$=[];break;case 91:s[a-1].push(s[a]);break;case 94:this.$=[];break;case 95:s[a-1].push(s[a]);break;case 98:this.$=[s[a]];break;case 99:s[a-1].push(s[a]);break;case 100:this.$=[s[a]];break;case 101:s[a-1].push(s[a])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],s=this.table,o="",a=0,l=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,f,m,g,v,b,y,w,x,_={};;){if(f=n[n.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null==d&&(x=void 0,"number"!=typeof(x=e.lexer.lex()||1)&&(x=e.symbols_[x]||x),d=x),m=s[f]&&s[f][d]),void 0===m||!m.length||!m[0]){var k="";if(!c){for(v in w=[],s[f])this.terminals_[v]&&2<v&&w.push("'"+this.terminals_[v]+"'");k=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:w})}}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+d);switch(m[0]){case 1:n.push(d),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(m[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,o=this.lexer.yytext,a=this.lexer.yylineno,u=this.lexer.yylloc,0<c&&c--);break;case 2:if(b=this.productions_[m[1]][1],_.$=i[i.length-b],_._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},h&&(_._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),void 0!==(g=this.performAction.call(_,o,l,a,this.yy,m[1],i,r)))return g;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),i.push(_.$),r.push(_._$),y=s[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},e={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,i,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(!(n=this._input.match(this.rules[s[o]]))||e&&!(n[0].length>e[0].length)||(e=n,i=o,this.options.flex));o++);return e?((r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,s[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,n,e,i){function r(t,e){return n.yytext=n.yytext.substr(t,n.yyleng-e)}switch(e){case 0:if("\\\\"===n.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===n.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),n.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(n.yytext=n.yytext.substr(5,n.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(n.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return n.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return n.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return n.yytext=n.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function n(){this.yy={}}return t.lexer=e,new((n.prototype=t).Parser=n)}();e.default=n,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var r=i(n(39));function s(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function p(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],r=t[e-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function f(t,e,n){void 0===e&&(e=-1);var i=t[e+1],r=t[e+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function m(t,e,n){var i=t[null==e?0:e+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function g(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}(s.prototype=new r.default).Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=t.body,r=0,s=i.length;r<s;r++){var o=i[r],a=this.accept(o);if(a){var l=p(i,r,n),c=f(i,r,n),u=a.openStandalone&&l,h=a.closeStandalone&&c,d=a.inlineStandalone&&l&&c;a.close&&m(i,r,!0),a.open&&g(i,r,!0),e&&d&&(m(i,r),g(i,r)&&"PartialStatement"===o.type&&(o.indent=/([ \t]+$)/.exec(i[r-1].original)[1])),e&&u&&(m((o.program||o.inverse).body),g(i,r)),e&&h&&(m(i,r),g((o.inverse||o.program).body))}}return t},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,i=n,r=n;if(n&&n.chained)for(i=n.body[0].program;r.chained;)r=r.body[r.body.length-1].program;var s={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:f(e.body),closeStandalone:p((i||e).body)};if(t.openStrip.close&&m(e.body,null,!0),n){var o=t.inverseStrip;o.open&&g(e.body,null,!0),o.close&&m(i.body,null,!0),t.closeStrip.open&&g(r.body,null,!0),!this.options.ignoreStandalone&&p(e.body)&&f(i.body)&&(g(e.body),m(i.body))}else t.closeStrip.open&&g(e.body,null,!0);return s},s.prototype.Decorator=s.prototype.MustacheStatement=function(t){return t.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=s,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var r=i(n(6));function s(){this.parents=[]}function o(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function a(t){o.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function l(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}s.prototype={constructor:s,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!s.prototype[n.type])throw new r.default('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new r.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;e<n;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new r.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(t){l.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=s,t.exports=e.default},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,n){n=this.locInfo(n);for(var i=t?"@":"",r=[],s=0,o=0,a=e.length;o<a;o++){var l=e[o].part,c=e[o].original!==l;if(i+=(e[o].separator||"")+l,c||".."!==l&&"."!==l&&"this"!==l)r.push(l);else{if(0<r.length)throw new u.default("Invalid path: "+i,{loc:n});".."===l&&(s++,"../")}}return{type:"PathExpression",data:t,depth:s,parts:r,original:i,loc:n}},e.prepareMustache=function(t,e,n,i,r,s){var o=i.charAt(3)||i.charAt(2),a="{"!==o&&"&"!==o;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:a,strip:r,loc:this.locInfo(s)}},e.prepareRawBlock=function(t,e,n,i){c(t,n),i=this.locInfo(i);var r={type:"Program",body:e,strip:{},loc:i};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:r,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(t,e,n,i,r,s){i&&i.path&&c(t,i);var o=/\*/.test(t.open);e.blockParams=t.blockParams;var a=void 0,l=void 0;if(n){if(o)throw new u.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=i.strip),l=n.strip,a=n.program}r&&(r=a,a=e,e=r);return{type:o?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:a,openStrip:t.strip,inverseStrip:l,closeStrip:i&&i.strip,loc:this.locInfo(s)}},e.prepareProgram=function(t,e){if(!e&&t.length){var n=t[0].loc,i=t[t.length-1].loc;n&&i&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,n,i){return c(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}};var u=i(n(6));function c(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new u.default(t.path.original+" doesn't match "+e,n)}}},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0,e.Compiler=s,e.precompile=function(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new l.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0);e.compat&&(e.useDepths=!0);var i=n.parse(t,e),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)},e.compile=function(i,r,s){void 0===r&&(r={});if(null==i||"string"!=typeof i&&"Program"!==i.type)throw new l.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i);"data"in(r=c.extend({},r))||(r.data=!0);r.compat&&(r.useDepths=!0);var o=void 0;function a(){var t=s.parse(i,r),e=(new s.Compiler).compile(t,r),n=(new s.JavaScriptCompiler).compile(e,r,void 0,!0);return s.template(n)}function t(t,e){return o||(o=a()),o.call(this,t,e)}return t._setup=function(t){return o||(o=a()),o._setup(t)},t._child=function(t,e,n,i){return o||(o=a()),o._child(t,e,n,i)},t};var l=i(n(6)),c=n(5),a=i(n(35)),r=[].slice;function s(){}function o(t,e){if(t===e)return!0;if(c.isArray(t)&&c.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!o(t[n],e[n]))return!1;return!0}}function u(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}s.prototype={compiler:s,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||!o(i.args,r.args))return!1}e=this.children.length;for(n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var n=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var i in n)i in n&&(this.options.knownHelpers[i]=n[i]);return this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[n]=e,this.useDepths=this.useDepths||e.useDepths,n},accept:function(t){if(!this[t.type])throw new l.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,i=0;i<n;i++)this.accept(e[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){u(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var i=this.classifySexpr(t);"helper"===i?this.helperSexpr(t,e,n):"simple"===i?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),n=this.setupFullMustacheParams(t,e,void 0),i=t.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var n=t.params;if(1<n.length)throw new l.default("Unsupported number of partial arguments: "+n.length,t);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=t.name.original,r="SubExpression"===t.name.type;r&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var s=t.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",r,i,s),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){u(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var i=t.path,r=i.parts[0],s=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.path,s=r.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new l.default("You specified knownHelpersOnly, but used the unknown helper "+s,t);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",i.length,r.original,a.default.helpers.simpleId(r))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=a.default.helpers.scopedId(t),i=!t.depth&&!n&&this.blockParamIndex(e);i?this.opcode("lookupBlockParam",i,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,i=e.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:r.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=a.default.helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),i=!n&&a.default.helpers.helperExpression(t),r=!n&&(i||e);if(r&&!i){var s=t.path.parts[0],o=this.options;o.knownHelpers[s]?i=!0:o.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;e<n;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||a.default.helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var i=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,i){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;e<n;e++){var i=this.options.blockParams[e],r=i&&c.indexOf(i,t);if(i&&0<=r)return[e,r]}}}},function(t,e,n){"use strict";var i=n(1).default;e.__esModule=!0;var r=n(4),f=i(n(6)),s=n(5),o=i(n(43));function l(t){this.value=t}function a(){}a.prototype={nameLookup:function(t,e){return a.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=r.COMPILER_REVISION;return[t,r.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,n){return s.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var r=t.opcodes,s=void 0,o=void 0,a=void 0,l=void 0;for(a=0,l=r.length;a<l;a++)s=r[a],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new f.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(i);if(this.isChild)return c;var u={compiler:this.compilerInfo(),main:c};this.decorators&&(u.main_d=this.decorators,u.useDecorators=!0);var h=this.context,d=h.programs,p=h.decorators;for(a=0,l=d.length;a<l;a++)d[a]&&(u[a]=d[a],p[a]&&(u[a+"_d"]=p[a],u.useDecorators=!0));return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),i?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),e.srcName?(u=u.toStringWithSourceMap({file:e.destName})).map=u.map&&u.map.toString():u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new o.default(this.options.srcName),this.decorators=new o.default(this.options.srcName)},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);0<n.length&&(e+=", "+n.join(", "));var i=0;for(var r in this.aliases){var s=this.aliases[r];this.aliases.hasOwnProperty(r)&&s.children&&1<s.referenceCount&&(e+=", alias"+ ++i+"="+r,s.children[0]="alias"+i)}var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(e);return t?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,s=void 0,o=void 0;return this.source.each(function(t){t.appendToBuffer?(s?t.prepend("  + "):s=t,o=t):(s&&(r?s.prepend("buffer += "):i=!0,o.add(";"),s=o=void 0),r=!0,e||(n=!1))}),n?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(t+=", buffer = "+(i?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(i?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n,i){var r=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[r++])),this.resolvePath("context",t,r,e,n)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,n){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,n)},resolvePath:function(n,i,r,s,t){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,n,i){var r=e.popStack(),s=0,o=n.length;t&&o--;for(;s<o;s++)r=e.nameLookup(r,n[s],i);return t?[e.aliasable("container.strict"),"(",r,", ",e.quotedString(n[s]),")"]:r}(this.options.strict&&t,this,i,n));else for(var e=i.length;r<e;r++)this.replaceStack(function(t){var e=o.nameLookup(t,i[r],n);return s?[" && ",e]:[" != null ? ",e," : ",t]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var n=this.nameLookup("decorators",e,"decorator"),i=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(t,e,n){var i=this.popStack(),r=this.setupHelper(t,e),s=n?[r.name," || "]:"",o=["("].concat(s,i);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",r.callParams))},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),r=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",n,")"];this.options.strict||(r[0]="(helper = ",r.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",r,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(t,e,n){var i=[],r=this.setupParams(e,1,i);t&&(e=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",r.decorators="container.decorators",t?i.unshift(e):i.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(t){var e=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var s=this.hash;n&&(s.contexts[t]=n),i&&(s.types[t]=i),r&&(s.ids[t]=r),s.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:a,compileChildren:function(t,e){for(var n=t.children,i=void 0,r=void 0,s=0,o=n.length;s<o;s++){i=n[s],r=new this.compiler;var a=this.matchExistingProgram(i);if(null==a){this.context.programs.push("");var l=this.context.programs.length;i.index=l,i.name="program"+l,this.context.programs[l]=r.compile(i,e,this.context,!this.precompile),this.context.decorators[l]=r.decorators,this.context.environments[l]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=a.index,i.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var i=this.context.environments[e];if(i&&i.equals(t))return i}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof l||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new l(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,i=void 0,r=void 0;if(!this.isInline())throw new f.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof l)e=["(",n=[s.value]],r=!0;else{i=!0;var o=this.incrStack();e=["((",this.push(o)," = ",s,")"],n=this.topStack()}var a=t.call(this,n);r||this.popStack(),i&&this.stackSlot--,this.push(e.concat(a,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];if(i instanceof l)this.compileStack.push(i);else{var r=this.incrStack();this.pushSource([r," = ",i,";"]),this.compileStack.push(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof l)return n.value;if(!e){if(!this.stackSlot)throw new f.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof l?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?e.referenceCount++:((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1),e},setupHelper:function(t,e,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(e,t,i,n),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(t,e,n){var i={},r=[],s=[],o=[],a=!n,l=void 0;a&&(n=[]),i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(i.fn=u||"container.noop",i.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),n[h]=l,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(s[h]=this.popStack(),r[h]=this.popStack());return a&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(o)),this.stringParams&&(i.types=this.source.generateArray(s),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(t,e,n,i){var r=this.setupParams(t,e,n);return r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):n?(n.push(r),""):r}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=a.RESERVED_WORDS={},n=0,i=t.length;n<i;n++)e[t[n]]=!0}(),a.isValidJavaScriptVariableName=function(t){return!a.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=a,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var o=n(5),i=void 0;try{}catch(t){}function s(t,e,n){if(o.isArray(t)){for(var i=[],r=0,s=t.length;r<s;r++)i.push(e.wrap(t[r],n));return i}return"boolean"==typeof t||"number"==typeof t?t+"":t}function r(t){this.srcFile=t,this.source=[]}i||((i=function(t,e,n,i){this.src="",i&&this.add(i)}).prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(t){for(var e=0,n=this.source.length;e<n;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new i(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof i?t:(t=s(t,this,e),new i(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=s(t[n],this);"undefined"!==i&&e.push([this.quotedString(n),":",i])}var r=this.generateList(e);return r.prepend("{"),r.add("}"),r},generateList:function(t){for(var e=this.empty(),n=0,i=t.length;n<i;n++)n&&e.add(","),e.add(s(t[n],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=r,t.exports=e.default}])},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("handlebars",[],e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e(),define("../locales/de",{insert_image:"Bild einfgen",insert_video:"Video einfgen",insert_website:"Webseite einfgen",add_slide:"Folie hinzufgen",remove_slide:"Folie entfernen",slides:"Folien",overview:"bersicht",open:"ffnen",save:"Speichern",save_as:"Speichern als...",new_:"Neu",text:"Text",image:"Bild",video:"Video",website:"Webseite",present:"Prsentieren",export:"Exportieren...",import:"Importieren...",cut:"Ausschneiden",copy:"Kopieren",paste:"Einfgen",delete:"Lschen",undo:"Rckgngig",redo:"Wiederholen",shapes:"Formen",single_slide_bg:"Single Slide Background",invisible:"Unsichtbar",reset:"Zurcksetzen",go:"Gehe",strut_exporter_json:{explain:"Dies erlaubt Ihnen, eine Datei auf Ihrem Computer zu speichern, die Sie spter wieder in Strut importieren knnen.",click_below:"Klicken sie zum Herunterladen auf das Symbol unten"},background:"Hintergrund",surface:"Oberflche"}),define("../locales/en",{insert_image:"Insert Image",insert_video:"Insert Video",insert_website:"Insert Website",add_slide:"Add Slide",remove_slide:"Remove Slide",slides:"Slides",overview:"Overview",open:"Open",save:"Save",save_as:"Save as...",new_:"New",text:"Text",image:"Image",video:"Video",website:"Website",present:"Present",export:"Export...",import:"Import...",cut:"Cut",copy:"Copy",paste:"Paste",delete:"Delete",undo:"Undo",redo:"Redo",shapes:"Shapes",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Reset",go:"Go",strut_exporter_json:{explain:"This allows you to save a file on your computer that you can import back into Strut later.",click_below:"Click below to download"},background:"Background",surface:"Surface"}),define("../locales/es",{insert_image:"Insertar imagen",insert_video:"Insertarr vdeo",insert_website:"Insertar sitio web",add_slide:"Aadir    diapositiva",remove_slide:"Eliminar diapositiva",slides:"Diapositivas",overview:"Resumen",open:"Abrir",save:"Guardar",save_as:"Guardar como...",new_:"Nuevo",text:"Texto",image:"Imagen",video:"Vdeo",website:"Sitio Web",present:"Presentar",export:"Exportar...",import:"Importar...",cut:"Cortar",copy:"Copiar",paste:"Pegar",delete:"Borrar",undo:"Deshacer",redo:"Rehacer",shapes:"Formas",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Reajustar",go:"Ir",strut_exporter_json:{explain:"Esto te permite guardar un archivo en tu ordenador que podrs importar en Strut posteriormente.",click_below:"Haz Copiarlick abajo para descargar."},background:"Fondo",surface:"Superficie"}),define("../locales/fr",{insert_image:"Insrer une image",insert_video:"Insrer une vido",insert_website:"Insrer un site web",add_slide:"Ajouter une diapo",remove_slide:"Supprimer la diapo",slides:"Diapos",overview:"Panorama",open:"Ouvrir",save:"Enregistrer",save_as:"Enregistrer sous...",new_:"Nouveau",text:"Texte",image:"Image",video:"Vido",website:"Site web",present:"Courant",export:"Exporter...",import:"Importer...",cut:"Couper",copy:"Copier",paste:"Coller",delete:"Effacer",undo:"Annuler",redo:"Refaire",shapes:"Formes",single_slide_bg:"Single Slide Background",invisible:"Invisible",reset:"Rinitialiser",go:"Aller",strut_exporter_json:{explain:"Vous pouvez sauvegarder la prsentation dans fichier que vous pourrez rimporter dans Strut plus tard",click_below:"Cliquer ci-dessous pour tlcharger le fichier"},background:"Fond",surface:"Surface"}),define("../locales/nl",{insert_image:"Afbeelding invoegen",insert_video:"Video invoegen",insert_website:"Website invoegen",add_slide:"Dia toevoegen",remove_slide:"Dia verwijderen",slides:"Dia's",overview:"Overzicht",open:"Openen",save:"Opslaan",save_as:"Opslaan als...",new_:"Nieuw",text:"Tekst",image:"Afbeelding",video:"Video",website:"Website",present:"Presenteren",export:"Exporteren...",import:"Importeren...",cut:"Knippen",copy:"Kopiren",paste:"Plakken",delete:"Verwijderen",undo:"Ongedaan maken",redo:"Opnieuw",shapes:"Vormen",single_slide_bg:"Achtergrond per dia",invisible:"Onzichtbaar",reset:"Terugzetten",go:"Gaan",strut_exporter_json:{explain:"Deze functie maakt het mogelijk om een bestand op te slaan, welke later weer in Strut gemporteerd kan worden.",click_below:"Klik hieronder om te downloaden"},background:"Achtergrond",surface:"Werkblad"}),define("../locales/ru",{insert_image:" ",insert_video:" ",insert_website:" ",add_slide:" ",remove_slide:" ",slides:"",overview:"",open:"",save:"",save_as:" ...",new_:"",text:"",image:"",video:"",website:"",present:"",export:"...",import:"...",cut:"",copy:"",paste:"",delete:"",undo:"",redo:"",shapes:"",single_slide_bg:"  ",invisible:"",reset:"",go:"",strut_exporter_json:{explain:"   ,        Strut.",click_below:"   ."},background:"",surface:""}),define("../locales/ar",{insert_image:" ",insert_video:" ",insert_website:"  ",add_slide:" ",remove_slide:" ",slides:"",overview:" ",open:"",save:"",save_as:"... ",new_:"",text:"",image:"",video:"",website:" ",present:"",export:"...",import:"...",cut:"",copy:"",paste:"",delete:"",undo:"",redo:"",shapes:"",single_slide_bg:"  ",invisible:" ",reset:" ",go:"",strut_exporter_json:{explain:"            ",click_below:"  "},background:"",surface:""}),define("lang",["../locales/de","../locales/en","../locales/es","../locales/fr","../locales/nl","../locales/ru","../locales/ar","handlebars"],function(t,e,n,i,r,s,o,a){var l={en:e,de:t,es:n,fr:i,nl:r,ru:s,ar:o},c=l[(window.navigator.language||window.navigator.userLanguage).split("-")[0]]||l.en;return a.registerHelper("lang",function(t){return c[t]}),c}),define("compiled-templates",["handlebars"],function(t){return this.JST=this.JST||{},this.JST["strut.etch_extension/align"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<a href="#" \n\tclass="btn btn-small etch-'+c(typeof(s=null!=(s=n.button||(null!=e?e.button:e))?s:a)===l?s.call(o,{name:"button",hash:{},data:r}):s)+'" title="'+c(typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:a)===l?s.call(o,{name:"title",hash:{},data:r}):s)+'"><i class="icon-align-'+c(typeof(s=null!=(s=n.icon||(null!=e?e.icon:e))?s:a)===l?s.call(o,{name:"icon",hash:{},data:r}):s)+'"></i></a>'},useData:!0}),this.JST["strut.etch_extension/colorChooser"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return'<input class="color-chooser colorpicker etch-'+t.escapeExpression("function"==typeof(s=null!=(s=n.button||(null!=e?e.button:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"button",hash:{},data:r}):s)+'" />'},useData:!0}),this.JST["strut.etch_extension/defaultButton"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<a href="#" \n\tclass="btn btn-small etch-'+c(typeof(s=null!=(s=n.button||(null!=e?e.button:e))?s:a)===l?s.call(o,{name:"button",hash:{},data:r}):s)+'" title="'+c(typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:a)===l?s.call(o,{name:"title",hash:{},data:r}):s)+'"><span>'+c(typeof(s=null!=(s=n.display||(null!=e?e.display:e))?s:a)===l?s.call(o,{name:"display",hash:{},data:r}):s)+"</span></a>"},useData:!0}),this.JST["strut.etch_extension/fontFamilySelection"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="btn-group">\n\t<button class="btn btn-inverse dropdown-toggle btn-small fontFamilyBtn" data-toggle="dropdown" title="Choose the font family"><span class="text">Lato</span><span class="caret"></span></button>\n\t<ul class="dropdown-menu menuBarOption" data-option="fontFamily">\n\t\t<li>\n                  <a class="lato" href="#" data-value="\'Lato\', sans-serif">Lato</a>\n                  <a class="leaguegothic" href="#" data-value="\'League Gothic\', sans-serif">League Gothic</a>\n                  <a class="droidsansmono" href="#" data-value="\'Droid Sans Mono\', monospace">Droid Sans Mono</a>\n                  <a class="ubuntu" href="#" data-value="\'Ubuntu\', sans-serif">Ubuntu</a>\n                  <a class="abril" href="#" data-value="\'Abril Fatface\', cursive">Abril</a>\n                  <a class="hammersmith" href="#" data-value="\'Hammersmith One\', sans-serif">Hammersmith One</a>\n                  <a class="fredoka" href="#" data-value="\'Fredoka One\', cursive">Fredoka One</a>\n                  <a class="gorditas" href="#" data-value="\'Gorditas\', cursive">Gorditas</a>\n                  <a class="pressstart" href="#" data-value="\'PressStart2P\', cursive">Press Start 2P</a>\n\t\t</li>\n\t</ul>\n</div>'},useData:!0}),this.JST["strut.etch_extension/fontSizeSelection"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="btn-group">\n\t<a class="btn btn-small btn-inverse dropdown-toggle" data-toggle="dropdown" title="Choose the font size"><span class="text fontSizeReadout">72</span>\n\t\t<span class="caret"></span></a>\n\t<ul class="dropdown-menu menuBarOption" data-option="fontSize">\n\t\t<li>\n                  <a href="#" data-value="144">144</a>\n                  <a href="#" data-value="96">96</a>\n                  <a href="#" data-value="72">72</a>\n\t\t\t<a href="#" data-value="64">64</a>\n                  <a href="#" data-value="48">48</a>\n                  <a href="#" data-value="36">36</a>\n                  <a href="#" data-value="24">24</a>\n                  <a href="#" data-value="16">16</a>\n                  <a href="#" data-value="12">12</a>\n                  <a href="#" data-value="8">8</a>\n\t\t</li>\n     \t</ul>\n</div>'},useData:!0}),this.JST["strut.header/Header"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="navbar navbar-inverse span12">\n\t<div class="navbar-inner">\n\t\t<ul class="nav">\n\t\t\t<li class="logo-holder">\n\t\t\t</li>\n\t\t\t<li class="divider-vertical">\n\t\t\t</li>\n\t\t</ul>\n\t\t<ul class="nav">\n\t\t\t<li class="create-comp-buttons">\n\t\t\t\t<div class="btn-group iconBtns">\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t\t<ul class="nav theme-buttons">\n\t\t</ul>\n\t\t<ul class="nav pull-right">\n\t\t\t<li class="divider-vertical">\n\t\t\t</li>\n\t\t\t<li class="mode-buttons">\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},useData:!0}),this.JST["strut.logo_button/Logo"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<a class="btn logo btn-plast dropdown-toggle" data-toggle="dropdown">\n\t<span class="logo-bg"></span>\n    <span class="caret"></span>\n</a>\n<ul class="dropdown-menu">\n</ul>'},useData:!0}),this.JST["strut.presentation_generator.bespoke/BespokeTemplate"]=t.template({1:function(t,e,n,i,r,s,o){var a,l,c=null!=e?e:t.nullContext||{},u=n.helperMissing,h="function",d=t.lambda,p=n.blockHelperMissing;return"\t<style>\n\t"+(null!=(a=typeof(l=null!=(l=n.customStylesheet||(null!=e?e.customStylesheet:e))?l:u)===h?l.call(c,{name:"customStylesheet",hash:{},data:r}):l)?a:"")+"\n\t</style>\n\t<style>\n"+(null!=(a=p.call(e,d(null!=(a=null!=(a=null!=e?e.customBackgrounds:e)?a.attributes:a)?a.bgs:a,e),{name:"customBackgrounds.attributes.bgs",hash:{},fn:t.program(2,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\t</style>\n"+(null!=(a=t.invokePartial(i.PerSlideSurfaceStylesheet,e,{name:"PerSlideSurfaceStylesheet",data:r,indent:"\t",helpers:n,partials:i,decorators:t.decorators}))?a:"")+'\t<div id="main" class="'+(null!=(a=(n.isBGClass||e&&e.isBGClass||u).call(c,null!=e?e.surface:e,{name:"isBGClass",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"strut-surface "+t.escapeExpression(typeof(l=null!=(l=n.cannedTransition||(null!=e?e.cannedTransition:e))?l:u)===h?l.call(c,{name:"cannedTransition",hash:{},data:r}):l)+'">\n\t\t<article class="innerBg">\n'+(null!=(a=p.call(e,d(null!=(a=null!=e?e.slides:e)?a.models:a,e),{name:"slides.models",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\t\t</article>\n\t</div>\n"},2:function(t,e,n,i,r){var s;return null!=(s=t.invokePartial(i.CustomBgStylesheet,e,{name:"CustomBgStylesheet",data:r,indent:"\t\t",helpers:n,partials:i,decorators:t.decorators}))?s:""},4:function(t,e,n,i,r){var s;return t.escapeExpression("function"==typeof(s=null!=(s=n.surface||(null!=e?e.surface:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"surface",hash:{},data:r}):s)+" "},6:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(7,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u},7:function(t,e,n,i,r,s,o){var a,l,c,u=null!=e?e:t.nullContext||{},h=n.helperMissing,d="function",p=t.escapeExpression,f='\t\t\t\t\t<section class="'+(null!=(a=(n.determineBG||e&&e.determineBG||h).call(u,o[1],o[3],{name:"determineBG",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" slideContainer strut-slide-"+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+'" style="width: 1024px; height: 768px;" data-bespoke-state="strut-slide-'+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+(null!=(a=(n.determineSurface||e&&e.determineSurface||h).call(u,o[1],o[3],{name:"determineSurface",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'">\n\t\t\t\t\t\t<div class="themedArea">\n              \t\t\t'+(null!=(a=(n.marked||e&&e.marked||h).call(u,null!=e?e.markdown:e,{name:"marked",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\n              \t\t\t</div>\n";return l=null!=(l=n.components||(null!=e?e.components:e))?l:h,c={name:"components",hash:{},fn:t.program(10,r,0,s,o),inverse:t.noop,data:r},a=typeof l===d?l.call(u,c):l,n.components||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(f+=a),f+"\t\t\t\t\t</section>\n"},8:function(t,e,n,i,r){return""},10:function(t,e,n,i,r){var s;return"\t\t\t\t\t\t\t"+(null!=(s=(n.renderComponent||e&&e.renderComponent||n.helperMissing).call(null!=e?e:t.nullContext||{},e,{name:"renderComponent",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(1,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u},usePartial:!0,useData:!0,useDepths:!0}),this.JST["strut.presentation_generator.handouts/HandoutsTemplate"]=t.template({1:function(t,e,n,i,r,s,o){var a,l;return'<style type="text/css">\n'+(null!=(a="function"==typeof(l=null!=(l=n.customStylesheet||(null!=e?e.customStylesheet:e))?l:n.helperMissing)?l.call(null!=e?e:t.nullContext||{},{name:"customStylesheet",hash:{},data:r}):l)?a:"")+'\n</style>\n\n<div class="notes-handout">\n'+(null!=(a=n.blockHelperMissing.call(e,t.lambda(null!=(a=null!=e?e.slides:e)?a.models:a,e),{name:"slides.models",hash:{},fn:t.program(2,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"</div>\n"},2:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(3,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u+'</div>\n<div class="notes">\n\tNotes:\n</div>\n</div>\n'},3:function(t,e,n,i,r,s,o){var a,l,c,u=null!=e?e:t.nullContext||{},h=n.helperMissing,d='<div class="slide-and-notes">\n<div class="slide '+(null!=(a=(n.determineBG||e&&e.determineBG||h).call(u,o[1],o[3],{name:"determineBG",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+' slideContainer" style="'+(null!=(a=(n.slideBGImg||e&&e.slideBGImg||h).call(u,o[1],{name:"slideBGImg",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'">\n<div class="reveal themedArea">\n'+(null!=(a=(n.marked||e&&e.marked||h).call(u,null!=e?e.markdown:e,{name:"marked",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\n</div>\n";return l=null!=(l=n.components||(null!=e?e.components:e))?l:h,c={name:"components",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(u,c):l,n.components||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(d+=a),d},4:function(t,e,n,i,r){return""},6:function(t,e,n,i,r){var s;return(null!=(s=(n.renderComponent||e&&e.renderComponent||n.helperMissing).call(null!=e?e:t.nullContext||{},e,{name:"renderComponent",hash:{},fn:t.program(4,r,0),inverse:t.noop,data:r}))?s:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r,s,o){var a,l,c;return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(1,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a?a:""},useData:!0,useDepths:!0}),this.JST["strut.presentation_generator.impress/ComponentContainer"]=t.template({1:function(t,e,n,i,r){return""},3:function(t,e,n,i,r){var s;return"rotate("+t.escapeExpression("function"==typeof(s=null!=(s=n.rotate||(null!=e?e.rotate:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"rotate",hash:{},data:r}):s)+"rad)"},5:function(t,e,n,i,r){var s;return"skewX("+t.escapeExpression("function"==typeof(s=null!=(s=n.skewX||(null!=e?e.skewX:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"skewX",hash:{},data:r}):s)+"rad)"},7:function(t,e,n,i,r){var s;return"skewY("+t.escapeExpression("function"==typeof(s=null!=(s=n.skewY||(null!=e?e.skewY:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"skewY",hash:{},data:r}):s)+"rad)"},9:function(t,e,n,i,r){var s;return(null!=(s=(n.round||e&&e.round||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=(s=null!=e?e.scale:e)?s.width:s,{name:"round",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"px"},11:function(t,e,n,i,r){var s;return(null!=(s=(n.round||e&&e.round||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=(s=null!=e?e.scale:e)?s.height:s,{name:"round",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"px"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing;return'<div class="componentContainer '+t.escapeExpression("function"==typeof(o=null!=(o=n.customClasses||(null!=e?e.customClasses:e))?o:l)?o.call(a,{name:"customClasses",hash:{},data:r}):o)+'" style="top: '+(null!=(s=(n.round||e&&e.round||l).call(a,null!=e?e.y:e,{name:"round",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"px; left: "+(null!=(s=(n.round||e&&e.round||l).call(a,null!=e?e.x:e,{name:"round",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"px; -webkit-transform: "+(null!=(s=n.if.call(a,null!=e?e.rotate:e,{name:"if",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewX:e,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewY:e,{name:"if",hash:{},fn:t.program(7,r,0),inverse:t.noop,data:r}))?s:"")+"; -moz-transform: "+(null!=(s=n.if.call(a,null!=e?e.rotate:e,{name:"if",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewX:e,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewY:e,{name:"if",hash:{},fn:t.program(7,r,0),inverse:t.noop,data:r}))?s:"")+"; transform: "+(null!=(s=n.if.call(a,null!=e?e.rotate:e,{name:"if",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewX:e,{name:"if",hash:{},fn:t.program(5,r,0),inverse:t.noop,data:r}))?s:"")+" "+(null!=(s=n.if.call(a,null!=e?e.skewY:e,{name:"if",hash:{},fn:t.program(7,r,0),inverse:t.noop,data:r}))?s:"")+"; width: "+(null!=(s=n.if.call(a,null!=e?e.scale:e,{name:"if",hash:{},fn:t.program(9,r,0),inverse:t.noop,data:r}))?s:"")+"; height: "+(null!=(s=n.if.call(a,null!=e?e.scale:e,{name:"if",hash:{},fn:t.program(11,r,0),inverse:t.noop,data:r}))?s:"")+';">\n'+(null!=(s=t.invokePartial(i.TransformContainer,e,{name:"TransformContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/Image"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o;return(null!=(s=t.invokePartial(i.ComponentContainer,e,{name:"ComponentContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<img src="'+t.escapeExpression("function"==typeof(o=null!=(o=n.src||(null!=e?e.src:e))?o:n.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"src",hash:{},data:r}):o)+'"></img>\n</div>\n</div>'},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/ImpressTemplate"]=t.template({1:function(t,e,n,i,r,s,o){var a,l,c=null!=e?e:t.nullContext||{},u=n.helperMissing,h=t.lambda,d=n.blockHelperMissing;return'<style type="text/css">\n'+(null!=(a="function"==typeof(l=null!=(l=n.customStylesheet||(null!=e?e.customStylesheet:e))?l:u)?l.call(c,{name:"customStylesheet",hash:{},data:r}):l)?a:"")+"\n</style>\n<style>\n"+(null!=(a=d.call(e,h(null!=(a=null!=(a=null!=e?e.customBackgrounds:e)?a.attributes:a)?a.bgs:a,e),{name:"customBackgrounds.attributes.bgs",hash:{},fn:t.program(2,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"</style>\n"+(null!=(a=t.invokePartial(i.PerSlideSurfaceStylesheet,e,{name:"PerSlideSurfaceStylesheet",data:r,helpers:n,partials:i,decorators:t.decorators}))?a:"")+'\x3c!-- This is a work around / hack to get the user\'s browser to download the fonts \n if they decide to save the presentation. --\x3e\n<div style="visibility: hidden; width: 0px; height: 0px">\n<img src="css/Lato-Bold.woff" />\n<img src="css/HammersmithOne.woff" />\n<img src="css/Droid-Sans-Mono.woff" />\n<img src="css/Gorditas-Regular.woff" />\n<img src="css/FredokaOne-Regular.woff" />\n<img src="css/Ubuntu.woff" />\n<img src="css/Ubuntu-Bold.woff" />\n<img src="css/PressStart2P-Regular.woff" />\n<img src="css/Lato-BoldItalic.woff" />\n<img src="css/AbrilFatface-Regular.woff" />\n<img src="css/Lato-Regular.woff" />\n</div>\n\n<div class="fallback-message">\n    <p>Your browser <b>doesn\'t support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>\n    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>\n</div>\n\n<div class="bg '+(null!=(a=(n.isBGClass||e&&e.isBGClass||u).call(c,null!=e?e.surface:e,{name:"isBGClass",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'strut-surface">\n<div class="bg innerBg">\n<div id="impress">\n'+(null!=(a=d.call(e,h(null!=(a=null!=e?e.slides:e)?a.models:a,e),{name:"slides.models",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'\t<div id="overview" class="step" data-state="strut-slide-overview" data-x="'+(null!=(a=(n.scaleX||e&&e.scaleX||u).call(c,null!=e?e.overviewX:e,{name:"scaleX",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'" data-y="'+(null!=(a=(n.scaleY||e&&e.scaleY||u).call(c,null!=e?e.overviewY:e,{name:"scaleY",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'" data-scale="9"></div>\n'},2:function(t,e,n,i,r){var s;return null!=(s=t.invokePartial(i.CustomBgStylesheet,e,{name:"CustomBgStylesheet",data:r,indent:"\t",helpers:n,partials:i,decorators:t.decorators}))?s:""},4:function(t,e,n,i,r){var s;return t.escapeExpression("function"==typeof(s=null!=(s=n.surface||(null!=e?e.surface:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"surface",hash:{},data:r}):s)+" "},6:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(7,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u+"\t\t</div>\n"},7:function(t,e,n,i,r,s,o){var a,l,c,u=null!=e?e:t.nullContext||{},h=n.helperMissing,d="function",p=t.escapeExpression,f='\t\t\t<div class="step" data-state="strut-slide-'+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+(null!=(a=(n.determineSurface||e&&e.determineSurface||h).call(u,o[1],o[3],{name:"determineSurface",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'" data-x="'+(null!=(a=(n.scaleX||e&&e.scaleX||h).call(u,null!=e?e.x:e,{name:"scaleX",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'" data-y="'+(null!=(a=(n.scaleY||e&&e.scaleY||h).call(u,null!=e?e.y:e,{name:"scaleY",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'" '+(null!=(a=n.if.call(u,null!=e?e.rotateX:e,{name:"if",hash:{},fn:t.program(10,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"  "+(null!=(a=n.if.call(u,null!=e?e.rotateY:e,{name:"if",hash:{},fn:t.program(12,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" "+(null!=(a=n.if.call(u,null!=e?e.rotateZ:e,{name:"if",hash:{},fn:t.program(14,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" "+(null!=(a=n.if.call(u,null!=e?e.z:e,{name:"if",hash:{},fn:t.program(16,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" "+(null!=(a=n.if.call(u,null!=e?e.impScale:e,{name:"if",hash:{},fn:t.program(18,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'>\n\t\t\t<div class="'+(null!=(a=(n.determineBG||e&&e.determineBG||h).call(u,o[1],o[3],{name:"determineBG",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" slideContainer strut-slide-"+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+'" style="width: 1024px; height: 768px;">\n\t\t\t<div class="themedArea">\n\t\t\t'+(null!=(a=(n.marked||e&&e.marked||h).call(u,null!=e?e.markdown:e,{name:"marked",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\n\t\t\t</div>\n";return l=null!=(l=n.components||(null!=e?e.components:e))?l:h,c={name:"components",hash:{},fn:t.program(20,r,0,s,o),inverse:t.noop,data:r},a=typeof l===d?l.call(u,c):l,n.components||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(f+=a),f+"\t\t\t</div>\n"},8:function(t,e,n,i,r){return""},10:function(t,e,n,i,r){var s;return'data-rotate-x="'+(null!=(s=(n.toDeg||e&&e.toDeg||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.rotateX:e,{name:"toDeg",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+'"'},12:function(t,e,n,i,r){var s;return'data-rotate-y="'+(null!=(s=(n.toDeg||e&&e.toDeg||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.rotateY:e,{name:"toDeg",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+'"'},14:function(t,e,n,i,r){var s;return'data-rotate-z="'+(null!=(s=(n.toDeg||e&&e.toDeg||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.rotateZ:e,{name:"toDeg",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+'"'},16:function(t,e,n,i,r){var s;return'data-z="'+t.escapeExpression("function"==typeof(s=null!=(s=n.z||(null!=e?e.z:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"z",hash:{},data:r}):s)+'"'},18:function(t,e,n,i,r){var s;return'data-scale="'+t.escapeExpression("function"==typeof(s=null!=(s=n.impScale||(null!=e?e.impScale:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"impScale",hash:{},data:r}):s)+'"'},20:function(t,e,n,i,r){var s;return"\t\t\t"+(null!=(s=(n.renderComponent||e&&e.renderComponent||n.helperMissing).call(null!=e?e:t.nullContext||{},e,{name:"renderComponent",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(1,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u+'</div>\n<div class="hint">\n    <p>Use a spacebar or arrow keys to navigate</p>\n</div>\n</div>\n</div>'},usePartial:!0,useData:!0,useDepths:!0}),this.JST["strut.presentation_generator.impress/Shape"]=t.template({1:function(t,e,n,i,r){return""},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=(s=t.invokePartial(i.ComponentContainer,e,{name:"ComponentContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"";return o=null!=(o=n.shapeSvg||(null!=e?e.shapeSvg:e))?o:n.helperMissing,a={name:"shapeSvg",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},s="function"==typeof o?o.call(null!=e?e:t.nullContext||{},a):o,n.shapeSvg||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"\n</div>\n</div>"},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/SVGContainer"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing,c="function",u=t.escapeExpression,h=t.lambda;return'<div class="componentContainer" style="top: '+u(typeof(o=null!=(o=n.y||(null!=e?e.y:e))?o:l)===c?o.call(a,{name:"y",hash:{},data:r}):o)+"px; left: "+u(typeof(o=null!=(o=n.x||(null!=e?e.x:e))?o:l)===c?o.call(a,{name:"x",hash:{},data:r}):o)+"px; width: "+u(h(null!=(s=null!=e?e.scale:e)?s.width:s,e))+"px; height: "+u(h(null!=(s=null!=e?e.scale:e)?s.height:s,e))+'px;">\n'+(null!=(s=t.invokePartial(i.TransformContainer,e,{name:"TransformContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/SVGImage"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o;return(null!=(s=t.invokePartial(i.SVGContainer,e,{name:"SVGContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<img src="'+t.escapeExpression("function"==typeof(o=null!=(o=n.src||(null!=e?e.src:e))?o:n.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"src",hash:{},data:r}):o)+'" style="width: 100%; height: 100%"></img>\n</div>\n</div>'},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/TextBox"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing,c="function",u=t.escapeExpression;return(null!=(s=t.invokePartial(i.ComponentContainer,e,{name:"ComponentContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<div style="font-size: '+u(typeof(o=null!=(o=n.size||(null!=e?e.size:e))?o:l)===c?o.call(a,{name:"size",hash:{},data:r}):o)+'px;" class="antialias">\n'+u(typeof(o=null!=(o=n.text||(null!=e?e.text:e))?o:l)===c?o.call(a,{name:"text",hash:{},data:r}):o)+"\n</div>\n</div>\n</div>"},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/TransformContainer"]=t.template({1:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing;return"scale("+(null!=(s=(n.round||e&&e.round||a).call(o,null!=(s=null!=e?e.scale:e)?s.x:s,{name:"round",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+", "+(null!=(s=(n.round||e&&e.round||a).call(o,null!=(s=null!=e?e.scale:e)?s.y:s,{name:"round",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+")"},2:function(t,e,n,i,r){return""},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{};return'<div class="transformContainer" style="-webkit-transform: '+(null!=(s=n.if.call(o,null!=e?e.scale:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+";\n-moz-transform: "+(null!=(s=n.if.call(o,null!=e?e.scale:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+";\ntransform: "+(null!=(s=n.if.call(o,null!=e?e.scale:e,{name:"if",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'">'},useData:!0}),this.JST["strut.presentation_generator.impress/Video"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing,c="function",u=t.escapeExpression;return(null!=(s=t.invokePartial(i.ComponentContainer,e,{name:"ComponentContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<video controls>\n\t<source src="'+u(typeof(o=null!=(o=n.src||(null!=e?e.src:e))?o:l)===c?o.call(a,{name:"src",hash:{},data:r}):o)+'" type="'+u(typeof(o=null!=(o=n.srcType||(null!=e?e.srcType:e))?o:l)===c?o.call(a,{name:"srcType",hash:{},data:r}):o)+'" preload="metadata"></source>\n</video>\n</div>\n</div>'},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/WebFrame"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o;return(null!=(s=t.invokePartial(i.ComponentContainer,e,{name:"ComponentContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<iframe width="960" height="768" src="'+t.escapeExpression("function"==typeof(o=null!=(o=n.src||(null!=e?e.src:e))?o:n.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"src",hash:{},data:r}):o)+'"></iframe>\n</div>\n</div>'},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/Youtube"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=t.lambda,l=t.escapeExpression,c=null!=e?e:t.nullContext||{},u=n.helperMissing,h="function";return(null!=(s=t.invokePartial(i.SVGContainer,e,{name:"SVGContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")+'<object width="'+l(a(null!=(s=null!=e?e.scale:e)?s.width:s,e))+'" height="'+l(a(null!=(s=null!=e?e.scale:e)?s.height:s,e))+'"><param name="movie" value="http://www.youtube.com/v/'+l(typeof(o=null!=(o=n.shortSrc||(null!=e?e.shortSrc:e))?o:u)===h?o.call(c,{name:"shortSrc",hash:{},data:r}):o)+'&hl=en&fs=1"><param name="allowFullScreen" value="true"><embed src="http://www.youtube.com/v/'+l(typeof(o=null!=(o=n.shortSrc||(null!=e?e.shortSrc:e))?o:u)===h?o.call(c,{name:"shortSrc",hash:{},data:r}):o)+'&hl=en&fs=1" type="application/x-shockwave-flash" allowfullscreen="true" width="'+l(a(null!=(s=null!=e?e.scale:e)?s.width:s,e))+'" height="'+l(a(null!=(s=null!=e?e.scale:e)?s.height:s,e))+'"></object>\n</div>\n</div>'},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.impress/YoutubeContainer"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing,c="function",u=t.escapeExpression;return'<div class="componentContainer" style="top: '+u(typeof(o=null!=(o=n.y||(null!=e?e.y:e))?o:l)===c?o.call(a,{name:"y",hash:{},data:r}):o)+"px; left: "+u(typeof(o=null!=(o=n.x||(null!=e?e.x:e))?o:l)===c?o.call(a,{name:"x",hash:{},data:r}):o)+'px;">\n'+(null!=(s=t.invokePartial(i.TransformContainer,e,{name:"TransformContainer",data:r,helpers:n,partials:i,decorators:t.decorators}))?s:"")},usePartial:!0,useData:!0}),this.JST["strut.presentation_generator.reveal/RevealTemplate"]=t.template({1:function(t,e,n,i,r,s,o){var a,l,c=null!=e?e:t.nullContext||{},u=n.helperMissing;return'  <style type="text/css">\n    '+(null!=(a="function"==typeof(l=null!=(l=n.customStylesheet||(null!=e?e.customStylesheet:e))?l:u)?l.call(c,{name:"customStylesheet",hash:{},data:r}):l)?a:"")+"\n  </style>\n"+(null!=(a=t.invokePartial(i.PerSlideSurfaceStylesheet,e,{name:"PerSlideSurfaceStylesheet",data:r,indent:"  ",helpers:n,partials:i,decorators:t.decorators}))?a:"")+'  \n    <div class="'+(null!=(a=(n.isBGClass||e&&e.isBGClass||u).call(c,null!=e?e.surface:e,{name:"isBGClass",hash:{},fn:t.program(2,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'reveal strut-surface">\n      <div class="bg innerBg">\n      <div class="slides">\n'+(null!=(a=n.blockHelperMissing.call(e,t.lambda(null!=(a=null!=e?e.slides:e)?a.models:a,e),{name:"slides.models",hash:{},fn:t.program(4,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"      </div>\n      </div>\n    </div>\n"},2:function(t,e,n,i,r){var s;return t.escapeExpression("function"==typeof(s=null!=(s=n.surface||(null!=e?e.surface:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"surface",hash:{},data:r}):s)+" "},4:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(5,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u},5:function(t,e,n,i,r,s,o){var a,l,c,u=null!=e?e:t.nullContext||{},h=n.helperMissing,d="function",p=t.escapeExpression,f='          <section class="'+(null!=(a=(n.determineBG||e&&e.determineBG||h).call(u,o[1],o[3],{name:"determineBG",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r}))?a:"")+" slideContainer strut-slide-"+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+'" style="width: 1024px; height: 768px;" data-state="strut-slide-'+p(typeof(l=null!=(l=n.index||(null!=e?e.index:e))?l:h)===d?l.call(u,{name:"index",hash:{},data:r}):l)+(null!=(a=(n.determineSurface||e&&e.determineSurface||h).call(u,o[1],o[3],{name:"determineSurface",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r}))?a:"")+'">\n            <div class="themedArea">\n            '+(null!=(a=(n.marked||e&&e.marked||h).call(u,null!=e?e.markdown:e,{name:"marked",hash:{},fn:t.program(6,r,0,s,o),inverse:t.noop,data:r}))?a:"")+"\n            </div>\n";return l=null!=(l=n.components||(null!=e?e.components:e))?l:h,c={name:"components",hash:{},fn:t.program(8,r,0,s,o),inverse:t.noop,data:r},a=typeof l===d?l.call(u,c):l,n.components||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(f+=a),f+"          </section>\n"},6:function(t,e,n,i,r){return""},8:function(t,e,n,i,r){var s;return"              "+(null!=(s=(n.renderComponent||e&&e.renderComponent||n.helperMissing).call(null!=e?e:t.nullContext||{},e,{name:"renderComponent",hash:{},fn:t.program(6,r,0),inverse:t.noop,data:r}))?s:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r,s,o){var a,l,c,u="";return l=null!=(l=n.attributes||(null!=e?e.attributes:e))?l:n.helperMissing,c={name:"attributes",hash:{},fn:t.program(1,r,0,s,o),inverse:t.noop,data:r},a="function"==typeof l?l.call(null!=e?e:t.nullContext||{},c):l,n.attributes||(a=n.blockHelperMissing.call(e,a,c)),null!=a&&(u+=a),u},usePartial:!0,useData:!0,useDepths:!0}),this.JST["strut.presentation_generator/Button"]=t.template({1:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'    <li data-option="'+c(typeof(s=null!=(s=n.id||(null!=e?e.id:e))?s:a)===l?s.call(o,{name:"id",hash:{},data:r}):s)+'"><a>\n    \t\t<span class="check" style="visibility: hidden;">&#10003;</span>\n    \t\t'+c(typeof(s=null!=(s=n.displayName||(null!=e?e.displayName:e))?s:a)===l?s.call(o,{name:"displayName",hash:{},data:r}):s)+"\n    </a></li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return'<button class="btn btn-success act"><i class="icon-play icon-white"/><span class="chosen">'+t.escapeExpression(t.lambda(null!=(s=null!=e?e.chosen:e)?s.displayName:s,e))+'</span></button>\n<button class="btn dropdown-toggle btn-success iconBtnsSplit" data-toggle="dropdown">\n  <span class="caret whiteCaret"></span>\n</button>\n<ul class="dropdown-menu">\n'+(null!=(s=n.each.call(null!=e?e:t.nullContext||{},null!=e?e.generators:e,{name:"each",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"</ul>"},useData:!0}),this.JST["strut.presentation_generator/CustomBgStylesheet"]=t.template({1:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return"\t."+c(typeof(s=null!=(s=n.klass||(null!=e?e.klass:e))?s:a)===l?s.call(o,{name:"klass",hash:{},data:r}):s)+" {\n\t\tbackground: "+c(typeof(s=null!=(s=n.style||(null!=e?e.style:e))?s:a)===l?s.call(o,{name:"style",hash:{},data:r}):s)+";\n\t}\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return null!=(s=n.blockHelperMissing.call(e,t.lambda(e,e),{name:".",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:""},useData:!0}),this.JST["strut.presentation_generator/PerSlideSurfaceStylesheet"]=t.template({1:function(t,e,n,i,r){var s;return"\t.strut-surface {\n\t\t"+(null!=(s=(n.getBGImgStyle||e&&e.getBGImgStyle||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.surface:e,{name:"getBGImgStyle",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t}\n"},2:function(t,e,n,i,r){return""},4:function(t,e,n,i,r){var s;return"\t.slideContainer {\n\t\t"+(null!=(s=(n.getBGImgStyle||e&&e.getBGImgStyle||n.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.background:e,{name:"getBGImgStyle",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t}\n"},6:function(t,e,n,i,r){var s,o,a,l="";return o=null!=(o=n.attributes||(null!=e?e.attributes:e))?o:n.helperMissing,a={name:"attributes",hash:{},fn:t.program(7,r,0),inverse:t.noop,data:r},s="function"==typeof o?o.call(null!=e?e:t.nullContext||{},a):o,n.attributes||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l},7:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing;return(null!=(s=(n.isBGImg||e&&e.isBGImg||a).call(o,null!=e?e.surface:e,{name:"isBGImg",hash:{},fn:t.program(8,r,0),inverse:t.noop,data:r}))?s:"")+(null!=(s=(n.isBGImg||e&&e.isBGImg||a).call(o,null!=e?e.background:e,{name:"isBGImg",hash:{},fn:t.program(10,r,0),inverse:t.noop,data:r}))?s:"")},8:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing;return"\t\t.strut-surface > .strut-slide-"+t.escapeExpression("function"==typeof(o=null!=(o=n.index||r&&r.index)?o:l)?o.call(a,{name:"index",hash:{},data:r}):o)+" {\n\t\t\t/*this only works for bg images or custom bgs*/\n\t\t\t/*for bg classes we'll have to introduce a data api*/\n\t\t\t"+(null!=(s=(n.getBGImgStyle||e&&e.getBGImgStyle||l).call(a,null!=e?e.surface:e,{name:"getBGImgStyle",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t\t}\n"},10:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing;return"\t\t.slideContainer.strut-slide-"+t.escapeExpression("function"==typeof(o=null!=(o=n.index||r&&r.index)?o:l)?o.call(a,{name:"index",hash:{},data:r}):o)+" {\n\t\t\t"+(null!=(s=(n.getBGImgStyle||e&&e.getBGImgStyle||l).call(a,null!=e?e.background:e,{name:"getBGImgStyle",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t\t}\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing;return"<style>\n"+(null!=(s=(n.isBGImg||e&&e.isBGImg||a).call(o,null!=e?e.surface:e,{name:"isBGImg",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+(null!=(s=(n.isBGImg||e&&e.isBGImg||a).call(o,null!=e?e.background:e,{name:"isBGImg",hash:{},fn:t.program(4,r,0),inverse:t.noop,data:r}))?s:"")+(null!=(s=n.blockHelperMissing.call(e,t.lambda(null!=(s=null!=e?e.slides:e)?s.models:s,e),{name:"slides.models",hash:{},fn:t.program(6,r,0),inverse:t.noop,data:r}))?s:"")+"</style>"},useData:!0}),this.JST["strut.slide_components/Component"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<div class="content-scale">\n<div class="content"></div>\n</div>\n<span class="topLabel label"> \n\t<span class="skewx" data-delta="skewX"></span>\n\t<span class="align" data-option="x"></span>\n</span>\n<span class="leftLabel label"> \n\t<span class="align" data-option="y"></span>\n\t<span class="skewy" data-delta="skewY"></span>\n</span>\n<span class="rightLabel label rotate" data-delta="rotate"></span>\n<span class="scale label" data-delta="scale"></span>\n<span class="close-btn-red-20 removeBtn" title="Remove"></span>\n<div class="positioningCtrls form-inline">\n\t<span class="label leftposition"></span>\n\t<input class="position" type="text" data-option="x" value="'+c(typeof(s=null!=(s=n.x||(null!=e?e.x:e))?s:a)===l?s.call(o,{name:"x",hash:{},data:r}):s)+'"/>\n\t<span class="label bottomposition"></span>\n\t<input class="position" type="text" data-option="y" value="'+c(typeof(s=null!=(s=n.y||(null!=e?e.y:e))?s:a)===l?s.call(o,{name:"y",hash:{},data:r}):s)+'"/>\n</div>\n'},useData:!0}),this.JST["strut.slide_components/ShapesDropdown"]=t.template({1:function(t,e,n,i,r){return""},3:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<li><a class="shape" data-index="'+c(typeof(s=null!=(s=n.index||r&&r.index)?s:a)===l?s.call(o,{name:"index",hash:{},data:r}):s)+'"><img src="'+c(typeof(s=null!=(s=n.src||(null!=e?e.src:e))?s:a)===l?s.call(o,{name:"src",hash:{},data:r}):s)+'" width="100%" height="100%"></img></a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u='<a class="btn btn-plast dropdown-toggle" data-toggle="dropdown">\n\t<i class="icon-star icon-white"></i>\n\t'+(null!=(s=(n.lang||e&&e.lang||c).call(l,null!=e?e.title:e,{name:"lang",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'</a>\n<ul class="dropdown-menu horizontalDropdown" role="menu" style="min-width: 127px; width: 127px">\n';return o=null!=(o=n.shapes||(null!=e?e.shapes:e))?o:c,a={name:"shapes",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s="function"==typeof o?o.call(l,a):o,n.shapes||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(u+=s),u+"</ul>\n"},useData:!0}),this.JST["strut.slide_editor/Button"]=t.template({1:function(t,e,n,i,r){return""},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return'<div class="btn-group iconBtns">\n\t<a class="btn btn-plast">\n\t\t<i class="icon-th-list icon-white"></i>\n\t\t'+(null!=(s=(n.lang||e&&e.lang||n.helperMissing).call(null!=e?e:t.nullContext||{},"slides",{name:"lang",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t</a>\n</div>"},useData:!0}),this.JST["strut.slide_editor/Tablets"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="tablets-content">\n</div>\n<div class="tablets-toggle btn btn-plast">\n\t<span class="caret whiteCaret"></span>\n</div>'},useData:!0}),this.JST["strut.slide_snapshot/SlideDrawer"]=t.template({1:function(t,e,n,i,r){return""},3:function(t,e,n,i,r){var s;return(null!=(s=(n.renderComponent||e&&e.renderComponent||n.helperMissing).call(null!=e?e:t.nullContext||{},e,"Video WebFrame",{name:"renderComponent",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u='<div class="themedArea">\n'+(null!=(s=(n.marked||e&&e.marked||c).call(l,null!=e?e.markdown:e,{name:"marked",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"\n</div>\n";return o=null!=(o=n.components||(null!=e?e.components:e))?o:c,a={name:"components",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s="function"==typeof o?o.call(l,a):o,n.components||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(u+=s),u},useData:!0}),this.JST["strut.slide_snapshot/SlideSnapshot"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="overlay"></div>\n<div class="slideDrawer slideContainer"></div>\n<span class="close-btn-red-20 removeBtn" title="Remove"></span>\n<span class="badge badge-inverse"> </span>'},useData:!0}),this.JST["strut.slide_snapshot/TransitionSlideSnapshot"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<div class="content-container">\n\t<div class="content">\n\t\t<div class="slideDrawer slideContainer"></div>\n\t\t<div class="back"></div>\n\t\t<div class="top"></div><div class="bottom"></div><div class="left"></div><div class="right"></div>\n\t</div>\n</div>\n\n<div class="topLabel form-inline">\n\t<span class="label rotates" data-delta="rotateY">Y</span>\n\t<input type="text" data-option="rotateY" value="'+c(typeof(s=null!=(s=n.rotateY||(null!=e?e.rotateY:e))?s:a)===l?s.call(o,{name:"rotateY",hash:{},data:r}):s)+'"></input>\n</div>\n<div class="leftLabel form-inline">\n\t<span class="label rotates" data-delta="rotateX">X</span>\n\t<input type="text" data-option="rotateX" value="'+c(typeof(s=null!=(s=n.rotateX||(null!=e?e.rotateX:e))?s:a)===l?s.call(o,{name:"rotateX",hash:{},data:r}):s)+'"></input>\n</div>\n<div class="rightLabel form-inline">\n\t<span class="label rotates" data-delta="rotateZ">Z</span>\n\t<input type="text" data-option="rotateZ" value="'+c(typeof(s=null!=(s=n.rotateZ||(null!=e?e.rotateZ:e))?s:a)===l?s.call(o,{name:"rotateZ",hash:{},data:r}):s)+'"></input>\n</div>\n<div class="positioningCtrls form-inline">\n\t<span class="label layer">z</span>\n\t<input class="position" type="text" data-option="z" value="'+c(typeof(s=null!=(s=n.z||(null!=e?e.z:e))?s:a)===l?s.call(o,{name:"z",hash:{},data:r}):s)+'"/>\n\t<span class="label scales"></span>\n\t<input class="position" type="text" data-option="scale" value="'+c(typeof(s=null!=(s=n.impScale||(null!=e?e.impScale:e))?s:a)===l?s.call(o,{name:"impScale",hash:{},data:r}):s)+'"/>\n</div>\n<span class="badge badge-inverse"> </span>\n'},useData:!0}),this.JST["strut.splash/Splash"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return"<div></div>"},useData:!0}),this.JST["strut.storage/ProviderTab"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return"<div></div>"},useData:!0}),this.JST["strut.storage/StorageModal"]=t.template({1:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'\t\t\t<li class="providerTab"><a data-provider="'+c(typeof(s=null!=(s=n.id||(null!=e?e.id:e))?s:a)===l?s.call(o,{name:"id",hash:{},data:r}):s)+'">'+c(typeof(s=null!=(s=n.name||(null!=e?e.name:e))?s:a)===l?s.call(o,{name:"name",hash:{},data:r}):s)+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u="function",h='<div class="modal-header">\n\t<button class="close" data-dismiss="modal"></button>\n\t<h3 class="title">'+t.escapeExpression(typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:c)===u?o.call(l,{name:"title",hash:{},data:r}):o)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n\t<ul class="nav nav-tabs">\n';return o=null!=(o=n.tabs||(null!=e?e.tabs:e))?o:c,a={name:"tabs",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.tabs||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(h+=s),h+'\t</ul>\n\t<div class="tabContent">\n\t</div>\n</div>\n<div class="modal-footer">\n\t<a href="#" class="btn btn-primary ok btn-inverse">Ok</a>\n</div>'},useData:!0}),this.JST["strut.themes/BackgroundChooserDropdown"]=t.template({1:function(t,e,n,i,r){return""},3:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'\t\t\t<li><a class="'+c(typeof(s=null!=(s=n.klass||(null!=e?e.klass:e))?s:a)===l?s.call(o,{name:"klass",hash:{},data:r}):s)+' thumbnail" alt="'+c(typeof(s=null!=(s=n.description||(null!=e?e.description:e))?s:a)===l?s.call(o,{name:"description",hash:{},data:r}):s)+'" data-class="'+c(typeof(s=null!=(s=n.klass||(null!=e?e.klass:e))?s:a)===l?s.call(o,{name:"klass",hash:{},data:r}):s)+'"></a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u="function",h=n.blockHelperMissing,d='<a class="btn btn-plast dropdown-toggle" data-toggle="dropdown">\n\t<i class="icon-tint icon-white"></i>\n\t'+(null!=(s=(n.lang||e&&e.lang||c).call(l,null!=e?e.title:e,{name:"lang",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'</a>\n<ul class="dropdown-menu" role="menu">\n\t<li class="dropdown-submenu">\n\t\t<a tabindex="-1" href="#">All Slides</a>\n\t\t<ul class="dropdown-menu horizontalDropdown allSlides" style="min-width: 127px; width: 127px">\n';return o=null!=(o=n.backgrounds||(null!=e?e.backgrounds:e))?o:c,a={name:"backgrounds",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.backgrounds||(s=h.call(e,s,a)),null!=s&&(d+=s),d+='\t\t\t<li><a class="transparentPattern thumbnail" data-class="bg-transparent"></a></li>\n\t\t\t<li><a class="bg-img thumbnail" data-class="bg-img"><i class="icon-picture"></i></a></li>\n\t\t\t<li><a class="bg-custom thumbnail" data-class="bg-custom"><i class="icon-pencil"></i></a></li>\n\t\t</ul>\n\t</li>\n\t<li class="dropdown-submenu">\n\t\t<a tabindex="-1" href="#">Selected Slide</a>\n\t\t<ul class="dropdown-menu horizontalDropdown" style="min-width: 127px; width: 127px">\n',o=null!=(o=n.backgrounds||(null!=e?e.backgrounds:e))?o:c,a={name:"backgrounds",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.backgrounds||(s=h.call(e,s,a)),null!=s&&(d+=s),d+'\t\t\t<li><a class="transparentPattern thumbnail" data-class="bg-transparent"></a></li>\n\t\t\t<li><a class="nobg thumbnail" data-class="bg-default"></a></li>\n\t\t\t<li><a class="bg-img thumbnail" data-class="bg-img"><i class="icon-picture"></i></a></li>\n\t\t\t<li><a class="bg-custom thumbnail" data-class="bg-custom"><i class="icon-pencil"></i></a></li>\n\t\t</ul>\n\t</li>\n</ul>\n'},useData:!0}),this.JST["strut.themes/ColorChooserModal"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){return'<div class="modal-header">\n\t<button class="close" data-dismiss="modal"></button>\n\t<h3 class="title">Custom Color</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n\t<input type=\'text\' class="color-chooser pull-right" />\n</div>\n<div class="modal-footer">\n\t<a href="#" class="btn btn-primary ok btn-inverse">Ok</a>\n</div>'},useData:!0}),this.JST["strut.themes/SurfaceChooserDropdown"]=t.template({1:function(t,e,n,i,r){return""},3:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'\t\t\t<li><a class="'+c(typeof(s=null!=(s=n.klass||(null!=e?e.klass:e))?s:a)===l?s.call(o,{name:"klass",hash:{},data:r}):s)+' thumbnail" alt="'+c(typeof(s=null!=(s=n.description||(null!=e?e.description:e))?s:a)===l?s.call(o,{name:"description",hash:{},data:r}):s)+'" data-class="'+c(typeof(s=null!=(s=n.klass||(null!=e?e.klass:e))?s:a)===l?s.call(o,{name:"klass",hash:{},data:r}):s)+'"></a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u="function",h=n.blockHelperMissing,d='<a class="btn btn-plast dropdown-toggle" data-toggle="dropdown">\n\t<i class="icon-tint icon-white"></i>\n\t'+(null!=(s=(n.lang||e&&e.lang||c).call(l,null!=e?e.title:e,{name:"lang",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'</a>\n<ul class="dropdown-menu" role="menu">\n\t<li class="dropdown-submenu">\n\t\t<a tabindex="-1" href="#">All Slides</a>\n\t\t<ul class="dropdown-menu horizontalDropdown allSlides" style="min-width: 127px; width: 127px">\n';return o=null!=(o=n.backgrounds||(null!=e?e.backgrounds:e))?o:c,a={name:"backgrounds",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.backgrounds||(s=h.call(e,s,a)),null!=s&&(d+=s),d+='\t\t\t<li><a class="nobg thumbnail" data-class="bg-default"></a></li>\n\t\t\t<li><a class="bg-img thumbnail" data-class="bg-img"><i class="icon-picture"></i></a></li>\n\t\t\t<li><a class="bg-custom thumbnail" data-class="bg-custom"><i class="icon-pencil"></i></a></li>\n\t\t</ul>\n\t</li>\n\t<li class="dropdown-submenu">\n\t\t<a tabindex="-1" href="#">Selected Slide</a>\n\t\t<ul class="dropdown-menu horizontalDropdown" style="min-width: 127px; width: 127px">\n',o=null!=(o=n.backgrounds||(null!=e?e.backgrounds:e))?o:c,a={name:"backgrounds",hash:{},fn:t.program(3,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.backgrounds||(s=h.call(e,s,a)),null!=s&&(d+=s),d+'\t\t\t<li><a class="nobg thumbnail" data-class="bg-default"></a></li>\n\t\t\t<li><a class="bg-img thumbnail" data-class="bg-img"><i class="icon-picture"></i></a></li>\n\t\t\t<li><a class="bg-custom thumbnail" data-class="bg-custom"><i class="icon-pencil"></i></a></li>\n\t\t</ul>\n\t</li>\n</ul>\n'},useData:!0}),this.JST["strut.transition_editor/Button"]=t.template({1:function(t,e,n,i,r){return""},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return'<div class="btn-group iconBtns">\n\t<a class="btn btn-plast">\n\t\t<i class="icon-th-large icon-white"></i>\n\t\t'+(null!=(s=(n.lang||e&&e.lang||n.helperMissing).call(null!=e?e:t.nullContext||{},"overview",{name:"lang",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+"\n\t</a>\n</div>"},useData:!0}),this.JST["strut.transition_editor/CannedTransitions"]=t.template({1:function(t,e,n,i,r){var s,o,a=null!=e?e:t.nullContext||{},l=n.helperMissing,c="function",u=t.escapeExpression;return'\t<li class="span4">\n\t\t<a href="#" data-name="'+u(typeof(o=null!=(o=n.name||(null!=e?e.name:e))?o:l)===c?o.call(a,{name:"name",hash:{},data:r}):o)+'" class="thumbnail'+(null!=(s=n.if.call(a,null!=e?e.active:e,{name:"if",hash:{},fn:t.program(2,r,0),inverse:t.noop,data:r}))?s:"")+'">\n\t\t\t<img src="'+u(typeof(o=null!=(o=n.img||(null!=e?e.img:e))?o:l)===c?o.call(a,{name:"img",hash:{},data:r}):o)+'" style="'+u(typeof(o=null!=(o=n.style||(null!=e?e.style:e))?o:l)===c?o.call(a,{name:"style",hash:{},data:r}):o)+'"></img>\n\t\t</a>\n\t</li>\n'},2:function(t,e,n,i,r){return" active"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return'<ul class="thumbnails">\n'+(null!=(s=n.blockHelperMissing.call(e,t.lambda(e,e),{name:".",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'</ul>\n<span class="bespoke-link">\n\t<a href="https://github.com/markdalgleish/bespoke.js" target="_blank">Bespoke.js</a>\n</span>'},useData:!0}),this.JST["tantaman.web.widgets/CodeEditor"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'<div class="modal-header">\n\t<button class="close" data-dismiss="modal"></button>\n\t<h3>'+c(typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:a)===l?s.call(o,{name:"title",hash:{},data:r}):s)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n\t<textarea class="codeInput">'+c(typeof(s=null!=(s=n.placeholder||(null!=e?e.placeholder:e))?s:a)===l?s.call(o,{name:"placeholder",hash:{},data:r}):s)+'</textarea>\n</div>\n<div class="modal-footer">\n\t<a href="#" class="btn btn-primary ok btn-inverse">Save</a>\n\t<a href="#" class="btn btn-danger cancel">Cancel</a>\n</div>'},useData:!0}),this.JST["tantaman.web.widgets/FileBrowser"]=t.template({1:function(t,e,n,i,r){var s=t.lambda,o=t.escapeExpression;return'\t<li data-fileName="'+o(s(e,e))+'"><a>'+o(s(e,e))+' <button class="close pull-right"></button></a></li>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l='<input type="text" class="fileName"></input>\n<ul class="nav nav-pills nav-stacked">\n';return o=null!=(o=n.files||(null!=e?e.files:e))?o:n.helperMissing,a={name:"files",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},s="function"==typeof o?o.call(null!=e?e:t.nullContext||{},a):o,n.files||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(l+=s),l+"</ul>"},useData:!0}),this.JST["tantaman.web.widgets/ItemImportModal"]=t.template({1:function(t,e,n,i,r){return'<div data-option="browse" class="btn">Browse</div>\n\t<p><em>*Local images are currently uploaded to imgur.<br/>We\'re working on changing this.</em></p>'},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o,a,l=null!=e?e:t.nullContext||{},c=n.helperMissing,u="function",h=t.escapeExpression,d='<div class="modal-header">\n\t<button class="close" data-dismiss="modal"></button>\n\t<h3>'+h(typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:c)===u?o.call(l,{name:"title",hash:{},data:r}):o)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n\t<div class="alert alert-error dispNone">\n  \t\t<button class="close" data-dismiss="alert"></button>\n  \t\tThe image URL you entered appears to be incorrect\n\t</div>\n\t<h4>URL:</h4><div class="form-inline"><input type="text" name="itemUrl"></input>&nbsp;';return o=null!=(o=n.browsable||(null!=e?e.browsable:e))?o:c,a={name:"browsable",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r},s=typeof o===u?o.call(l,a):o,n.browsable||(s=n.blockHelperMissing.call(e,s,a)),null!=s&&(d+=s),d+'</div>\n\t<input type="file" style="display:none"></input>\n\t<h4>Preview:</h4>\n\t<ul class="thumbnails">\n\t\t<li class="span4">\n\t\t\t<div class="thumbnail">\n\t\t\t\t<'+h(typeof(o=null!=(o=n.tag||(null!=e?e.tag:e))?o:c)===u?o.call(l,{name:"tag",hash:{},data:r}):o)+' class="preview" width="360" height"268"></'+h(typeof(o=null!=(o=n.tag||(null!=e?e.tag:e))?o:c)===u?o.call(l,{name:"tag",hash:{},data:r}):o)+'>\n\t\t\t</div>\n\t\t\t<div class="progress active progress-striped dispNone">\n  \t\t\t\t<div class="bar"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>\n<div class="modal-footer">\n\t<a href="#" class="btn btn-primary ok btn-inverse">'+h(typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:c)===u?o.call(l,{name:"title",hash:{},data:r}):o)+"</a>\n</div>"},useData:!0}),this.JST["tantaman.web.widgets/PopoverTextbox"]=t.template({compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s;return t.escapeExpression("function"==typeof(s=null!=(s=n.title||(null!=e?e.title:e))?s:n.helperMissing)?s.call(null!=e?e:t.nullContext||{},{name:"title",hash:{},data:r}):s)+' <input type="textbox" placeholder="custom1 custom2"></input>\n<div>\n<a class="btn btn-plast ok">Ok</a>\n<a class="btn btn-danger cancel">Cancel</a>\n</div>'},useData:!0}),this.JST["tantaman.web.widgets/TabbedModal"]=t.template({1:function(t,e,n,i,r){var s,o=null!=e?e:t.nullContext||{},a=n.helperMissing,l="function",c=t.escapeExpression;return'\t\t\t<li class="providerTab" data-provider="'+c(typeof(s=null!=(s=n.id||(null!=e?e.id:e))?s:a)===l?s.call(o,{name:"id",hash:{},data:r}):s)+'"><a>'+c(typeof(s=null!=(s=n.name||(null!=e?e.name:e))?s:a)===l?s.call(o,{name:"name",hash:{},data:r}):s)+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(t,e,n,i,r){var s,o;return'<div class="modal-header">\n\t<button class="close" data-dismiss="modal"></button>\n\t<h3 class="title">'+t.escapeExpression("function"==typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:n.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"title",hash:{},data:r}):o)+'</h3>\n</div>\n<div class="modal-body" style="overflow: hidden">\n\t<ul class="nav nav-tabs">\n'+(null!=(s=n.blockHelperMissing.call(e,t.lambda(e,e),{name:".",hash:{},fn:t.program(1,r,0),inverse:t.noop,data:r}))?s:"")+'\t</ul>\n\t<div class="tabContent">\n\t</div>\n</div>\n<div class="modal-footer">\n\t<a href="#!" class="btn btn-primary ok btn-inverse">Ok</a>\n</div>'},useData:!0}),this.JST}),function(f,k){var n,e,v=typeof k,t=f.location,m=f.document,i=m.documentElement,r=f.jQuery,s=f.$,o={},a=[],l="2.0.3",g=a.concat,c=a.push,u=a.slice,h=a.indexOf,d=o.toString,b=o.hasOwnProperty,p=l.trim,wt=function(t,e){return new wt.fn.init(t,e,n)},y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,C=/\S+/g,w=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/^-ms-/,S=/-([\da-z])/gi,M=function(t,e){return e.toUpperCase()},T=function(){m.removeEventListener("DOMContentLoaded",T,!1),f.removeEventListener("load",T,!1),wt.ready()};function $(t){var e=t.length,n=wt.type(t);return!wt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||"function"!==n&&(0===e||"number"==typeof e&&0<e&&e-1 in t)))}wt.fn=wt.prototype={jquery:l,constructor:wt,init:function(t,e,n){var i,r;if(!t)return this;if("string"==typeof t){if(!(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:w.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof wt?e[0]:e,wt.merge(this,wt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:m,!0)),x.test(i[1])&&wt.isPlainObject(e))for(i in e)wt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=m.getElementById(i[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=m,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):wt.isFunction(t)?n.ready(t):(t.selector!==k&&(this.selector=t.selector,this.context=t.context),wt.makeArray(t,this))},selector:"",length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?this.toArray():t<0?this[this.length+t]:this[t]},pushStack:function(t){var e=wt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return wt.each(this,t,e)},ready:function(t){return wt.ready.promise().done(t),this},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},map:function(n){return this.pushStack(wt.map(this,function(t,e){return n.call(t,e,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:c,sort:[].sort,splice:[].splice},wt.fn.init.prototype=wt.fn,wt.extend=wt.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},a=2),"object"==typeof o||wt.isFunction(o)||(o={}),l===a&&(o=this,--a);a<l;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],o!==(i=t[e])&&(c&&i&&(wt.isPlainObject(i)||(r=wt.isArray(i)))?(r?(r=!1,s=n&&wt.isArray(n)?n:[]):s=n&&wt.isPlainObject(n)?n:{},o[e]=wt.extend(c,s,i)):i!==k&&(o[e]=i));return o},wt.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),noConflict:function(t){return f.$===wt&&(f.$=s),t&&f.jQuery===wt&&(f.jQuery=r),wt},isReady:!1,readyWait:1,holdReady:function(t){t?wt.readyWait++:wt.ready(!0)},ready:function(t){(!0===t?--wt.readyWait:wt.isReady)||(wt.isReady=!0)!==t&&0<--wt.readyWait||(e.resolveWith(m,[wt]),wt.fn.trigger&&wt(m).trigger("ready").off("ready"))},isFunction:function(t){return"function"===wt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?o[d.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==wt.type(t)||t.nodeType||wt.isWindow(t))return!1;try{if(t.constructor&&!b.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||m;var i=x.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=wt.buildFragment([t],e,r),r&&wt(r).remove(),wt.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=k}return e&&!e.getElementsByTagName("parsererror").length||wt.error("Invalid XML: "+t),e},noop:function(){},globalEval:function(t){var e,n=eval;(t=wt.trim(t))&&(1===t.indexOf("use strict")?((e=m.createElement("script")).text=t,m.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(_,"ms-").replace(S,M)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var i=0,r=t.length,s=$(t);if(n){if(s)for(;i<r&&!1!==e.apply(t[i],n);i++);else for(i in t)if(!1===e.apply(t[i],n))break}else if(s)for(;i<r&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":p.call(t)},makeArray:function(t,e){var n=e||[];return null!=t&&($(Object(t))?wt.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){var n=e.length,i=t.length,r=0;if("number"==typeof n)for(;r<n;r++)t[i++]=e[r];else for(;e[r]!==k;)t[i++]=e[r++];return t.length=i,t},grep:function(t,e,n){var i=[],r=0,s=t.length;for(n=!!n;r<s;r++)n!==!!e(t[r],r)&&i.push(t[r]);return i},map:function(t,e,n){var i,r=0,s=t.length,o=[];if($(t))for(;r<s;r++)null!=(i=e(t[r],r,n))&&(o[o.length]=i);else for(r in t)null!=(i=e(t[r],r,n))&&(o[o.length]=i);return g.apply([],o)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),wt.isFunction(t)?(i=u.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(u.call(arguments)))}).guid=t.guid=t.guid||wt.guid++,r):k},access:function(t,e,n,i,r,s,o){var a=0,l=t.length,c=null==n;if("object"===wt.type(n))for(a in r=!0,n)wt.access(t,e,a,n[a],!0,s,o);else if(i!==k&&(r=!0,wt.isFunction(i)||(o=!0),c&&(o?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(wt(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:c?e.call(t):l?e(t[0],n):s},now:Date.now,swap:function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in r=n.apply(t,i||[]),e)t.style[s]=o[s];return r}}),wt.ready.promise=function(t){return e||(e=wt.Deferred(),"complete"===m.readyState?setTimeout(wt.ready):(m.addEventListener("DOMContentLoaded",T,!1),f.addEventListener("load",T,!1))),e.promise(t)},wt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){o["[object "+e+"]"]=e.toLowerCase()}),n=wt(m),function(n,r){var t,f,x,_,s,i,m,k,c,g,C,o,v,b,a,u,y,S="sizzle"+-new Date,w=n.document,M=0,h=0,l=rt(),d=rt(),p=rt(),T=!1,$=function(t,e){return t===e&&(T=!0),0},P=typeof r,E={}.hasOwnProperty,e=[],L=e.pop,I=e.push,A=e.push,D=e.slice,N=e.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z=H.replace("w","w#"),j="\\["+B+"*("+H+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+z+")|)|)"+B+"*\\]",R=":("+H+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+j.replace(3,8)+")*)|.*)\\)|)",F=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),W=new RegExp("^"+B+"*,"+B+"*"),V=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),q=new RegExp(B+"*[+~]"),U=new RegExp("="+B+"*([^\\]'\"]*)"+B+"*\\]","g"),G=new RegExp(R),X=new RegExp("^"+z+"$"),Y={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H.replace("w","w*")+")"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),nt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{A.apply(e=D.call(w.childNodes),w.childNodes),e[w.childNodes.length].nodeType}catch(t){A={apply:e.length?function(t,e){I.apply(t,D.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function it(t,e,n,i){var r,s,o,a,l,c,u,h,d,p;if((e?e.ownerDocument||e:w)!==C&&g(e),n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=(e=e||C).nodeType)&&9!==a)return[];if(v&&!i){if(r=J.exec(t))if(o=r[1]){if(9===a){if(!(s=e.getElementById(o))||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&y(e,s)&&s.id===o)return n.push(s),n}else{if(r[2])return A.apply(n,e.getElementsByTagName(t)),n;if((o=r[3])&&f.getElementsByClassName&&e.getElementsByClassName)return A.apply(n,e.getElementsByClassName(o)),n}if(f.qsa&&(!b||!b.test(t))){if(h=u=S,d=e,p=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=pt(t),(u=e.getAttribute("id"))?h=u.replace(tt,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+ft(c[l]);d=q.test(t)&&e.parentNode||e,p=c.join(",")}if(p)try{return A.apply(n,d.querySelectorAll(p)),n}catch(t){}finally{u||e.removeAttribute("id")}}}return function(t,e,n,i){var r,s,o,a,l,c=pt(t);if(!i&&1===c.length){if(2<(s=c[0]=c[0].slice(0)).length&&"ID"===(o=s[0]).type&&f.getById&&9===e.nodeType&&v&&_.relative[s[1].type]){if(!(e=(_.find.ID(o.matches[0].replace(et,nt),e)||[])[0]))return n;t=t.slice(s.shift().value.length)}for(r=Y.needsContext.test(t)?0:s.length;r--&&(o=s[r],!_.relative[a=o.type]);)if((l=_.find[a])&&(i=l(o.matches[0].replace(et,nt),q.test(s[0].type)&&e.parentNode||e))){if(s.splice(r,1),!(t=i.length&&ft(s)))return A.apply(n,i),n;break}}return m(t,c)(i,e,!v,n,q.test(t)),n}(t.replace(F,"$1"),e,n,i)}function rt(){var i=[];return function t(e,n){return i.push(e+=" ")>_.cacheLength&&delete t[i.shift()],t[e]=n}}function st(t){return t[S]=!0,t}function ot(t){var e=C.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function at(t,e){for(var n=t.split("|"),i=t.length;i--;)_.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ct(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ut(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function ht(o){return st(function(s){return s=+s,st(function(t,e){for(var n,i=o([],t.length,s),r=i.length;r--;)t[n=i[r]]&&(t[n]=!(e[n]=t[n]))})})}for(t in i=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=it.support={},g=it.setDocument=function(t){var l=t?t.ownerDocument||t:w,e=l.defaultView;return l!==C&&9===l.nodeType&&l.documentElement?(o=(C=l).documentElement,v=!i(l),e&&e.attachEvent&&e!==e.top&&e.attachEvent("onbeforeunload",function(){g()}),f.attributes=ot(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=ot(function(t){return t.appendChild(l.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=ot(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),f.getById=ot(function(t){return o.appendChild(t).id=S,!l.getElementsByName||!l.getElementsByName(S).length}),f.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==P&&v){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var n=t.replace(et,nt);return function(t){var e=typeof t.getAttributeNode!==P&&t.getAttributeNode("id");return e&&e.value===n}}),_.find.TAG=f.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==P)return e.getElementsByTagName(t)}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},_.find.CLASS=f.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==P&&v)return e.getElementsByClassName(t)},a=[],b=[],(f.qsa=K.test(l.querySelectorAll))&&(ot(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||b.push("\\["+B+"*(?:value|"+O+")"),t.querySelectorAll(":checked").length||b.push(":checked")}),ot(function(t){var e=l.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&b.push("[*^$]="+B+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||b.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),b.push(",.*:")})),(f.matchesSelector=K.test(u=o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ot(function(t){f.disconnectedMatch=u.call(t,"div"),u.call(t,"[s!='']:x"),a.push("!=",R)}),b=b.length&&new RegExp(b.join("|")),a=a.length&&new RegExp(a.join("|")),y=K.test(o.contains)||o.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},$=o.compareDocumentPosition?function(t,e){if(t===e)return T=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!f.sortDetached&&e.compareDocumentPosition(t)===n?t===l||y(w,t)?-1:e===l||y(w,e)?1:c?N.call(c,t)-N.call(c,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(t===e)return T=!0,0;if(!r||!s)return t===l?-1:e===l?1:r?-1:s?1:c?N.call(c,t)-N.call(c,e):0;if(r===s)return lt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?lt(o[i],a[i]):o[i]===w?-1:a[i]===w?1:0},l):C},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==C&&g(t),e=e.replace(U,"='$1']"),f.matchesSelector&&v&&(!a||!a.test(e))&&(!b||!b.test(e)))try{var n=u.call(t,e);if(n||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return 0<it(e,C,null,[t]).length},it.contains=function(t,e){return(t.ownerDocument||t)!==C&&g(t),y(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==C&&g(t);var n=_.attrHandle[e.toLowerCase()],i=n&&E.call(_.attrHandle,e.toLowerCase())?n(t,e,!v):r;return i===r?f.attributes||!v?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null:i},it.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,n=[],i=0,r=0;if(T=!f.detectDuplicates,c=!f.sortStable&&t.slice(0),t.sort($),T){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return t},s=it.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=s(e);return n},(_=it.selectors={cacheLength:50,createPseudo:st,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]&&t[4]!==r?t[2]=t[4]:n&&G.test(n)&&(e=pt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=l[t+" "];return e||(e=new RegExp("(^|"+B+")"+t+"("+B+"|$)"))&&l(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==P&&t.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(t){var e=it.attr(t,n);return null==e?"!="===i:!i||(e+="","="===i?e===r:"!="===i?e!==r:"^="===i?r&&0===e.indexOf(r):"*="===i?r&&-1<e.indexOf(r):"$="===i?r&&e.slice(-r.length)===r:"~="===i?-1<(" "+e+" ").indexOf(r):"|="===i&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,t,e,f,m){var g="nth"!==p.slice(0,3),v="last"!==p.slice(-4),b="of-type"===t;return 1===f&&0===m?function(t){return!!t.parentNode}:function(t,e,n){var i,r,s,o,a,l,c=g!==v?"nextSibling":"previousSibling",u=t.parentNode,h=b&&t.nodeName.toLowerCase(),d=!n&&!b;if(u){if(g){for(;c;){for(s=t;s=s[c];)if(b?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&d){for(a=(i=(r=u[S]||(u[S]={}))[p]||[])[0]===M&&i[1],o=i[0]===M&&i[2],s=a&&u.childNodes[a];s=++a&&s&&s[c]||(o=a=0)||l.pop();)if(1===s.nodeType&&++o&&s===t){r[p]=[M,a,o];break}}else if(d&&(i=(t[S]||(t[S]={}))[p])&&i[0]===M)o=i[1];else for(;(s=++a&&s&&s[c]||(o=a=0)||l.pop())&&((b?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++o||(d&&((s[S]||(s[S]={}))[p]=[M,o]),s!==t)););return(o-=m)===f||o%f==0&&0<=o/f}}},PSEUDO:function(t,s){var e,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return o[S]?o(s):1<o.length?(e=[t,t,"",s],_.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var n,i=o(t,s),r=i.length;r--;)t[n=N.call(t,i[r])]=!(e[n]=i[r])}):function(t){return o(t,0,e)}):o}},pseudos:{not:st(function(t){var i=[],r=[],a=m(t.replace(F,"$1"));return a[S]?st(function(t,e,n,i){for(var r,s=a(t,null,i,[]),o=t.length;o--;)(r=s[o])&&(t[o]=!(e[o]=r))}):function(t,e,n){return i[0]=t,a(i,null,n,r),!r.pop()}}),has:st(function(e){return function(t){return 0<it(e,t).length}}),contains:st(function(e){return function(t){return-1<(t.textContent||t.innerText||s(t)).indexOf(e)}}),lang:st(function(n){return X.test(n||"")||it.error("unsupported lang: "+n),n=n.replace(et,nt).toLowerCase(),function(t){var e;do{if(e=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if("@"<t.nodeName||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:ht(function(){return[0]}),last:ht(function(t,e){return[e-1]}),eq:ht(function(t,e,n){return[n<0?n+e:n]}),even:ht(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:ht(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:ht(function(t,e,n){for(var i=n<0?n+e:n;0<=--i;)t.push(i);return t}),gt:ht(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[t]=ct(t);for(t in{submit:!0,reset:!0})_.pseudos[t]=ut(t);function dt(){}function pt(t,e){var n,i,r,s,o,a,l,c=d[t+" "];if(c)return e?0:c.slice(0);for(o=t,a=[],l=_.preFilter;o;){for(s in n&&!(i=W.exec(o))||(i&&(o=o.slice(i[0].length)||o),a.push(r=[])),n=!1,(i=V.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace(F," ")}),o=o.slice(n.length)),_.filter)!(i=Y[s].exec(o))||l[s]&&!(i=l[s](i))||(n=i.shift(),r.push({value:n,type:s,matches:i}),o=o.slice(n.length));if(!n)break}return e?o.length:o?it.error(t):d(t,a).slice(0)}function ft(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function mt(a,t,e){var l=t.dir,c=e&&"parentNode"===l,u=h++;return t.first?function(t,e,n){for(;t=t[l];)if(1===t.nodeType||c)return a(t,e,n)}:function(t,e,n){var i,r,s,o=M+" "+u;if(n){for(;t=t[l];)if((1===t.nodeType||c)&&a(t,e,n))return!0}else for(;t=t[l];)if(1===t.nodeType||c)if((r=(s=t[S]||(t[S]={}))[l])&&r[0]===o){if(!0===(i=r[1])||i===x)return!0===i}else if((r=s[l]=[o])[1]=a(t,e,n)||x,!0===r[1])return!0}}function gt(r){return 1<r.length?function(t,e,n){for(var i=r.length;i--;)if(!r[i](t,e,n))return!1;return!0}:r[0]}function vt(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),c&&e.push(a)));return o}function bt(p,f,m,g,v,t){return g&&!g[S]&&(g=bt(g)),v&&!v[S]&&(v=bt(v,t)),st(function(t,e,n,i){var r,s,o,a=[],l=[],c=e.length,u=t||function(t,e,n){for(var i=0,r=e.length;i<r;i++)it(t,e[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),h=!p||!t&&f?u:vt(u,a,p,n,i),d=m?v||(t?p:c||g)?[]:e:h;if(m&&m(h,d,n,i),g)for(r=vt(d,l),g(r,[],n,i),s=r.length;s--;)(o=r[s])&&(d[l[s]]=!(h[l[s]]=o));if(t){if(v||p){if(v){for(r=[],s=d.length;s--;)(o=d[s])&&r.push(h[s]=o);v(null,d=[],r,i)}for(s=d.length;s--;)(o=d[s])&&-1<(r=v?N.call(t,o):a[s])&&(t[r]=!(e[r]=o))}}else d=vt(d===e?d.splice(c,d.length):d),v?v(null,e,d,i):A.apply(e,d)})}function yt(t){for(var i,e,n,r=t.length,s=_.relative[t[0].type],o=s||_.relative[" "],a=s?1:0,l=mt(function(t){return t===i},o,!0),c=mt(function(t){return-1<N.call(i,t)},o,!0),u=[function(t,e,n){return!s&&(n||e!==k)||((i=e).nodeType?l(t,e,n):c(t,e,n))}];a<r;a++)if(e=_.relative[t[a].type])u=[mt(gt(u),e)];else{if((e=_.filter[t[a].type].apply(null,t[a].matches))[S]){for(n=++a;n<r&&!_.relative[t[n].type];n++);return bt(1<a&&gt(u),1<a&&ft(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(F,"$1"),e,a<n&&yt(t.slice(a,n)),n<r&&yt(t=t.slice(n)),n<r&&ft(t))}u.push(e)}return gt(u)}dt.prototype=_.filters=_.pseudos,_.setFilters=new dt,m=it.compile=function(t,e){var n,g,v,b,y,w,i,r=[],s=[],o=p[t+" "];if(!o){for(e||(e=pt(t)),n=e.length;n--;)(o=yt(e[n]))[S]?r.push(o):s.push(o);o=p(t,(g=s,y=(b=0)<(v=r).length,w=0<g.length,i=function(t,e,n,i,r){var s,o,a,l=[],c=0,u="0",h=t&&[],d=null!=r,p=k,f=t||w&&_.find.TAG("*",r&&e.parentNode||e),m=M+=null==p?1:Math.random()||.1;for(d&&(k=e!==C&&e,x=b);null!=(s=f[u]);u++){if(w&&s){for(o=0;a=g[o++];)if(a(s,e,n)){i.push(s);break}d&&(M=m,x=++b)}y&&((s=!a&&s)&&c--,t&&h.push(s))}if(c+=u,y&&u!==c){for(o=0;a=v[o++];)a(h,l,e,n);if(t){if(0<c)for(;u--;)h[u]||l[u]||(l[u]=L.call(i));l=vt(l)}A.apply(i,l),d&&!t&&0<l.length&&1<c+v.length&&it.uniqueSort(i)}return d&&(M=m,k=p),h},y?st(i):i))}return o},f.sortStable=S.split("").sort($).join("")===S,f.detectDuplicates=T,g(),f.sortDetached=ot(function(t){return 1&t.compareDocumentPosition(C.createElement("div"))}),ot(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||at("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&ot(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||at("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ot(function(t){return null==t.getAttribute("disabled")})||at(O,function(t,e,n){var i;if(!n)return(i=t.getAttributeNode(e))&&i.specified?i.value:!0===t[e]?e.toLowerCase():null}),wt.find=it,wt.expr=it.selectors,wt.expr[":"]=wt.expr.pseudos,wt.unique=it.uniqueSort,wt.text=it.getText,wt.isXMLDoc=it.isXML,wt.contains=it.contains}(f);var P,E,L,I,A,D,N={};wt.Callbacks=function(r){var t,n;r="string"==typeof r?N[r]||(n=N[t=r]={},wt.each(t.match(C)||[],function(t,e){n[e]=!0}),n):wt.extend({},r);var e,i,s,o,a,l,c=[],u=!r.once&&[],h=function(t){for(e=r.memory&&t,i=!0,l=o||0,o=0,a=c.length,s=!0;c&&l<a;l++)if(!1===c[l].apply(t[0],t[1])&&r.stopOnFalse){e=!1;break}s=!1,c&&(u?u.length&&h(u.shift()):e?c=[]:d.disable())},d={add:function(){if(c){var t=c.length;!function i(t){wt.each(t,function(t,e){var n=wt.type(e);"function"===n?r.unique&&d.has(e)||c.push(e):e&&e.length&&"string"!==n&&i(e)})}(arguments),s?a=c.length:e&&(o=t,h(e))}return this},remove:function(){return c&&wt.each(arguments,function(t,e){for(var n;-1<(n=wt.inArray(e,c,n));)c.splice(n,1),s&&(n<=a&&a--,n<=l&&l--)}),this},has:function(t){return t?-1<wt.inArray(t,c):!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=e=k,this},disabled:function(){return!c},lock:function(){return u=k,e||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!c||i&&!u||(e=[t,(e=e||[]).slice?e.slice():e],s?u.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},wt.extend({Deferred:function(t){var o=[["resolve","done",wt.Callbacks("once memory"),"resolved"],["reject","fail",wt.Callbacks("once memory"),"rejected"],["notify","progress",wt.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return l.done(arguments).fail(arguments),this},then:function(){var s=arguments;return wt.Deferred(function(r){wt.each(o,function(t,e){var n=e[0],i=wt.isFunction(s[t])&&s[t];l[e[1]](function(){var t=i&&i.apply(this,arguments);t&&wt.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[n+"With"](this===a?r.promise():this,i?[t]:arguments)})}),s=null}).promise()},promise:function(t){return null!=t?wt.extend(t,a):a}},l={};return a.pipe=a.then,wt.each(o,function(t,e){var n=e[2],i=e[3];a[e[1]]=n.add,i&&n.add(function(){r=i},o[1^t][2].disable,o[2][2].lock),l[e[0]]=function(){return l[e[0]+"With"](this===l?a:this,arguments),this},l[e[0]+"With"]=n.fireWith}),a.promise(l),t&&t.call(l,l),l},when:function(t){var r,e,n,i=0,s=u.call(arguments),o=s.length,a=1!==o||t&&wt.isFunction(t.promise)?o:0,l=1===a?t:wt.Deferred(),c=function(e,n,i){return function(t){n[e]=this,i[e]=1<arguments.length?u.call(arguments):t,i===r?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(1<o)for(r=new Array(o),e=new Array(o),n=new Array(o);i<o;i++)s[i]&&wt.isFunction(s[i].promise)?s[i].promise().done(c(i,n,s)).fail(l.reject).progress(c(i,e,r)):--a;return a||l.resolveWith(n,s),l.promise()}}),wt.support=(P={},E=m.createElement("input"),L=m.createDocumentFragment(),I=m.createElement("div"),A=m.createElement("select"),D=A.appendChild(m.createElement("option")),E.type&&(E.type="checkbox",P.checkOn=""!==E.value,P.optSelected=D.selected,P.reliableMarginRight=!0,P.boxSizingReliable=!0,P.pixelPosition=!1,E.checked=!0,P.noCloneChecked=E.cloneNode(!0).checked,A.disabled=!0,P.optDisabled=!D.disabled,(E=m.createElement("input")).value="t",E.type="radio",P.radioValue="t"===E.value,E.setAttribute("checked","t"),E.setAttribute("name","t"),L.appendChild(E),P.checkClone=L.cloneNode(!0).cloneNode(!0).lastChild.checked,P.focusinBubbles="onfocusin"in f,I.style.backgroundClip="content-box",I.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===I.style.backgroundClip,wt(function(){var t,e,n=m.getElementsByTagName("body")[0];n&&((t=m.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",n.appendChild(t).appendChild(I),I.innerHTML="",I.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",wt.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){P.boxSizing=4===I.offsetWidth}),f.getComputedStyle&&(P.pixelPosition="1%"!==(f.getComputedStyle(I,null)||{}).top,P.boxSizingReliable="4px"===(f.getComputedStyle(I,null)||{width:"4px"}).width,(e=I.appendChild(m.createElement("div"))).style.cssText=I.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e.style.marginRight=e.style.width="0",I.style.width="1px",P.reliableMarginRight=!parseFloat((f.getComputedStyle(e,null)||{}).marginRight)),n.removeChild(t))})),P);var O,B,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,z=/([A-Z])/g;function j(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=wt.expando+Math.random()}function R(t,e,n){var i;if(n===k&&1===t.nodeType)if(i="data-"+e.replace(z,"-$1").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n)}catch(t){}O.set(t,e,n)}else n=k;return n}j.uid=1,j.accepts=function(t){return!t.nodeType||(1===t.nodeType||9===t.nodeType)},j.prototype={key:function(e){if(!j.accepts(e))return 0;var n={},i=e[this.expando];if(!i){i=j.uid++;try{n[this.expando]={value:i},Object.defineProperties(e,n)}catch(t){n[this.expando]=i,wt.extend(e,n)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,n){var i,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=n;else if(wt.isEmptyObject(s))wt.extend(this.cache[r],e);else for(i in e)s[i]=e[i];return s},get:function(t,e){var n=this.cache[this.key(t)];return e===k?n:n[e]},access:function(t,e,n){var i;return e===k||e&&"string"==typeof e&&n===k?(i=this.get(t,e))!==k?i:this.get(t,wt.camelCase(e)):(this.set(t,e,n),n!==k?n:e)},remove:function(t,e){var n,i,r,s=this.key(t),o=this.cache[s];if(e===k)this.cache[s]={};else{wt.isArray(e)?i=e.concat(e.map(wt.camelCase)):(r=wt.camelCase(e),i=e in o?[e,r]:(i=r)in o?[i]:i.match(C)||[]),n=i.length;for(;n--;)delete o[i[n]]}},hasData:function(t){return!wt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},O=new j,B=new j,wt.extend({acceptData:j.accepts,hasData:function(t){return O.hasData(t)||B.hasData(t)},data:function(t,e,n){return O.access(t,e,n)},removeData:function(t,e){O.remove(t,e)},_data:function(t,e,n){return B.access(t,e,n)},_removeData:function(t,e){B.remove(t,e)}}),wt.fn.extend({data:function(i,t){var e,n,r=this[0],s=0,o=null;if(i===k){if(this.length&&(o=O.get(r),1===r.nodeType&&!B.get(r,"hasDataAttrs"))){for(e=r.attributes;s<e.length;s++)0===(n=e[s].name).indexOf("data-")&&(n=wt.camelCase(n.slice(5)),R(r,n,o[n]));B.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof i?this.each(function(){O.set(this,i)}):wt.access(this,function(e){var t,n=wt.camelCase(i);if(r&&e===k)return(t=O.get(r,i))!==k?t:(t=O.get(r,n))!==k?t:(t=R(r,n,k))!==k?t:void 0;this.each(function(){var t=O.get(this,n);O.set(this,n,e),-1!==i.indexOf("-")&&t!==k&&O.set(this,i,e)})},null,t,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){O.remove(this,t)})}}),wt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=B.get(t,e),n&&(!i||wt.isArray(n)?i=B.access(t,e,wt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=wt.queue(t,e),i=n.length,r=n.shift(),s=wt._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){wt.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return B.get(t,n)||B.access(t,n,{empty:wt.Callbacks("once memory").add(function(){B.remove(t,[e+"queue",n])})})}}),wt.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?wt.queue(this[0],e):n===k?this:this.each(function(){var t=wt.queue(this,e,n);wt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&wt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){wt.dequeue(this,t)})},delay:function(i,t){return i=wt.fx&&wt.fx.speeds[i]||i,t=t||"fx",this.queue(t,function(t,e){var n=setTimeout(t,i);e.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=wt.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=k),t=t||"fx";o--;)(n=B.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var F,W=/[\t\r\n\f]/g,V=/\r/g,q=/^(?:input|select|textarea|button)$/i;wt.fn.extend({attr:function(t,e){return wt.access(this,wt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){wt.removeAttr(this,t)})},prop:function(t,e){return wt.access(this,wt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[wt.propFix[t]||t]})},addClass:function(e){var t,n,i,r,s,o=0,a=this.length,l="string"==typeof e&&e;if(wt.isFunction(e))return this.each(function(t){wt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(C)||[];o<a;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=wt.trim(i)}return this},removeClass:function(e){var t,n,i,r,s,o=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(wt.isFunction(e))return this.each(function(t){wt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(C)||[];o<a;o++)if(i=1===(n=this[o]).nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){for(s=0;r=t[s++];)for(;0<=i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");n.className=e?wt.trim(i):""}return this},toggleClass:function(r,e){var s=typeof r;return"boolean"==typeof e&&"string"===s?e?this.addClass(r):this.removeClass(r):wt.isFunction(r)?this.each(function(t){wt(this).toggleClass(r.call(this,t,this.className,e),e)}):this.each(function(){if("string"===s)for(var t,e=0,n=wt(this),i=r.match(C)||[];t=i[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else s!==v&&"boolean"!==s||(this.className&&B.set(this,"__className__",this.className),this.className=this.className||!1===r?"":B.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(W," ").indexOf(e))return!0;return!1},val:function(n){var i,t,r,e=this[0];return arguments.length?(r=wt.isFunction(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?n.call(this,t,wt(this).val()):n)?e="":"number"==typeof e?e+="":wt.isArray(e)&&(e=wt.map(e,function(t){return null==t?"":t+""})),(i=wt.valHooks[this.type]||wt.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,e,"value")!==k||(this.value=e))})):e?(i=wt.valHooks[e.type]||wt.valHooks[e.nodeName.toLowerCase()])&&"get"in i&&(t=i.get(e,"value"))!==k?t:"string"==typeof(t=e.value)?t.replace(V,""):null==t?"":t:void 0}}),wt.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||r<0,o=s?null:[],a=s?r+1:i.length,l=r<0?a:s?r:0;l<a;l++)if(((n=i[l]).selected||l===r)&&(wt.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!wt.nodeName(n.parentNode,"optgroup"))){if(e=wt(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=wt.makeArray(e),o=r.length;o--;)((i=r[o]).selected=0<=wt.inArray(wt(i).val(),s))&&(n=!0);return n||(t.selectedIndex=-1),s}}},attr:function(t,e,n){var i,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===v?wt.prop(t,e,n):(1===s&&wt.isXMLDoc(t)||(e=e.toLowerCase(),i=wt.attrHooks[e]||(wt.expr.match.bool.test(e)?F:void 0)),n===k?i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=wt.find.attr(t,e))?k:r:null!==n?i&&"set"in i&&(r=i.set(t,n,e))!==k?r:(t.setAttribute(e,n+""),n):void wt.removeAttr(t,e))},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(C);if(s&&1===t.nodeType)for(;n=s[r++];)i=wt.propFix[n]||n,wt.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!wt.support.radioValue&&"radio"===e&&wt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{for:"htmlFor",class:"className"},prop:function(t,e,n){var i,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return(1!==s||!wt.isXMLDoc(t))&&(e=wt.propFix[e]||e,r=wt.propHooks[e]),n!==k?r&&"set"in r&&(i=r.set(t,n,e))!==k?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||q.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),F={set:function(t,e,n){return!1===e?wt.removeAttr(t,n):t.setAttribute(n,n),n}},wt.each(wt.expr.match.bool.source.match(/\w+/g),function(t,e){var s=wt.expr.attrHandle[e]||wt.find.attr;wt.expr.attrHandle[e]=function(t,e,n){var i=wt.expr.attrHandle[e],r=n?k:(wt.expr.attrHandle[e]=k)!=s(t,e,n)?e.toLowerCase():null;return wt.expr.attrHandle[e]=i,r}}),wt.support.optSelected||(wt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),wt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){wt.propFix[this.toLowerCase()]=this}),wt.each(["radio","checkbox"],function(){wt.valHooks[this]={set:function(t,e){if(wt.isArray(e))return t.checked=0<=wt.inArray(wt(t).val(),e)}},wt.support.checkOn||(wt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var U=/^key/,G=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function K(){return!0}function J(){return!1}function Z(){try{return m.activeElement}catch(t){}}wt.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,c,u,h,d,p,f,m,g=B.get(t);if(g){for(n.handler&&(n=(s=n).handler,r=s.selector),n.guid||(n.guid=wt.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||((o=g.handle=function(t){return typeof wt===v||t&&wt.event.triggered===t.type?k:wt.event.dispatch.apply(o.elem,arguments)}).elem=t),c=(e=(e||"").match(C)||[""]).length;c--;)p=m=(a=Y.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(h=wt.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=wt.event.special[p]||{},u=wt.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&wt.expr.match.needsContext.test(r),namespace:f.join(".")},s),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,f,o)||t.addEventListener&&t.addEventListener(p,o,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),wt.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var s,o,a,l,c,u,h,d,p,f,m,g=B.hasData(t)&&B.get(t);if(g&&(l=g.events)){for(c=(e=(e||"").match(C)||[""]).length;c--;)if(p=m=(a=Y.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(h=wt.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,f,g.handle)||wt.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)wt.event.remove(t,p+e[c],n,i,!0);wt.isEmptyObject(l)&&(delete g.handle,B.remove(t,"events"))}},trigger:function(t,e,n,i){var r,s,o,a,l,c,u,h=[n||m],d=b.call(t,"type")?t.type:t,p=b.call(t,"namespace")?t.namespace.split("."):[];if(s=o=n=n||m,3!==n.nodeType&&8!==n.nodeType&&!X.test(d+wt.event.triggered)&&(0<=d.indexOf(".")&&(d=(p=d.split(".")).shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,(t=t[wt.expando]?t:new wt.Event(d,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=k,t.target||(t.target=n),e=null==e?[t]:wt.makeArray(e,[t]),u=wt.event.special[d]||{},i||!u.trigger||!1!==u.trigger.apply(n,e))){if(!i&&!u.noBubble&&!wt.isWindow(n)){for(a=u.delegateType||d,X.test(a+d)||(s=s.parentNode);s;s=s.parentNode)h.push(s),o=s;o===(n.ownerDocument||m)&&h.push(o.defaultView||o.parentWindow||f)}for(r=0;(s=h[r++])&&!t.isPropagationStopped();)t.type=1<r?a:u.bindType||d,(c=(B.get(s,"events")||{})[t.type]&&B.get(s,"handle"))&&c.apply(s,e),(c=l&&s[l])&&wt.acceptData(s)&&c.apply&&!1===c.apply(s,e)&&t.preventDefault();return t.type=d,i||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),e)||!wt.acceptData(n)||l&&wt.isFunction(n[d])&&!wt.isWindow(n)&&((o=n[l])&&(n[l]=null),n[wt.event.triggered=d](),wt.event.triggered=k,o&&(n[l]=o)),t.result}},dispatch:function(t){t=wt.event.fix(t);var e,n,i,r,s,o,a=u.call(arguments),l=(B.get(this,"events")||{})[t.type]||[],c=wt.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){for(o=wt.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(s.namespace)||(t.handleObj=s,t.data=s.data,(i=((wt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))!==k&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(i=[],n=0;n<a;n++)i[r=(s=e[n]).selector+" "]===k&&(i[r]=s.needsContext?0<=wt(r,this).index(l):wt.find(r,this,null,[l]).length),i[r]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(i=(n=t.target.ownerDocument||m).documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||s===k||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[wt.expando])return t;var e,n,i,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=G.test(r)?this.mouseHooks:U.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new wt.Event(s),e=i.length;e--;)t[n=i[e]]=s[n];return t.target||(t.target=m),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Z()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Z()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&wt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return wt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==k&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=wt.extend(new wt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?wt.event.trigger(r,null,e):wt.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},wt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},wt.Event=function(t,e){if(!(this instanceof wt.Event))return new wt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?K:J):this.type=t,e&&wt.extend(this,e),this.timeStamp=t&&t.timeStamp||wt.now(),this[wt.expando]=!0},wt.Event.prototype={isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=K,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=K,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()}},wt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,r){wt.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,n=t.relatedTarget,i=t.handleObj;return n&&(n===this||wt.contains(this,n))||(t.type=i.origType,e=i.handler.apply(this,arguments),t.type=r),e}}}),wt.support.focusinBubbles||wt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){wt.event.simulate(e,t.target,wt.event.fix(t),!0)};wt.event.special[e]={setup:function(){0==n++&&m.addEventListener(t,i,!0)},teardown:function(){0==--n&&m.removeEventListener(t,i,!0)}}}),wt.fn.extend({on:function(t,e,n,i,r){var s,o;if("object"==typeof t){for(o in"string"!=typeof e&&(n=n||e,e=k),t)this.on(o,e,n,t[o],r);return this}if(null==n&&null==i?(i=e,n=e=k):null==i&&("string"==typeof e?(i=n,n=k):(i=n,n=e,e=k)),!1===i)i=J;else if(!i)return this;return 1===r&&(s=i,(i=function(t){return wt().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=wt.guid++)),this.each(function(){wt.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,wt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=k),!1===n&&(n=J),this.each(function(){wt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){wt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return wt.event.trigger(t,e,n,!0)}});var Q=/^.[^:#\[\.,]*$/,tt=/^(?:parents|prev(?:Until|All))/,et=wt.expr.match.needsContext,nt={children:!0,contents:!0,next:!0,prev:!0};function it(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function rt(t,n,i){if(wt.isFunction(n))return wt.grep(t,function(t,e){return!!n.call(t,e,t)!==i});if(n.nodeType)return wt.grep(t,function(t){return t===n!==i});if("string"==typeof n){if(Q.test(n))return wt.filter(n,t,i);n=wt.filter(n,t)}return wt.grep(t,function(t){return 0<=h.call(n,t)!==i})}wt.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(wt(t).filter(function(){for(e=0;e<r;e++)if(wt.contains(i[e],this))return!0}));for(e=0;e<r;e++)wt.find(t,i[e],n);return(n=this.pushStack(1<r?wt.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=wt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(wt.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(rt(this,t||[],!0))},filter:function(t){return this.pushStack(rt(this,t||[],!1))},is:function(t){return!!rt(this,"string"==typeof t&&et.test(t)?wt(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,r=this.length,s=[],o=et.test(t)||"string"!=typeof t?wt(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&wt.find.matchesSelector(n,t))){n=s.push(n);break}return this.pushStack(1<s.length?wt.unique(s):s)},index:function(t){return t?"string"==typeof t?h.call(wt(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?wt(t,e):wt.makeArray(t&&t.nodeType?[t]:t),i=wt.merge(this.get(),n);return this.pushStack(wt.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),wt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return wt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return wt.dir(t,"parentNode",n)},next:function(t){return it(t,"nextSibling")},prev:function(t){return it(t,"previousSibling")},nextAll:function(t){return wt.dir(t,"nextSibling")},prevAll:function(t){return wt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return wt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return wt.dir(t,"previousSibling",n)},siblings:function(t){return wt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return wt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||wt.merge([],t.childNodes)}},function(i,r){wt.fn[i]=function(t,e){var n=wt.map(this,r,t);return"Until"!==i.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=wt.filter(e,n)),1<this.length&&(nt[i]||wt.unique(n),tt.test(i)&&n.reverse()),this.pushStack(n)}}),wt.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?wt.find.matchesSelector(i,t)?[i]:[]:wt.find.matches(t,wt.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,e,n){for(var i=[],r=n!==k;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&wt(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ot=/<([\w:]+)/,at=/<|&#?\w+;/,lt=/<(?:script|style|link)/i,ct=/^(?:checkbox|radio)$/i,ut=/checked\s*(?:[^=]|=\s*.checked.)/i,ht=/^$|\/(?:java|ecma)script/i,dt=/^true\/(.*)/,pt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function mt(t,e){return wt.nodeName(t,"table")&&wt.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function gt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function vt(t){var e=dt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function bt(t,e){for(var n=t.length,i=0;i<n;i++)B.set(t[i],"globalEval",!e||B.get(e[i],"globalEval"))}function yt(t,e){var n,i,r,s,o,a,l,c;if(1===e.nodeType){if(B.hasData(t)&&(s=B.access(t),o=B.set(e,s),c=s.events))for(r in delete o.handle,o.events={},c)for(n=0,i=c[r].length;n<i;n++)wt.event.add(e,r,c[r][n]);O.hasData(t)&&(a=O.access(t),l=wt.extend({},a),O.set(e,l))}}function xt(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return e===k||e&&wt.nodeName(t,e)?wt.merge([t],n):n}function _t(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ct.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,wt.fn.extend({text:function(t){return wt.access(this,function(t){return t===k?wt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||m).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||mt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?wt.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||wt.cleanData(xt(n)),n.parentNode&&(e&&wt.contains(n.ownerDocument,n)&&bt(xt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(wt.cleanData(xt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return wt.clone(this,t,e)})},html:function(t){return wt.access(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===k&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!lt.test(t)&&!ft[(ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(st,"<$1></$2>");try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(wt.cleanData(xt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var i=wt.map(this,function(t){return[t.nextSibling,t.parentNode]}),r=0;return this.domManip(arguments,function(t){var e=i[r++],n=i[r++];n&&(e&&e.parentNode!==n&&(e=this.nextSibling),wt(this).remove(),n.insertBefore(t,e))},!0),r?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(n,i,r){n=g.apply([],n);var t,e,s,o,a,l,c=0,u=this.length,h=this,d=u-1,p=n[0],f=wt.isFunction(p);if(f||!(u<=1||"string"!=typeof p||wt.support.checkClone)&&ut.test(p))return this.each(function(t){var e=h.eq(t);f&&(n[0]=p.call(this,t,e.html())),e.domManip(n,i,r)});if(u&&(e=(t=wt.buildFragment(n,this[0].ownerDocument,!1,!r&&this)).firstChild,1===t.childNodes.length&&(t=e),e)){for(o=(s=wt.map(xt(t,"script"),gt)).length;c<u;c++)a=t,c!==d&&(a=wt.clone(a,!0,!0),o&&wt.merge(s,xt(a,"script"))),i.call(this[c],a,c);if(o)for(l=s[s.length-1].ownerDocument,wt.map(s,vt),c=0;c<o;c++)a=s[c],ht.test(a.type||"")&&!B.access(a,"globalEval")&&wt.contains(l,a)&&(a.src?wt._evalUrl(a.src):wt.globalEval(a.textContent.replace(pt,"")))}return this}}),wt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){wt.fn[t]=function(t){for(var e,n=[],i=wt(t),r=i.length-1,s=0;s<=r;s++)e=s===r?this:this.clone(!0),wt(i[s])[o](e),c.apply(n,e.get());return this.pushStack(n)}}),wt.extend({clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),l=wt.contains(t.ownerDocument,t);if(!(wt.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||wt.isXMLDoc(t)))for(o=xt(a),i=0,r=(s=xt(t)).length;i<r;i++)_t(s[i],o[i]);if(e)if(n)for(s=s||xt(t),o=o||xt(a),i=0,r=s.length;i<r;i++)yt(s[i],o[i]);else yt(t,a);return 0<(o=xt(a,"script")).length&&bt(o,!l&&xt(t,"script")),a},buildFragment:function(t,e,n,i){for(var r,s,o,a,l,c,u=0,h=t.length,d=e.createDocumentFragment(),p=[];u<h;u++)if((r=t[u])||0===r)if("object"===wt.type(r))wt.merge(p,r.nodeType?[r]:r);else if(at.test(r)){for(s=s||d.appendChild(e.createElement("div")),o=(ot.exec(r)||["",""])[1].toLowerCase(),a=ft[o]||ft._default,s.innerHTML=a[1]+r.replace(st,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;wt.merge(p,s.childNodes),(s=d.firstChild).textContent=""}else p.push(e.createTextNode(r));for(d.textContent="",u=0;r=p[u++];)if((!i||-1===wt.inArray(r,i))&&(l=wt.contains(r.ownerDocument,r),s=xt(d.appendChild(r),"script"),l&&bt(s),n))for(c=0;r=s[c++];)ht.test(r.type||"")&&n.push(r);return d},cleanData:function(t){for(var e,n,i,r,s,o,a=wt.event.special,l=0;(n=t[l])!==k;l++){if(j.accepts(n)&&(s=n[B.expando])&&(e=B.cache[s])){if((i=Object.keys(e.events||{})).length)for(o=0;(r=i[o])!==k;o++)a[r]?wt.event.remove(n,r):wt.removeEvent(n,r,e.handle);B.cache[s]&&delete B.cache[s]}delete O.cache[n[O.expando]]}},_evalUrl:function(t){return wt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),wt.fn.extend({wrapAll:function(e){var t;return wt.isFunction(e)?this.each(function(t){wt(this).wrapAll(e.call(this,t))}):(this[0]&&(t=wt(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(n){return wt.isFunction(n)?this.each(function(t){wt(this).wrapInner(n.call(this,t))}):this.each(function(){var t=wt(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=wt.isFunction(e);return this.each(function(t){wt(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){wt.nodeName(this,"body")||wt(this).replaceWith(this.childNodes)}).end()}});var kt,Ct,St=/^(none|table(?!-c[ea]).+)/,Mt=/^margin/,Tt=new RegExp("^("+y+")(.*)$","i"),$t=new RegExp("^("+y+")(?!px)[a-z%]+$","i"),Pt=new RegExp("^([+-])=("+y+")","i"),Et={BODY:"block"},Lt={position:"absolute",visibility:"hidden",display:"block"},It={letterSpacing:0,fontWeight:400},At=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];function Nt(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=Dt.length;r--;)if((e=Dt[r]+n)in t)return e;return i}function Ot(t,e){return t=e||t,"none"===wt.css(t,"display")||!wt.contains(t.ownerDocument,t)}function Bt(t){return f.getComputedStyle(t,null)}function Ht(t,e){for(var n,i,r,s=[],o=0,a=t.length;o<a;o++)(i=t[o]).style&&(s[o]=B.get(i,"olddisplay"),n=i.style.display,e?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Ot(i)&&(s[o]=B.access(i,"olddisplay",Ft(i.nodeName)))):s[o]||(r=Ot(i),(n&&"none"!==n||!r)&&B.set(i,"olddisplay",r?n:wt.css(i,"display"))));for(o=0;o<a;o++)(i=t[o]).style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function zt(t,e,n){var i=Tt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function jt(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,o=0;s<4;s+=2)"margin"===n&&(o+=wt.css(t,n+At[s],!0,r)),i?("content"===n&&(o-=wt.css(t,"padding"+At[s],!0,r)),"margin"!==n&&(o-=wt.css(t,"border"+At[s]+"Width",!0,r))):(o+=wt.css(t,"padding"+At[s],!0,r),"padding"!==n&&(o+=wt.css(t,"border"+At[s]+"Width",!0,r)));return o}function Rt(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=Bt(t),o=wt.support.boxSizing&&"border-box"===wt.css(t,"boxSizing",!1,s);if(r<=0||null==r){if(((r=kt(t,e,s))<0||null==r)&&(r=t.style[e]),$t.test(r))return r;i=o&&(wt.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+jt(t,e,n||(o?"border":"content"),i,s)+"px"}function Ft(t){var e=m,n=Et[t];return n||("none"!==(n=Wt(t,e))&&n||((e=((Ct=(Ct||wt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement))[0].contentWindow||Ct[0].contentDocument).document).write("<!doctype html><html><body>"),e.close(),n=Wt(t,e),Ct.detach()),Et[t]=n),n}function Wt(t,e){var n=wt(e.createElement(t)).appendTo(e.body),i=wt.css(n[0],"display");return n.remove(),i}wt.fn.extend({css:function(t,e){return wt.access(this,function(t,e,n){var i,r,s={},o=0;if(wt.isArray(e)){for(i=Bt(t),r=e.length;o<r;o++)s[e[o]]=wt.css(t,e[o],!1,i);return s}return n!==k?wt.style(t,e,n):wt.css(t,e)},t,e,1<arguments.length)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ot(this)?wt(this).show():wt(this).hide()})}}),wt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=kt(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=wt.camelCase(e),l=t.style;if(e=wt.cssProps[a]||(wt.cssProps[a]=Nt(l,a)),o=wt.cssHooks[e]||wt.cssHooks[a],n===k)return o&&"get"in o&&(r=o.get(t,!1,i))!==k?r:l[e];"string"===(s=typeof n)&&(r=Pt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(wt.css(t,e)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||wt.cssNumber[a]||(n+="px"),wt.support.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&(n=o.set(t,n,i))===k||(l[e]=n))}},css:function(t,e,n,i){var r,s,o,a=wt.camelCase(e);return e=wt.cssProps[a]||(wt.cssProps[a]=Nt(t.style,a)),(o=wt.cssHooks[e]||wt.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),r===k&&(r=kt(t,e,i)),"normal"===r&&e in It&&(r=It[e]),""===n||n?(s=parseFloat(r),!0===n||wt.isNumeric(s)?s||0:r):r}}),kt=function(t,e,n){var i,r,s,o=n||Bt(t),a=o?o.getPropertyValue(e)||o[e]:k,l=t.style;return o&&(""!==a||wt.contains(t.ownerDocument,t)||(a=wt.style(t,e)),$t.test(a)&&Mt.test(e)&&(i=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=o.width,l.width=i,l.minWidth=r,l.maxWidth=s)),a},wt.each(["height","width"],function(t,r){wt.cssHooks[r]={get:function(t,e,n){if(e)return 0===t.offsetWidth&&St.test(wt.css(t,"display"))?wt.swap(t,Lt,function(){return Rt(t,r,n)}):Rt(t,r,n)},set:function(t,e,n){var i=n&&Bt(t);return zt(0,e,n?jt(t,r,n,wt.support.boxSizing&&"border-box"===wt.css(t,"boxSizing",!1,i),i):0)}}}),wt(function(){wt.support.reliableMarginRight||(wt.cssHooks.marginRight={get:function(t,e){if(e)return wt.swap(t,{display:"inline-block"},kt,[t,"marginRight"])}}),!wt.support.pixelPosition&&wt.fn.position&&wt.each(["top","left"],function(t,n){wt.cssHooks[n]={get:function(t,e){if(e)return e=kt(t,n),$t.test(e)?wt(t).position()[n]+"px":e}}})}),wt.expr&&wt.expr.filters&&(wt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},wt.expr.filters.visible=function(t){return!wt.expr.filters.hidden(t)}),wt.each({margin:"",padding:"",border:"Width"},function(r,s){wt.cssHooks[r+s]={expand:function(t){for(var e=0,n={},i="string"==typeof t?t.split(" "):[t];e<4;e++)n[r+At[e]+s]=i[e]||i[e-2]||i[0];return n}},Mt.test(r)||(wt.cssHooks[r+s].set=zt)});var Vt=/%20/g,qt=/\[\]$/,Ut=/\r?\n/g,Gt=/^(?:submit|button|image|reset|file)$/i,Xt=/^(?:input|select|textarea|keygen)/i;function Yt(n,t,i,r){var e;if(wt.isArray(t))wt.each(t,function(t,e){i||qt.test(n)?r(n,e):Yt(n+"["+("object"==typeof e?t:"")+"]",e,i,r)});else if(i||"object"!==wt.type(t))r(n,t);else for(e in t)Yt(n+"["+e+"]",t[e],i,r)}wt.fn.extend({serialize:function(){return wt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=wt.prop(this,"elements");return t?wt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!wt(this).is(":disabled")&&Xt.test(this.nodeName)&&!Gt.test(t)&&(this.checked||!ct.test(t))}).map(function(t,e){var n=wt(this).val();return null==n?null:wt.isArray(n)?wt.map(n,function(t){return{name:e.name,value:t.replace(Ut,"\r\n")}}):{name:e.name,value:n.replace(Ut,"\r\n")}}).get()}}),wt.param=function(t,e){var n,i=[],r=function(t,e){e=wt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===k&&(e=wt.ajaxSettings&&wt.ajaxSettings.traditional),wt.isArray(t)||t.jquery&&!wt.isPlainObject(t))wt.each(t,function(){r(this.name,this.value)});else for(n in t)Yt(n,t[n],e,r);return i.join("&").replace(Vt,"+")},wt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,n){wt.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),wt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Kt,Jt,Zt=wt.now(),Qt=/\?/,te=/#.*$/,ee=/([?&])_=[^&]*/,ne=/^(.*?):[ \t]*([^\r\n]*)$/gm,ie=/^(?:GET|HEAD)$/,re=/^\/\//,se=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,oe=wt.fn.load,ae={},le={},ce="*/".concat("*");try{Jt=t.href}catch(t){(Jt=m.createElement("a")).href="",Jt=Jt.href}function ue(s){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,i=0,r=t.toLowerCase().match(C)||[];if(wt.isFunction(e))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(s[n]=s[n]||[]).unshift(e)):(s[n]=s[n]||[]).push(e)}}function he(e,r,s,o){var a={},l=e===le;function c(t){var i;return a[t]=!0,wt.each(e[t]||[],function(t,e){var n=e(r,s,o);return"string"!=typeof n||l||a[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),c(n),!1)}),i}return c(r.dataTypes[0])||!a["*"]&&c("*")}function de(t,e){var n,i,r=wt.ajaxSettings.flatOptions||{};for(n in e)e[n]!==k&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&wt.extend(!0,t,i),t}Kt=se.exec(Jt.toLowerCase())||[],wt.fn.load=function(t,e,n){if("string"!=typeof t&&oe)return oe.apply(this,arguments);var i,r,s,o=this,a=t.indexOf(" ");return 0<=a&&(i=t.slice(a),t=t.slice(0,a)),wt.isFunction(e)?(n=e,e=k):e&&"object"==typeof e&&(r="POST"),0<o.length&&wt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?wt("<div>").append(wt.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){o.each(n,s||[t.responseText,e,t])}),this},wt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){wt.fn[e]=function(t){return this.on(e,t)}}),wt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Jt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Kt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ce,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":wt.parseJSON,"text xml":wt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?de(de(t,wt.ajaxSettings),e):de(wt.ajaxSettings,t)},ajaxPrefilter:ue(ae),ajaxTransport:ue(le),ajax:function(t,e){"object"==typeof t&&(e=t,t=k),e=e||{};var u,h,d,n,p,i,f,r,m=wt.ajaxSetup({},e),g=m.context||m,v=m.context&&(g.nodeType||g.jquery)?wt(g):wt.event,b=wt.Deferred(),y=wt.Callbacks("once memory"),w=m.statusCode||{},s={},o={},x=0,a="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!n)for(n={};e=ne.exec(d);)n[e[1].toLowerCase()]=e[2];e=n[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?d:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=o[n]=o[n]||t,s[t]=e),this},overrideMimeType:function(t){return x||(m.mimeType=t),this},statusCode:function(t){var e;if(t)if(x<2)for(e in t)w[e]=[w[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||a;return u&&u.abort(e),l(0,e),this}};if(b.promise(_).complete=y.add,_.success=_.done,_.error=_.fail,m.url=((t||m.url||Jt)+"").replace(te,"").replace(re,Kt[1]+"//"),m.type=e.method||e.type||m.method||m.type,m.dataTypes=wt.trim(m.dataType||"*").toLowerCase().match(C)||[""],null==m.crossDomain&&(i=se.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===Kt[1]&&i[2]===Kt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Kt[3]||("http:"===Kt[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=wt.param(m.data,m.traditional)),he(ae,m,e,_),2===x)return _;for(r in(f=m.global)&&0==wt.active++&&wt.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!ie.test(m.type),h=m.url,m.hasContent||(m.data&&(h=m.url+=(Qt.test(h)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=ee.test(h)?h.replace(ee,"$1_="+Zt++):h+(Qt.test(h)?"&":"?")+"_="+Zt++)),m.ifModified&&(wt.lastModified[h]&&_.setRequestHeader("If-Modified-Since",wt.lastModified[h]),wt.etag[h]&&_.setRequestHeader("If-None-Match",wt.etag[h])),(m.data&&m.hasContent&&!1!==m.contentType||e.contentType)&&_.setRequestHeader("Content-Type",m.contentType),_.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ce+"; q=0.01":""):m.accepts["*"]),m.headers)_.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,_,m)||2===x))return _.abort();for(r in a="abort",{success:1,error:1,complete:1})_[r](m[r]);if(u=he(le,m,e,_)){_.readyState=1,f&&v.trigger("ajaxSend",[_,m]),m.async&&0<m.timeout&&(p=setTimeout(function(){_.abort("timeout")},m.timeout));try{x=1,u.send(s,l)}catch(t){if(!(x<2))throw t;l(-1,t)}}else l(-1,"No Transport");function l(t,e,n,i){var r,s,o,a,l,c=e;2!==x&&(x=2,p&&clearTimeout(p),u=k,d=i||"",_.readyState=0<t?4:0,r=200<=t&&t<300||304===t,n&&(a=function(t,e,n){var i,r,s,o,a=t.contents,l=t.dataTypes;for(;"*"===l[0];)l.shift(),i===k&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(m,_,n)),a=function(t,e,n,i){var r,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];s=u.shift();for(;s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(r in c)if((a=r.split(" "))[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[r]:!0!==c[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(m,a,_,r),r?(m.ifModified&&((l=_.getResponseHeader("Last-Modified"))&&(wt.lastModified[h]=l),(l=_.getResponseHeader("etag"))&&(wt.etag[h]=l)),204===t||"HEAD"===m.type?c="nocontent":304===t?c="notmodified":(c=a.state,s=a.data,r=!(o=a.error))):(o=c,!t&&c||(c="error",t<0&&(t=0))),_.status=t,_.statusText=(e||c)+"",r?b.resolveWith(g,[s,c,_]):b.rejectWith(g,[_,c,o]),_.statusCode(w),w=k,f&&v.trigger(r?"ajaxSuccess":"ajaxError",[_,m,r?s:o]),y.fireWith(g,[_,c]),f&&(v.trigger("ajaxComplete",[_,m]),--wt.active||wt.event.trigger("ajaxStop")))}return _},getJSON:function(t,e,n){return wt.get(t,e,n,"json")},getScript:function(t,e){return wt.get(t,k,e,"script")}}),wt.each(["get","post"],function(t,r){wt[r]=function(t,e,n,i){return wt.isFunction(e)&&(i=i||n,n=e,e=k),wt.ajax({url:t,type:r,dataType:i,data:e,success:n})}}),wt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return wt.globalEval(t),t}}}),wt.ajaxPrefilter("script",function(t){t.cache===k&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),wt.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(t,e){i=wt("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",r=function(t){i.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),m.head.appendChild(i[0])},abort:function(){r&&r()}}});var pe=[],fe=/(=)\?(?=&|$)|\?\?/;wt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=pe.pop()||wt.expando+"_"+Zt++;return this[t]=!0,t}}),wt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,s,o=!1!==t.jsonp&&(fe.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&fe.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=wt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(fe,"$1"+i):!1!==t.jsonp&&(t.url+=(Qt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||wt.error(i+" was not called"),s[0]},t.dataTypes[0]="json",r=f[i],f[i]=function(){s=arguments},n.always(function(){f[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,pe.push(i)),s&&wt.isFunction(r)&&r(s[0]),s=r=k}),"script"}),wt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var me=wt.ajaxSettings.xhr(),ge={0:200,1223:204},ve=0,be={};f.ActiveXObject&&wt(f).on("unload",function(){for(var t in be)be[t]();be=k}),wt.support.cors=!!me&&"withCredentials"in me,wt.support.ajax=me=!!me,wt.ajaxTransport(function(s){var o;if(wt.support.cors||me&&!s.crossDomain)return{send:function(t,e){var n,i,r=s.xhr();if(r.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(n in s.xhrFields)r[n]=s.xhrFields[n];for(n in s.mimeType&&r.overrideMimeType&&r.overrideMimeType(s.mimeType),s.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(delete be[i],o=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?e(r.status||404,r.statusText):e(ge[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:k,r.getAllResponseHeaders()))}},r.onload=o(),r.onerror=o("error"),o=be[i=ve++]=o("abort"),r.send(s.hasContent&&s.data||null)},abort:function(){o&&o()}}});var ye,we,xe=/^(?:toggle|show|hide)$/,_e=new RegExp("^(?:([+-])=|)("+y+")([a-z%]*)$","i"),ke=/queueHooks$/,Ce=[function(e,t,n){var i,r,s,o,a,l,c=this,u={},h=e.style,d=e.nodeType&&Ot(e),p=B.get(e,"fxshow");n.queue||(null==(a=wt._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,wt.queue(e,"fx").length||a.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===wt.css(e,"display")&&"none"===wt.css(e,"float")&&(h.display="inline-block"));n.overflow&&(h.overflow="hidden",c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],xe.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(d?"hide":"show")){if("show"!==r||!p||p[i]===k)continue;d=!0}u[i]=p&&p[i]||wt.style(e,i)}if(!wt.isEmptyObject(u))for(i in p?"hidden"in p&&(d=p.hidden):p=B.access(e,"fxshow",{}),s&&(p.hidden=!d),d?wt(e).show():c.done(function(){wt(e).hide()}),c.done(function(){var t;for(t in B.remove(e,"fxshow"),u)wt.style(e,t,u[t])}),u)o=Te(d?p[i]:0,i,c),i in p||(p[i]=o.start,d&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],Se={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=_e.exec(e),s=r&&r[3]||(wt.cssNumber[t]?"":"px"),o=(wt.cssNumber[t]||"px"!==s&&+i)&&_e.exec(wt.css(n.elem,t)),a=1,l=20;if(o&&o[3]!==s)for(s=s||o[3],r=r||[],o=+i||1;o/=a=a||".5",wt.style(n.elem,t,o+s),a!==(a=n.cur()/i)&&1!==a&&--l;);return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};function Me(){return setTimeout(function(){ye=k}),ye=wt.now()}function Te(t,e,n){for(var i,r=(Se[e]||[]).concat(Se["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function $e(s,t,e){var n,o,i=0,r=Ce.length,a=wt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=ye||Me(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return a.notifyWith(s,[c,n,e]),n<1&&r?e:(a.resolveWith(s,[c]),!1)},c=a.promise({elem:s,props:wt.extend({},t),opts:wt.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:ye||Me(),duration:e.duration,tweens:[],createTween:function(t,e){var n=wt.Tween(s,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(o)return this;for(o=!0;e<n;e++)c.tweens[e].run(1);return t?a.resolveWith(s,[c,t]):a.rejectWith(s,[c,t]),this}}),u=c.props;for(!function(t,e){var n,i,r,s,o;for(n in t)if(i=wt.camelCase(n),r=e[i],s=t[n],wt.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=wt.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,c.opts.specialEasing);i<r;i++)if(n=Ce[i].call(c,s,u,c.opts))return n;return wt.map(u,Te,c),wt.isFunction(c.opts.start)&&c.opts.start.call(s,c),wt.fx.timer(wt.extend(l,{elem:s,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Pe(t,e,n,i,r){return new Pe.prototype.init(t,e,n,i,r)}function Ee(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=At[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function Le(t){return wt.isWindow(t)?t:9===t.nodeType&&t.defaultView}wt.Animation=wt.extend($e,{tweener:function(t,e){wt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;i<r;i++)n=t[i],Se[n]=Se[n]||[],Se[n].unshift(e)},prefilter:function(t,e){e?Ce.unshift(t):Ce.push(t)}}),((wt.Tween=Pe).prototype={constructor:Pe,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(wt.cssNumber[n]?"":"px")},cur:function(){var t=Pe.propHooks[this.prop];return t&&t.get?t.get(this):Pe.propHooks._default.get(this)},run:function(t){var e,n=Pe.propHooks[this.prop];return this.options.duration?this.pos=e=wt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Pe.propHooks._default.set(this),this}}).init.prototype=Pe.prototype,(Pe.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=wt.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){wt.fx.step[t.prop]?wt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[wt.cssProps[t.prop]]||wt.cssHooks[t.prop])?wt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=Pe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},wt.each(["toggle","show","hide"],function(t,i){var r=wt.fn[i];wt.fn[i]=function(t,e,n){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(Ee(i,!0),t,e,n)}}),wt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,t,n,i){var r=wt.isEmptyObject(e),s=wt.speed(t,n,i),o=function(){var t=$e(this,wt.extend({},e),s);(r||B.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(r,t,s){var o=function(t){var e=t.stop;delete t.stop,e(s)};return"string"!=typeof r&&(s=t,t=r,r=k),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",n=wt.timers,i=B.get(this);if(e)i[e]&&i[e].stop&&o(i[e]);else for(e in i)i[e]&&i[e].stop&&ke.test(e)&&o(i[e]);for(e=n.length;e--;)n[e].elem!==this||null!=r&&n[e].queue!==r||(n[e].anim.stop(s),t=!1,n.splice(e,1));!t&&s||wt.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=B.get(this),n=e[o+"queue"],i=e[o+"queueHooks"],r=wt.timers,s=n?n.length:0;for(e.finish=!0,wt.queue(this,o,[]),i&&i.stop&&i.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===o&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),wt.each({slideDown:Ee("show"),slideUp:Ee("hide"),slideToggle:Ee("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,i){wt.fn[t]=function(t,e,n){return this.animate(i,t,e,n)}}),wt.speed=function(t,e,n){var i=t&&"object"==typeof t?wt.extend({},t):{complete:n||!n&&e||wt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!wt.isFunction(e)&&e};return i.duration=wt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in wt.fx.speeds?wt.fx.speeds[i.duration]:wt.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){wt.isFunction(i.old)&&i.old.call(this),i.queue&&wt.dequeue(this,i.queue)},i},wt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},wt.timers=[],wt.fx=Pe.prototype.init,wt.fx.tick=function(){var t,e=wt.timers,n=0;for(ye=wt.now();n<e.length;n++)(t=e[n])()||e[n]!==t||e.splice(n--,1);e.length||wt.fx.stop(),ye=k},wt.fx.timer=function(t){t()&&wt.timers.push(t)&&wt.fx.start()},wt.fx.interval=13,wt.fx.start=function(){we||(we=setInterval(wt.fx.tick,wt.fx.interval))},wt.fx.stop=function(){clearInterval(we),we=null},wt.fx.speeds={slow:600,fast:200,_default:400},wt.fx.step={},wt.expr&&wt.expr.filters&&(wt.expr.filters.animated=function(e){return wt.grep(wt.timers,function(t){return e===t.elem}).length}),wt.fn.offset=function(e){if(arguments.length)return e===k?this:this.each(function(t){wt.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,wt.contains(t,i)?(typeof i.getBoundingClientRect!==v&&(r=i.getBoundingClientRect()),n=Le(s),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},wt.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,c=wt.css(t,"position"),u=wt(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),s=wt.css(t,"top"),l=wt.css(t,"left"),("absolute"===c||"fixed"===c)&&-1<(s+l).indexOf("auto")?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),wt.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},wt.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===wt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),wt.nodeName(t[0],"html")||(i=t.offset()),i.top+=wt.css(t[0],"borderTopWidth",!0),i.left+=wt.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-wt.css(n,"marginTop",!0),left:e.left-i.left-wt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||i;t&&!wt.nodeName(t,"html")&&"static"===wt.css(t,"position");)t=t.offsetParent;return t||i})}}),wt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var s="pageYOffset"===r;wt.fn[e]=function(t){return wt.access(this,function(t,e,n){var i=Le(t);if(n===k)return i?i[r]:t[e];i?i.scrollTo(s?f.pageXOffset:n,s?n:f.pageYOffset):t[e]=n},e,t,arguments.length,null)}}),wt.each({Height:"height",Width:"width"},function(s,o){wt.each({padding:"inner"+s,content:o,"":"outer"+s},function(i,t){wt.fn[t]=function(t,e){var n=arguments.length&&(i||"boolean"!=typeof t),r=i||(!0===t||!0===e?"margin":"border");return wt.access(this,function(t,e,n){var i;return wt.isWindow(t)?t.document.documentElement["client"+s]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+s],i["scroll"+s],t.body["offset"+s],i["offset"+s],i["client"+s])):n===k?wt.css(t,e,r):wt.style(t,e,n,r)},o,n?t:k,n,null)}})}),wt.fn.size=function(){return this.length},wt.fn.andSelf=wt.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=wt:"function"==typeof define&&define.amd&&define("jquery",[],function(){return wt}),"object"==typeof f&&"object"==typeof f.document&&(f.jQuery=f.$=wt)}(window),function(Ct,St,Mt){var Tt={beforeShow:t,move:t,change:t,show:t,hide:t,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},$t=[],Pt=!!/msie/i.exec(Ct.navigator.userAgent),Et=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),Lt=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),It=function(){var t="";if(Pt)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","</div>","</div>"].join("")}();function At(t,e,n){for(var i=[],r=0;r<t.length;r++){var s=tinycolor(t[r]),o=s.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";o+=tinycolor.equals(e,t[r])?" sp-thumb-active":"";var a=Et?"background-color:"+s.toRgbString():"filter:"+s.toFilter();i.push('<span title="'+s.toRgbString()+'" data-color="'+s.toRgbString()+'" class="'+o+'"><span class="sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='sp-cf "+n+"'>"+i.join("")+"</div>"}function e(t,e){var n,i,r,s,o,a,l,c=(o=e,a=t,(l=St.extend({},Tt,o)).callbacks={move:Nt(l.move,a),change:Nt(l.change,a),show:Nt(l.show,a),hide:Nt(l.hide,a),beforeShow:Nt(l.beforeShow,a)},l),u=c.flat,h=c.showSelectionPalette,d=c.localStorageKey,p=c.theme,f=c.callbacks,m=(n=xt,i=10,function(){var t=this,e=arguments;r&&clearTimeout(s),!r&&s||(s=setTimeout(function(){s=null,n.apply(t,e)},i))}),g=!1,v=0,b=0,y=0,w=0,x=0,_=0,k=0,C=0,S=0,M=0,T=1,$=c.palette.slice(0),P=St.isArray($[0])?$:[$],E=c.selectionPalette.slice(0),L=c.maxSelectionSize,I="sp-dragging",A=t.ownerDocument,D=(A.body,St(t)),N=!1,O=St(It,A).addClass(p),B=O.find(".sp-color"),H=O.find(".sp-dragger"),z=O.find(".sp-hue"),j=O.find(".sp-slider"),R=O.find(".sp-alpha-inner"),F=O.find(".sp-alpha"),W=O.find(".sp-alpha-handle"),V=O.find(".sp-input"),q=O.find(".sp-palette"),U=O.find(".sp-initial"),G=O.find(".sp-cancel"),X=O.find(".sp-choose"),Y=D.is("input"),K=Y&&!u,J=K?St(Lt).addClass(p).addClass(c.className):St([]),Z=K?J:D,Q=J.find(".sp-preview-inner"),tt=c.color||Y&&D.val(),et=!1,nt=c.preferredFormat,it=nt,rt=!c.showButtons||c.clickoutFiresChange;function st(){O.toggleClass("sp-flat",u),O.toggleClass("sp-input-disabled",!c.showInput),O.toggleClass("sp-alpha-enabled",c.showAlpha),O.toggleClass("sp-buttons-disabled",!c.showButtons||u),O.toggleClass("sp-palette-disabled",!c.showPalette),O.toggleClass("sp-palette-only",c.showPaletteOnly),O.toggleClass("sp-initial-disabled",!c.showInitial),O.addClass(c.className),xt()}function ot(t){if(h){var e=tinycolor(t).toRgbString();if(-1===St.inArray(e,E))for(E.push(e);E.length>L;)E.shift();if(d&&Ct.localStorage)try{Ct.localStorage[d]=E.join(";")}catch(t){}}}function at(){var n=gt(),t=St.map(P,function(t,e){return At(t,n,"sp-palette-row sp-palette-row-"+e)});E&&t.push(At(function(){var t,e=[],n=E,i={};if(c.showPalette){for(var r=0;r<P.length;r++)for(var s=0;s<P[r].length;s++)i[t=tinycolor(P[r][s]).toRgbString()]=!0;for(r=0;r<n.length;r++)t=tinycolor(n[r]).toRgbString(),i.hasOwnProperty(t)||(e.push(n[r]),i[t]=!0)}return e.reverse().slice(0,c.maxSelectionSize)}(),n,"sp-palette-row sp-palette-row-selection")),q.html(t.join(""))}function lt(){if(c.showInitial){var t=et,e=gt();U.html(At([t,e],e,"sp-palette-row-initial"))}}function ct(){(b<=0||v<=0||w<=0)&&xt(),O.addClass(I)}function ut(){O.removeClass(I)}function ht(){var t=tinycolor(V.val());t.ok?mt(t):V.addClass("sp-validation-error")}function dt(){g?ft():pt()}function pt(){var t=St.Event("beforeShow.spectrum");g?xt():(D.trigger(t,[gt()]),!1===f.beforeShow(gt())||t.isDefaultPrevented()||(!function(){for(var t=0;t<$t.length;t++)$t[t]&&$t[t].hide()}(),g=!0,St(A).bind("click.spectrum",ft),St(Ct).bind("resize.spectrum",m),J.addClass("sp-active"),O.removeClass("sp-hidden"),c.showPalette&&at(),xt(),bt(),et=gt(),lt(),f.show(et),D.trigger("show.spectrum",[et])))}function ft(t){t&&"click"==t.type&&2==t.button||g&&!u&&(g=!1,St(A).unbind("click.spectrum",ft),St(Ct).unbind("resize.spectrum",m),J.removeClass("sp-active"),O.addClass("sp-hidden"),!tinycolor.equals(gt(),et)&&(rt&&"cancel"!==t?wt(!0):mt(et,!0)),f.hide(gt()),D.trigger("hide.spectrum",[gt()]))}function mt(t,e){if(!tinycolor.equals(t,gt())){var n=tinycolor(t),i=n.toHsv();C=i.h,S=i.s,M=i.v,T=i.a,bt(),n.ok&&!e&&(it=nt||n.format)}}function gt(t){return t=t||{},tinycolor.fromRatio({h:C,s:S,v:M,a:Math.round(100*T)/100},{format:t.format||it})}function vt(){bt(),f.move(gt()),D.trigger("move.spectrum",[gt()])}function bt(){V.removeClass("sp-validation-error"),yt();var t=tinycolor.fromRatio({h:C,s:1,v:1});B.css("background-color",t.toHexString());var e=it;T<1&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var n=gt({format:e}),i=n.toHexString(),r=n.toRgbString();if(Et||1===n.alpha?Q.css("background-color",r):(Q.css("background-color","transparent"),Q.css("filter",n.toFilter())),c.showAlpha){var s=n.toRgb();s.a=0;var o=tinycolor(s).toRgbString(),a="linear-gradient(left, "+o+", "+i+")";Pt?R.css("filter",tinycolor(o).toFilter({gradientType:1},i)):(R.css("background","-webkit-"+a),R.css("background","-moz-"+a),R.css("background","-ms-"+a),R.css("background",a))}c.showInput&&V.val(n.toString(e)),c.showPalette&&at(),lt()}function yt(){var t=S*v,e=b-M*b;t=Math.max(-y,Math.min(v-y,t-y)),e=Math.max(-y,Math.min(b-y,e-y)),H.css({top:e,left:t});var n=T*x;W.css({left:n-_/2});var i=C*w;j.css({top:i-k})}function wt(t){var e=gt();Y&&D.val(e.toString(it)).change();var n=!tinycolor.equals(e,et);ot(et=e),t&&n&&(f.change(e),D.trigger("change.spectrum",[e]))}function xt(){var t,e,n,i,r,s,o,a,l,c;v=B.width(),b=B.height(),y=H.height(),z.width(),w=z.height(),k=j.height(),x=F.width(),_=W.width(),u||(O.css("position","absolute"),O.offset((e=Z,n=(t=O).outerWidth(),i=t.outerHeight(),r=e.outerHeight(),s=t[0].ownerDocument,o=s.documentElement,a=o.clientWidth+St(s).scrollLeft(),l=o.clientHeight+St(s).scrollTop(),(c=e.offset()).top+=r,c.left-=Math.min(c.left,c.left+n>a&&n<a?Math.abs(c.left+n-a):0),c.top-=Math.min(c.top,c.top+i>l&&i<l?Math.abs(i+r-0):0),c))),yt()}function _t(){ft(),N=!0,D.attr("disabled",!0),Z.addClass("sp-disabled")}!function(){if(Pt&&O.find("*:not(input)").attr("unselectable","on"),st(),K&&D.after(J).hide(),u)D.after(O).hide();else{var t="parent"===c.appendTo?D.parent():St(c.appendTo);1!==t.length&&(t=St("body")),t.append(O)}if(d&&Ct.localStorage){try{var e=Ct.localStorage[d].split(",#");1<e.length&&(delete Ct.localStorage[d],St.each(e,function(t,e){ot(e)}))}catch(t){}try{E=Ct.localStorage[d].split(";")}catch(t){}}function n(t){return t.data&&t.data.ignore?(mt(St(this).data("color")),vt()):(mt(St(this).data("color")),wt(!0),vt(),ft()),!1}Z.bind("click.spectrum touchstart.spectrum",function(t){N||dt(),t.stopPropagation(),St(t.target).is("input")||t.preventDefault()}),(D.is(":disabled")||!0===c.disabled)&&_t(),O.click(Dt),V.change(ht),V.bind("paste",function(){setTimeout(ht,1)}),V.keydown(function(t){13==t.keyCode&&ht()}),G.text(c.cancelText),G.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),ft("cancel")}),X.text(c.chooseText),X.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),V.hasClass("sp-validation-error")||(wt(!0),ft())}),Ot(F,function(t,e,n){T=t/x,n.shiftKey&&(T=Math.round(10*T)/10),vt()}),Ot(z,function(t,e){C=parseFloat(e/w),vt()},ct,ut),Ot(B,function(t,e){S=parseFloat(t/v),M=parseFloat((b-e)/b),vt()},ct,ut),tt?(mt(tt),bt(),it=nt||tinycolor(tt).format,ot(tt)):bt(),u&&pt();var i=Pt?"mousedown.spectrum":"click.spectrum touchstart.spectrum";q.delegate(".sp-thumb-el",i,n),U.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},n)}();var kt={show:pt,hide:ft,toggle:dt,reflow:xt,option:function(t,e){return t===Mt?St.extend({},c):e===Mt?c[t]:(c[t]=e,void st())},enable:function(){N=!1,D.attr("disabled",!1),Z.removeClass("sp-disabled")},disable:_t,set:function(t){mt(t),wt()},get:gt,destroy:function(){D.show(),Z.unbind("click.spectrum touchstart.spectrum"),O.remove(),J.remove(),$t[kt.id]=null},container:O};return kt.id=$t.push(kt)-1,kt}function t(){}function Dt(t){t.stopPropagation()}function Nt(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function Ot(o,a,n,t){a=a||function(){},n=n||function(){},t=t||function(){};var i=o.ownerDocument||document,l=!1,c={},u=0,h=0,d="ontouchstart"in Ct,r={};function p(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function s(t){if(l){if(Pt&&document.documentMode<9&&!t.button)return f();var e=t.originalEvent.touches,n=e?e[0].pageX:t.pageX,i=e?e[0].pageY:t.pageY,r=Math.max(0,Math.min(n-c.left,h)),s=Math.max(0,Math.min(i-c.top,u));d&&p(t),a.apply(o,[r,s,t])}}function f(){l&&(St(i).unbind(r),St(i.body).removeClass("sp-dragging"),t.apply(o,arguments)),l=!1}r.selectstart=p,r.dragstart=p,r[d?"touchmove":"mousemove"]=s,r[d?"touchend":"mouseup"]=f,St(o).bind(d?"touchstart":"mousedown",function(t){var e=t.which?3==t.which:2==t.button;t.originalEvent.touches,e||l||!1!==n.apply(o,arguments)&&(l=!0,u=St(o).height(),h=St(o).width(),c=St(o).offset(),St(i).bind(r),St(i.body).addClass("sp-dragging"),d||s(t),p(t))})}Ct.console&&(Function.prototype.bind&&Function.prototype.bind.call(console.log,console));var s="spectrum.id";St.fn.spectrum=function(n,t){if("string"==typeof n){var i=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=$t[St(this).data(s)];if(t){var e=t[n];if(!e)throw new Error("Spectrum: no such method: '"+n+"'");"get"==n?i=t.get():"container"==n?i=t.container:"option"==n?i=t.option.apply(t,r):"destroy"==n?(t.destroy(),St(this).removeData(s)):e.apply(t,r)}}),i}return this.spectrum("destroy").each(function(){var t=e(this,n);St(this).data(s,t.id)})},St.fn.spectrum.load=!0,St.fn.spectrum.loadOpts={},St.fn.spectrum.draggable=Ot,St.fn.spectrum.defaults=Tt,St.spectrum={},St.spectrum.localization={},St.spectrum.palettes={},St.fn.spectrum.processNativeColorInputs=function(){var t=St("<input type='color' value='!' />")[0];"color"===t.type&&"!"!=t.value||St("input[type=color]").spectrum({preferredFormat:"hex6"})},function(t){var d=/^[\s,#]+/,p=/\s+$/,i=0,f=Math,s=f.round,m=f.min,g=f.max,e=f.random;function v(t,a){if(a=a||{},"object"==typeof(t=t||"")&&t.hasOwnProperty("_tc_id"))return t;var e=function(t){var e={r:0,g:0,b:0},n=1,i=!1,r=!1;"string"==typeof t&&(t=function(t){t=t.replace(d,"").replace(p,"").toLowerCase();var e,n=!1;if(w[t])t=w[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0};if(e=M.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=M.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=M.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=M.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=M.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=M.hex6.exec(t))return{r:k(e[1]),g:k(e[2]),b:k(e[3]),format:n?"name":"hex"};if(e=M.hex3.exec(t))return{r:k(e[1]+""+e[1]),g:k(e[2]+""+e[2]),b:k(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(s=t.r,o=t.g,a=t.b,e={r:255*_(s,255),g:255*_(o,255),b:255*_(a,255)},i=!0,r="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=S(t.s),t.v=S(t.v),e=function(t,e,n){t=6*_(t,360),e=_(e,100),n=_(n,100);var i=f.floor(t),r=t-i,s=n*(1-e),o=n*(1-r*e),a=n*(1-(1-r)*e),l=i%6;return{r:255*[n,o,s,s,a,n][l],g:255*[a,n,n,o,s,s][l],b:255*[s,s,a,n,n,o][l]}}(t.h,t.s,t.v),i=!0,r="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=S(t.s),t.l=S(t.l),e=function(t,e,n){var i,r,s;function o(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=_(t,360),e=_(e,100),n=_(n,100),0===e)i=r=s=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=o(l,a,t+1/3),r=o(l,a,t),s=o(l,a,t-1/3)}return{r:255*i,g:255*r,b:255*s}}(t.h,t.s,t.l),i=!0,r="hsl"),t.hasOwnProperty("a")&&(n=t.a));var s,o,a;n=parseFloat(n),(isNaN(n)||n<0||1<n)&&(n=1);return{ok:i,format:t.format||r,r:m(255,g(e.r,0)),g:m(255,g(e.g,0)),b:m(255,g(e.b,0)),a:n}}(t),l=e.r,c=e.g,u=e.b,h=e.a,r=s(100*h)/100,n=a.format||e.format;return l<1&&(l=s(l)),c<1&&(c=s(c)),u<1&&(u=s(u)),{ok:e.ok,format:n,_tc_id:i++,alpha:h,toHsv:function(){var t=b(l,c,u);return{h:360*t.h,s:t.s,v:t.v,a:h}},toHsvString:function(){var t=b(l,c,u),e=s(360*t.h),n=s(100*t.s),i=s(100*t.v);return 1==h?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+r+")"},toHsl:function(){var t=o(l,c,u);return{h:360*t.h,s:t.s,l:t.l,a:h}},toHslString:function(){var t=o(l,c,u),e=s(360*t.h),n=s(100*t.s),i=s(100*t.l);return 1==h?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+r+")"},toHex:function(t){return y(l,c,u,t)},toHexString:function(t){return"#"+y(l,c,u,t)},toRgb:function(){return{r:s(l),g:s(c),b:s(u),a:h}},toRgbString:function(){return 1==h?"rgb("+s(l)+", "+s(c)+", "+s(u)+")":"rgba("+s(l)+", "+s(c)+", "+s(u)+", "+r+")"},toPercentageRgb:function(){return{r:s(100*_(l,255))+"%",g:s(100*_(c,255))+"%",b:s(100*_(u,255))+"%",a:h}},toPercentageRgbString:function(){return 1==h?"rgb("+s(100*_(l,255))+"%, "+s(100*_(c,255))+"%, "+s(100*_(u,255))+"%)":"rgba("+s(100*_(l,255))+"%, "+s(100*_(c,255))+"%, "+s(100*_(u,255))+"%, "+r+")"},toName:function(){return x[y(l,c,u,!0)]||!1},toFilter:function(t){var e=y(l,c,u),n=e,i=Math.round(255*parseFloat(h)).toString(16),r=i,s=a&&a.gradientType?"GradientType = 1, ":"";if(t){var o=v(t);n=o.toHex(),r=Math.round(255*parseFloat(o.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr=#"+C(i)+e+",endColorstr=#"+C(r)+n+")"},toString:function(t){var e=!1;return"rgb"===(t=t||this.format)&&(e=this.toRgbString()),"prgb"===t&&(e=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(e=this.toHexString()),"hex3"===t&&(e=this.toHexString(!0)),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString()}}}function o(t,e,n){t=_(t,255),e=_(e,255),n=_(n,255);var i,r,s=g(t,e,n),o=m(t,e,n),a=(s+o)/2;if(s==o)i=r=0;else{var l=s-o;switch(r=.5<a?l/(2-s-o):l/(s+o),s){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:a}}function b(t,e,n){t=_(t,255),e=_(e,255),n=_(n,255);var i,r,s=g(t,e,n),o=m(t,e,n),a=s,l=s-o;if(r=0===s?0:l/s,s==o)i=0;else{switch(s){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:a}}function y(t,e,n,i){var r=[C(s(t).toString(16)),C(s(e).toString(16)),C(s(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}v.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:S(t[i]));t=n}return v(t,e)},v.equals=function(t,e){return!(!t||!e)&&v(t).toRgbString()==v(e).toRgbString()},v.random=function(){return v.fromRatio({r:e(),g:e(),b:e()})},v.desaturate=function(t,e){var n=v(t).toHsl();return n.s-=(e||10)/100,n.s=r(n.s),v(n)},v.saturate=function(t,e){var n=v(t).toHsl();return n.s+=(e||10)/100,n.s=r(n.s),v(n)},v.greyscale=function(t){return v.desaturate(t,100)},v.lighten=function(t,e){var n=v(t).toHsl();return n.l+=(e||10)/100,n.l=r(n.l),v(n)},v.darken=function(t,e){var n=v(t).toHsl();return n.l-=(e||10)/100,n.l=r(n.l),v(n)},v.complement=function(t){var e=v(t).toHsl();return e.h=(e.h+180)%360,v(e)},v.triad=function(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+120)%360,s:e.s,l:e.l}),v({h:(n+240)%360,s:e.s,l:e.l})]},v.tetrad=function(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+90)%360,s:e.s,l:e.l}),v({h:(n+180)%360,s:e.s,l:e.l}),v({h:(n+270)%360,s:e.s,l:e.l})]},v.splitcomplement=function(t){var e=v(t).toHsl(),n=e.h;return[v(t),v({h:(n+72)%360,s:e.s,l:e.l}),v({h:(n+216)%360,s:e.s,l:e.l})]},v.analogous=function(t,e,n){e=e||6,n=n||30;var i=v(t).toHsl(),r=360/n,s=[v(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(v(i));return s},v.monochromatic=function(t,e){e=e||6;for(var n=v(t).toHsv(),i=n.h,r=n.s,s=n.v,o=[],a=1/e;e--;)o.push(v({h:i,s:r,v:s})),s=(s+a)%1;return o},v.readability=function(t,e){var n=v(t).toRgb(),i=v(e).toRgb(),r=(299*n.r+587*n.g+114*n.b)/1e3,s=(299*i.r+587*i.g+114*i.b)/1e3,o=Math.max(n.r,i.r)-Math.min(n.r,i.r)+Math.max(n.g,i.g)-Math.min(n.g,i.g)+Math.max(n.b,i.b)-Math.min(n.b,i.b);return{brightness:Math.abs(r-s),color:o}},v.readable=function(t,e){var n=v.readability(t,e);return 125<n.brightness&&500<n.color},v.mostReadable=function(t,e){for(var n=null,i=0,r=!1,s=0;s<e.length;s++){var o=v.readability(t,e[s]),a=125<o.brightness&&500<o.color,l=o.brightness/125*3+o.color/500;(a&&!r||a&&r&&i<l||!a&&!r&&i<l)&&(r=a,i=l,n=v(e[s]))}return n};var w=v.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},x=v.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(w);function _(t,e){var n;"string"==typeof(n=t)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(t="100%");var i,r="string"==typeof(i=t)&&-1!=i.indexOf("%");return t=m(e,g(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),f.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function r(t){return m(1,g(0,t))}function k(t){return parseInt(t,16)}function C(t){return 1==t.length?"0"+t:""+t}function S(t){return t<=1&&(t=100*t+"%"),t}var n,a,l,M=(a="[\\s|\\(]+("+(n="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",l="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",{rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+l),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+l),hsv:new RegExp("hsv"+a),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});t.tinycolor=v}(this),St(function(){St.fn.spectrum.load&&St.fn.spectrum.processNativeColorInputs()})}(window,jQuery),define("colorpicker",["jquery"],function(){}),define("strut/config/config",[],function(){var t={slide:{size:{width:1024,height:768},overviewSize:{width:75,height:50}}},e=localStorage.getItem("Strut_sessionMeta");try{var n=JSON.parse(e)}catch(t){}n=n||{generator_index:0};return window.config=t,window.sessionMeta=n,t}),define("common/EventEmitter",[],function(){function t(){if(!(this instanceof t))return new t;this._events=null,"undefined"!=typeof process&&void 0!==process.nextTick?this._deferer=function(t,e,n){process.nextTick(function(){t(e,n)})}:this._deferer=function(t,e,n){setTimeout(function(){t(e,n)},0)}}return t.prototype={_listeners:function(t){var e=this._events||(this._events={});return e[t]||(e[t]=[])},_emit:function(t,e){if(t instanceof Array&&(t=JSON.stringify(t)),this._events){var n=this._events[t];if(n)for(var i=n.length;i--;){var r=n[i];r&&r.cb.apply(r.context,e)}}},_splice:function(t,e,n){return(t=Array.prototype.slice.call(t)).splice(e,n)},_indexOfSub:function(t,e,n){for(var i=0;i<t.length;++i)if(t[i].cb===e&&t[i].context===n)return i;return-1},emit:function(t){var e=1<arguments.length?this._splice(arguments,1,arguments.length):[];this._emit(t,e)},trigger:function(){this.emit.apply(this,arguments)},emitDeferred:function(t){var e=1<arguments.length?this._splice(arguments,1,arguments.length):[];this._deferer(emit,t,e)},on:function(t,e,n){if(!e)throw"Undefined callback provided";t instanceof Array&&(t=JSON.stringify(t));var i=this._listeners(t),r=this._indexOfSub(i,e,n);r<0&&(i.push({cb:e,context:n}),r=i.length-1);var s=this;return{dispose:function(){s.removeListener(t,e,n)}}},once:function(t,e,n){var i={sub:null};return i.sub=this.on(t,function(){i.sub.dispose(),e.apply(n,arguments)}),i.sub},removeListener:function(t,e,n){var i=this._listeners(t),r=this._indexOfSub(i,e,n);0<=r&&i.splice(r,1),0==i.length&&delete this._events[t]},getNumListeners:function(t){var e=0;return this._events[t]&&(e=this._events[t].length),e},off:function(t,e,n){this.removeListener(t,e,n)},removeAllListeners:function(){this._events=null}},t}),define("common/collections/MultiMap",[],function(){"use strict";function t(){this._map={}}return t.prototype={put:function(t,e){var n=this._map[t];return null==n&&(n=[],this._map[t]=n),n.push(e),this},putAll:function(t,e){var n=this._map[t];return null==n&&(n=[]),this._map[t]=n.concat(e),this},get:function(t){return this._map[t]||[]},remove:function(t,e){var n=this._map[t],i=n.indexOf(e);if(0<=i)return n.length<=1?(this.removeAll(t),[]):(n.splice(i,1),n)},removeAll:function(t){return delete this._map[t],this},putIfAbsent:function(t,e){var n=this._map[t];return null==n&&(n=[],this._map[t]=n),n.indexOf(e)<0&&n.push(e),this}},t}),define("framework/ServiceRegistry",["common/EventEmitter","common/collections/MultiMap"],function(t,e){"use strict";var r=0;function n(){this._services=new e}var i=n.prototype=Object.create(t.prototype);i.register=function(t,e){var n;null==e.__registryIdentifier&&(e.__registryIdentifier=++r),Array.isArray(t)?(n=t,t={}):"string"==typeof t?(n=[t],t={}):n=Array.isArray(t.interfaces)?t.interfaces:[t.interfaces];var i=new o(n,t.meta,e);return n.forEach(function(t){this._services.put(t,i),this.emit("registered:"+t,i)},this),this.emit("registered",i),this},i.deregister=function(t){return t=this.normalize(t),this._deregister(t),this},i._deregister=function(i){var r=[];i.interfaces.forEach(function(n){this._services.get(n).forEach(function(t,e){t._matches(i)&&(this._services.remove(n,t),r.push(t))},this)},this),r.forEach(function(t){this.emit("deregistered",t)},this)},i.getBest=function(t){var e=this.getBestEntry(t);return null!=e?e.service():null},i.getBestEntry=function(t){return this.get(t)[0]};var s=i.normalize=function(t){var e={};return"string"==typeof t?e.interfaces=[t]:Array.isArray(t)?e.interfaces=t:(e=t,Array.isArray(e.interfaces)||(e.interfaces=[e.interfaces])),e};function o(t,e,n){this._interfaces=t,this._meta=e||{},this._service=n}return i.get=function(n){var i,t=this.normalize(n),r={};t.interfaces.some(function(t,e){return i={},this._services.get(t).forEach(function(t){t.metaMatches(n.meta)&&(0!=e&&null==r[t.serviceIdentifier()]||(i[t.serviceIdentifier()]=t))}),r=i,0==Object.keys(i).length},this);var e=[];for(var s in i)e.push(i[s]);return e},i.getInvoke=function(t,i,r){var e=this.get(t),s={};return e.forEach(function(t){var e=t.service(),n=e[i].apply(e,r);s[n.id]=n},this),s},o.prototype={equals:function(t){return t._service.__registryIdentifier==this._service.__registryIdentifier},service:function(){return this._service},meta:function(){return this._meta},matches:function(t){t=s(t);var e={};return t.interfaces.forEach(function(t){e[t]=!0}),this._interfaces.every(function(t){return e[t]})},metaMatches:function(t){if(null==t)return!0;for(var e in t)if(!_.isEqual(t[e],this._meta[e]))return!1;return!0},serviceIdentifier:function(){return this._service.__registryIdentifier}},n}),function(t,r){"use strict";console.log("LOADING LODASH!!!!");var f,s,o,e="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(t=global),exports),c=Array.prototype,n=(Boolean.prototype,Object.prototype),i=(Number.prototype,String.prototype,0),l=30,a=t._,p=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,u=/&(?:amp|lt|gt|quot|#x27);/g,m=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,b=/\w*$/,y=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,h=RegExp("^"+(n.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),w=/($^)/,d=/[&<>"']/g,x=/['\n\r\t\u2028\u2029\\]/g,_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],k=0,C=c.concat,S=n.hasOwnProperty,M=c.push,T=n.propertyIsEnumerable,$=c.slice,P=n.toString,E=h.test(E=$.bind)&&E,L=Math.floor,I=h.test(I=Array.isArray)&&I,A=t.isFinite,D=h.test(D=Object.keys)&&D,N=Math.max,O=Math.min,B=Math.random,H="[object Arguments]",z="[object Array]",j="[object Boolean]",R="[object Date]",F="[object Function]",W="[object Number]",V="[object Object]",q="[object RegExp]",U="[object String]",G=t.clearTimeout,X=t.setTimeout,Y=!0;!function(){var t={0:1,length:1},e=[];function n(){this.x=1}for(var i in n.prototype={valueOf:1,y:1},new n)e.push(i);for(i in arguments)Y=!i;f=(e+"").length<4,o="x"!=e[0],e.splice.call(t,0,1),s=t[0]}(1);var K=!Lt(arguments),J="x"!=$.call("x")[0],Z="x"[0]+Object("x")[0]!="xx";try{var Q=P.call(t.document||0)==V}catch(t){}var tt=E&&/\n|Opera/.test(E+P.call(t.opera)),et=D&&/^.+$|true/.test(D+!!t.attachEvent),nt=!tt;try{var it=(Function("//@")(),!t.attachEvent)}catch(t){}var rt={};rt[j]=rt[R]=rt[F]=rt[W]=rt[V]=rt[q]=!1,rt[H]=rt[z]=rt[U]=!0;var st={};st[H]=st[F]=!1,st[z]=st[j]=st[R]=st[W]=st[V]=st[q]=st[U]=!0;var ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},at={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},lt={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1,unknown:!0},ct={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};function ut(t){return new ht(t)}function ht(t){if(t&&t.__wrapped__)return t;this.__wrapped__=t}ut.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var dt=_e("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length === +length) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;    <% if (!hasDontEnumBug || useHas) { %>\n    }<% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),pt={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},ft={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},mt={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},gt={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},vt={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},bt={top:"if (thisArg) callback = bindIterator(callback, thisArg)"},yt={inLoop:{object:pt.inLoop}},wt={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(et?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(et?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}},xt={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = bindIterator(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"};function _t(i,r){return function(t,e,n){return i.call(r,t,e,n)}}function kt(t,n,e){n||(n=0);var i=t.length,r=(e||l)<=i-n,s=r?{}:t;if(r)for(var o,a=n-1;++a<i;)o=t[a]+"",(S.call(s,o)?s[o]:s[o]=[]).push(t[a]);return function(t){if(r){var e=t+"";return S.call(s,e)&&-1<pe(s[e],t)}return-1<pe(s,t,n)}}function Ct(t,e){var n=t.index,i=e.index;if((t=t.criteria)!==(e=e.criteria)){if(e<t||t===r)return 1;if(t<e||e===r)return-1}return n<i?-1:1}function St(r,s,o){var a=At(r),l=!o,c=r;return l&&(o=s),function t(){var e=arguments,n=l?this:s;if(a||(r=s[c]),o.length&&(e=e.length?o.concat($.call(e)):o),this instanceof t){Pt.prototype=r.prototype,n=new Pt;var i=r.apply(n,e);return i&&lt[typeof i]?i:n}return r.apply(n,e)}}function Mt(){for(var t,e,n,i=-1,r=arguments.length,s={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};++i<r;)for(e in t=arguments[i])n=null==(n=t[e])?"":n,/beforeLoop|inLoop/.test(e)?("string"==typeof n&&(n={array:n,object:n}),s.arrayBranch[e]=n.array||"",s.objectBranch[e]=n.object||""):s[e]=n;var o=s.args,a=/^[^,]+/.exec(o)[0],l=s.useStrict;return s.firstArg=a,s.hasDontEnumBug=f,s.isKeysFast=et,s.noArgsEnum=Y,s.shadowed=_,s.useHas=!1!==s.useHas,s.useStrict=null==l?nt:l,null==s.noCharByIndex&&(s.noCharByIndex=Z),s.exit||(s.exit="if (!"+a+") return result"),"collection"==a&&s.arrayBranch.inLoop||(s.arrayBranch=null),Function("arrayLikeClasses, ArrayProto, bind, bindIterator, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+o+") {\n"+dt(s)+"\n};\nreturn callee")(rt,c,be,_t,Ct,C,zt,S,we,pe,Lt,It,At,Nt,V,lt,D,T,$,U,P)}function Tt(t){return"\\"+ct[t]}function $t(t){return ot[t]}function Pt(){}function Et(t){return at[t]}function Lt(t){return P.call(t)==H}K&&(Lt=function(t){return!(!t||!S.call(t,"callee"))});var It=I||function(t){return P.call(t)==z};function At(t){return"function"==typeof t}function Dt(t,e){var i=!1;if(!t||"object"!=typeof t||!e&&Lt(t))return i;var n=t.constructor;return Q&&"function"!=typeof t.toString&&"string"==typeof(t+"")||At(n)&&!(n instanceof n)?i:o?(zt(t,function(t,e,n){return i=!S.call(n,e),!1}),!1===i):(zt(t,function(t,e){i=e}),!1===i||S.call(t,i))}At(/x/)&&(At=function(t){return P.call(t)==F});var Nt=lt.__proto__!=n?Dt:function(t,e){if(!t)return!1;var n=t.valueOf,i="function"==typeof n&&(i=n.__proto__)&&i.__proto__;return i?t==i||t.__proto__==i&&(e||!Lt(t)):Dt(t)},Ot=Mt({args:"object",init:"[]",inLoop:"result.push(index)"});var Bt=Mt(gt,{inLoop:"if (result[index] == null) "+gt.inLoop}),Ht=Mt(gt),zt=Mt(pt,bt,yt,{useHas:!1}),jt=Mt(pt,bt,yt),Rt=Mt({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"});var Ft=Mt({args:"object",init:"{}",inLoop:"result[value] = index"});var Wt=Mt({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(K?" || isArguments(value)":"")+" ||\n  (className == objectClass && length === +length &&\n  isFunction(value.splice))) return !length",inLoop:{object:"return false"}});var Vt=D?function(t){var e=typeof t;return"function"==e&&T.call(t,"prototype")?Ot(t):t&&lt[e]?D(t):[]}:Ot,qt=Mt(gt,{args:"object, source, indicator",top:"var argsLength, isArr, stackA, stackB,\n    args = arguments, argsIndex = 0;\nif (indicator == isPlainObject) {\n  argsLength = 2;\n  stackA = args[3];\n  stackB = args[4]\n} else {\n  argsLength = args.length;\n  stackA = [];\n  stackB = []\n}\nwhile (++argsIndex < argsLength) {\n  if (iteratee = args[argsIndex]) {",inLoop:"if ((source = value) && ((isArr = isArray(source)) || isPlainObject(source))) {\n  var found = false, stackLength = stackA.length;\n  while (stackLength--) {\n    if (found = stackA[stackLength] == source) break\n  }\n  if (found) {\n    result[index] = stackB[stackLength]\n  } else {\n    stackA.push(source);\n    stackB.push(value = (value = result[index]) && isArr\n      ? (isArray(value) ? value : [])\n      : (isPlainObject(value) ? value : {})\n    );\n    result[index] = callee(value, source, isPlainObject, stackA, stackB)\n  }\n} else if (source != null) {\n  result[index] = source\n}"}),Ut=Mt(xt),Gt=Mt({args:"object",init:"[]",inLoop:"result"+(et?"[ownIndex] = ":".push")+"([index, value])"}),Xt=Mt(xt,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = bindIterator(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),Yt=Mt({args:"object",init:"[]",inLoop:"result.push(value)"}),Kt=Mt({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),Jt=Mt(pt,ft),Zt=Mt(pt,mt),Qt=Mt(pt,vt),te=Mt(pt,bt,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),ee=Mt(pt,bt),ne=Mt(pt,ft,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),ie=Mt(wt,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(et?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),re=Mt(pt,wt),se=Mt(wt,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(et?"[ownIndex] = ":".push")+"(value[property])"}}),oe=Mt({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = bindIterator(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}});function ae(t,e,n,i){if(!t)return n;var r=t.length,s=arguments.length<3;if(i&&(e=_t(e,i)),r===+r){var o=Z&&P.call(t)==U?t.split(""):t;for(r&&s&&(n=o[--r]);r--;)n=e(n,o[r],r,t);return n}var a,l=Vt(t);for((r=l.length)&&s&&(n=t[l[--r]]);r--;)n=e(n,t[a=l[r]],a,t);return n}var le=Mt(pt,vt,{inLoop:"!"+vt.inLoop});var ce=Mt(pt,mt,{init:"false",inLoop:mt.inLoop.replace("!","")}),ue=Mt(pt,ft,wt,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(et?"[ownIndex] = ":".push")+"({\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"});var he=Mt(vt,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"});function de(t,e,n){if(t)return null==e||n?t[0]:$.call(t,0,e)}function pe(t,e,n){if(!t)return-1;var i=-1,r=t.length;if(n){if("number"!=typeof n)return t[i=ge(t,e)]===e?i:-1;i=(n<0?N(0,r+n):n)-1}for(;++i<r;)if(t[i]===e)return i;return-1}function fe(t,e,n){var i=-1/0,r=i;if(!t)return r;var s,o=-1,a=t.length;if(!e){for(;++o<a;)t[o]>r&&(r=t[o]);return r}for(n&&(e=_t(e,n));++o<a;)i<(s=e(t[o],o,t))&&(i=s,r=t[o]);return r}function me(t,e,n){return t?$.call(t,null==e||n?1:e):[]}function ge(t,e,n,i){if(!t)return 0;var r,s=0,o=t.length;if(n)for(i&&(n=be(n,i)),e=n(e);s<o;)n(t[r=s+o>>>1])<e?s=r+1:o=r;else for(;s<o;)t[r=s+o>>>1]<e?s=r+1:o=r;return s}function ve(t,e,n,i){var r=[];if(!t)return r;var s,o=-1,a=t.length,l=[];for("function"==typeof e&&(i=n,n=e,e=!1),n?i&&(n=_t(n,i)):n=we;++o<a;)s=n(t[o],o,t),(e?!o||l[l.length-1]!==s:pe(l,s)<0)&&(l.push(s),r.push(t[o]));return r}function be(t,e){return tt||E&&2<arguments.length?E.call.apply(E,arguments):St(t,e,$.call(arguments,2))}var ye=Mt({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});function we(t){return t}function xe(e){ee(Rt(e),function(t){var n=ut[t]=e[t];ht.prototype[t]=function(){var t=[this.__wrapped__];arguments.length&&M.apply(t,arguments);var e=n.apply(ut,t);return this.__chain__&&((e=new ht(e)).__chain__=!0),e}})}function _e(s,t,e){e||(e={}),s+="";var o,n,a=0,i=ut.templateSettings,l="__p += '",r=e.variable||i.variable,c=r,u=RegExp((e.escape||i.escape||w).source+"|"+(e.interpolate||i.interpolate||w).source+"|"+(e.evaluate||i.evaluate||w).source+"|$","g");if(s.replace(u,function(t,e,n,i,r){l+=s.slice(a,r).replace(x,Tt),l+=e?"' +\n__e("+e+") +\n'":i?"';\n"+i+";\n__p += '":n?"' +\n((__t = ("+n+")) == null ? '' : __t) +\n'":"",o||(o=i||p.test(e||n)),a=r+t.length}),l+="';\n",!c)if(r="obj",o)l="with ("+r+") {\n"+l+"\n}\n";else{var h=RegExp("(\\(\\s*)"+r+"\\."+r+"\\b","g");l=l.replace(y,"$&"+r+".").replace(h,"$1__d")}l=(o?l.replace(m,""):l).replace(g,"$1").replace(v,"$1;"),l="function("+r+") {\n"+(c?"":r+" || ("+r+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(c?"":", __d = "+r+"."+r+" || "+r)+";\n")+l+"return __p\n}";var d=it?"\n//@ sourceURL=/lodash/template/source["+k+++"]":"";try{n=Function("_","return "+l+d)(ut)}catch(t){throw t.source=l,t}return t?n(t):(n.source=l,n)}ut.VERSION="0.7.0",ut.after=function(t,e){return t<1?e():function(){if(--t<1)return e.apply(this,arguments)}},ut.bind=be,ut.bindAll=ye,ut.chain=function(t){return(t=new ht(t)).__chain__=!0,t},ut.clone=function n(t,i,e,r,s){if(null==t)return t;e&&(i=!1);var o=lt[typeof t];if(o){var a=P.call(t);if(!st[a]||K&&Lt(t))return t;var l=a==z;o=l||(a==V?Nt(t,!0):o)}if(!o||!i)return o?l?$.call(t):Ht({},t):t;var c=t.constructor;switch(a){case j:return new c(1==t);case R:return new c(+t);case W:case U:return new c(t);case q:return c(t.source,b.exec(t))}r||(r=[]),s||(s=[]);for(var u=r.length;u--;)if(r[u]==t)return s[u];var h=l?c(u=t.length):{};if(r.push(t),s.push(h),l)for(var d=-1;++d<u;)h[d]=n(t[d],i,null,r,s);else jt(t,function(t,e){h[e]=n(t,i,null,r,s)});return h},ut.compact=function(t){var e=[];if(!t)return e;for(var n=-1,i=t.length;++n<i;)t[n]&&e.push(t[n]);return e},ut.compose=function(){var n=arguments;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},ut.contains=Kt,ut.countBy=Jt,ut.debounce=function(e,n,i){var r,s,o,a;function l(){a=null,i||(s=e.apply(o,r))}return function(){var t=i&&!a;return r=arguments,o=this,G(a),a=X(l,n),t&&(s=e.apply(o,r)),s}},ut.defaults=Bt,ut.defer=function(t){var e=$.call(arguments,1);return X(function(){return t.apply(r,e)},1)},ut.delay=function(t,e){var n=$.call(arguments,2);return X(function(){return t.apply(r,n)},e)},ut.difference=function(t){var e=[];if(!t)return e;for(var n=-1,i=t.length,r=kt(C.apply(e,arguments),i);++n<i;)r(t[n])||e.push(t[n]);return e},ut.escape=function(t){return null==t?"":(t+"").replace(d,$t)},ut.every=Zt,ut.extend=Ht,ut.filter=Qt,ut.find=te,ut.first=de,ut.flatten=function t(e,n){var i=[];if(!e)return i;for(var r,s=-1,o=e.length;++s<o;)r=e[s],It(r)?M.apply(i,n?r:t(r)):i.push(r);return i},ut.forEach=ee,ut.forIn=zt,ut.forOwn=jt,ut.functions=Rt,ut.groupBy=ne,ut.has=function(t,e){return!!t&&S.call(t,e)},ut.identity=we,ut.indexOf=pe,ut.initial=function(t,e,n){return t?$.call(t,0,-(null==e||n?1:e)):[]},ut.intersection=function(t){var e=[];if(!t)return e;var n,i=arguments.length,r=[],s=-1,o=t.length;t:for(;++s<o;)if(pe(e,n=t[s])<0){for(var a=1;a<i;a++)if(!(r[a]||(r[a]=kt(arguments[a])))(n))continue t;e.push(n)}return e},ut.invert=Ft,ut.invoke=ie,ut.isArguments=Lt,ut.isArray=It,ut.isBoolean=function(t){return!0===t||!1===t||P.call(t)==j},ut.isDate=function(t){return P.call(t)==R},ut.isElement=function(t){return!!t&&1===t.nodeType},ut.isEmpty=Wt,ut.isEqual=function t(e,n,i,r){if(null==e||null==n)return e===n;if(e===n)return 0!==e||1/e==1/n;(lt[typeof e]||lt[typeof n])&&(e=e.__wrapped__||e,n=n.__wrapped__||n);var s=P.call(e);if(s!=P.call(n))return!1;switch(s){case j:case R:return+e==+n;case W:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case q:case U:return e==n+""}var o=rt[s];if(K&&!o&&(o=Lt(e))&&!Lt(n))return!1;if(!o&&(s!=V||Q&&("function"!=typeof e.toString&&"string"==typeof(e+"")||"function"!=typeof n.toString&&"string"==typeof(n+""))))return!1;i||(i=[]),r||(r=[]);for(var a=i.length;a--;)if(i[a]==e)return r[a]==n;var l=-1,c=!0,u=0;if(i.push(e),r.push(n),o){if(c=(u=e.length)==n.length)for(;u--&&(c=t(e[u],n[u],i,r)););return c}var h=e.constructor,d=n.constructor;if(h!=d&&!(At(h)&&h instanceof h&&At(d)&&d instanceof d))return!1;for(var p in e)if(S.call(e,p)&&(u++,!S.call(n,p)||!t(e[p],n[p],i,r)))return!1;for(p in n)if(S.call(n,p)&&!u--)return!1;if(f)for(;++l<7;)if(p=_[l],S.call(e,p)&&(!S.call(n,p)||!t(e[p],n[p],i,r)))return!1;return!0},ut.isFinite=function(t){return A(t)&&P.call(t)==W},ut.isFunction=At,ut.isNaN=function(t){return P.call(t)==W&&t!=+t},ut.isNull=function(t){return null===t},ut.isNumber=function(t){return P.call(t)==W},ut.isObject=function(t){return!!t&&lt[typeof t]},ut.isRegExp=function(t){return P.call(t)==q},ut.isString=function(t){return P.call(t)==U},ut.isUndefined=function(t){return t===r},ut.keys=Vt,ut.last=function(t,e,n){if(t){var i=t.length;return null==e||n?t[i-1]:$.call(t,-e||i)}},ut.lastIndexOf=function(t,e,n){if(!t)return-1;var i=t.length;for(n&&"number"==typeof n&&(i=(n<0?N(0,i+n):O(n,i-1))+1);i--;)if(t[i]===e)return i;return-1},ut.lateBind=function(t,e){return St(e,t,$.call(arguments,2))},ut.map=re,ut.max=fe,ut.memoize=function(e,n){var i={};return function(){var t=n?n.apply(this,arguments):arguments[0];return S.call(i,t)?i[t]:i[t]=e.apply(this,arguments)}},ut.merge=qt,ut.min=function(t,e,n){var i=1/0,r=i;if(!t)return r;var s,o=-1,a=t.length;if(!e){for(;++o<a;)t[o]<r&&(r=t[o]);return r}for(n&&(e=_t(e,n));++o<a;)(s=e(t[o],o,t))<i&&(i=s,r=t[o]);return r},ut.mixin=xe,ut.noConflict=function(){return t._=a,this},ut.object=function(t,e){if(!t)return{};for(var n=-1,i=t.length,r={};++n<i;)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r},ut.omit=Ut,ut.once=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}},ut.pairs=Gt,ut.partial=function(t){return St(t,$.call(arguments,1))},ut.pick=Xt,ut.pluck=se,ut.random=function(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e&&(e=t,t=0),t+L(B()*((+e||0)-t+1))},ut.range=function(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var i=-1,r=N(0,Math.ceil((e-t)/n)),s=Array(r);++i<r;)s[i]=t,t+=n;return s},ut.reduce=oe,ut.reduceRight=ae,ut.reject=le,ut.rest=me,ut.result=function(t,e){if(!t)return null;var n=t[e];return At(n)?t[e]():n},ut.shuffle=function(t){if(!t)return[];for(var e,n=-1,i=t.length,r=Array(i);++n<i;)e=L(B()*(n+1)),r[n]=r[e],r[e]=t[n];return r},ut.size=function(t){if(!t)return 0;var e=t.length;return e===+e?e:Vt(t).length},ut.some=ce,ut.sortBy=ue,ut.sortedIndex=ge,ut.tap=function(t,e){return e(t),t},ut.template=_e,ut.throttle=function(n,i){var r,s,o,a,l=0;function c(){l=new Date,a=null,s=n.apply(o,r)}return function(){var t=new Date,e=i-(t-l);return r=arguments,o=this,e<=0?(l=t,s=n.apply(o,r)):a||(a=X(c,e)),s}},ut.times=function(t,e,n){var i=-1,r=Array(t||0);if(n)for(;++i<t;)r[i]=e.call(n,i);else for(;++i<t;)r[i]=e(i);return r},ut.toArray=function(t){if(!t)return[];var e=t.length;return e===+e?(J?P.call(t)==U:"string"==typeof t)?t.split(""):$.call(t):Yt(t)},ut.unescape=function(t){return null==t?"":(t+"").replace(u,Et)},ut.union=function(){for(var t=-1,e=[],n=C.apply(e,arguments),i=n.length;++t<i;)pe(e,n[t])<0&&e.push(n[t]);return e},ut.uniq=ve,ut.uniqueId=function(t){var e=i++;return t?t+e:e},ut.values=Yt,ut.where=he,ut.without=function(t){var e=[];if(!t)return e;for(var n=-1,i=t.length,r=kt(arguments,1,20);++n<i;)r(t[n])||e.push(t[n]);return e},ut.wrap=function(e,n){return function(){var t=[e];return arguments.length&&M.apply(t,arguments),n.apply(this,t)}},ut.zip=function(t){if(!t)return[];for(var e=-1,n=fe(se(arguments,"length")),i=Array(n);++e<n;)i[e]=se(arguments,e);return i},ut.all=Zt,ut.any=ce,ut.collect=re,ut.detect=te,ut.drop=me,ut.each=ee,ut.foldl=oe,ut.foldr=ae,ut.head=de,ut.include=Kt,ut.inject=oe,ut.methods=Rt,ut.select=Qt,ut.tail=me,ut.take=de,ut.unique=ve,ut._iteratorTemplate=dt,ut._shimKeys=Ot,ht.prototype=ut.prototype,xe(ut),ht.prototype.chain=function(){return this.__chain__=!0,this},ht.prototype.value=function(){return this.__wrapped__},ee(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];ht.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),s&&0===t.length&&delete t[0],this.__chain__&&((t=new ht(t)).__chain__=!0),t}}),ee(["concat","join","slice"],function(t){var n=c[t];ht.prototype[t]=function(){var t=this.__wrapped__,e=n.apply(t,arguments);return this.__chain__&&((e=new ht(e)).__chain__=!0),e}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=ut,define("lodash",[],function(){return ut})):e?"object"==typeof module&&module&&module.exports==e?(module.exports=ut)._=ut:e._=ut:t._=ut}(this),define("libs/backbone",["lodash","jquery"],function(t,e){var n={};return n._=t,n.jQuery=e,function(){var a,t=this,e=t.Backbone,n=[],p=n.push,r=n.slice,f=n.splice;(a="undefined"!=typeof exports?exports:t.Backbone={}).VERSION="1.0.0";var m=t._;a.$=t.jQuery||t.Zepto||t.ender||t.$,a.noConflict=function(){return t.Backbone=e,this},a.emulateHTTP=!1,a.emulateJSON=!1;var i=a.Events={on:function(t,e,n){return h(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!h(this,"once",t,[e,n])||!e)return this;var i=this,r=m.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,s,o,a,l,c,u;if(!this._events||!h(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,l=(o=t?[t]:m.keys(this._events)).length;a<l;a++)if(t=o[a],s=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,u=s.length;c<u;c++)r=s[c],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!h(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&s(n,e),i&&s(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;for(var s in"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t),i)i[s].off(e,n,this),r&&delete this._listeners[s];return this}},l=/\s+/,h=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var s=n.split(l),o=0,a=s.length;o<a;o++)t[e].apply(t,[s[o]].concat(i));return!1}return!0},s=function(t,e){var n,i=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,s,o,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}};m.each({listenTo:"on",listenToOnce:"once"},function(r,t){i[t]=function(t,e,n){var i=this._listeners||(this._listeners={});return"object"==typeof e&&(n=this),(i[t._listenerId||(t._listenerId=m.uniqueId("l"))]=t)[r](e,n,this),this}}),i.bind=i.on,i.unbind=i.off,m.extend(a,i);var o=a.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=m.uniqueId("c"),this.attributes={},m.extend(this,m.pick(e,c)),e.parse&&(i=this.parse(i,e)||{}),(n=m.result(this,"defaults"))&&(i=m.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},c=["url","urlRoot","collection"];m.extend(o.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return m.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return m.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,s,o,a,l,c;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;for(i in s=n.unset,a=n.silent,o=[],l=this._changing,this._changing=!0,l||(this.changed={}),c=this.attributes,this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[i],m.isEqual(c[i],e)||o.push(i),s?delete c[i]:c[i]=e;if(!a){o.length&&(this._pending=!0);for(var u=0,h=(n.changes=o).length;u<h;u++)this.trigger("change:"+o[u],this,c[o[u]],n)}if(l)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,m.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,m.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!m.isEmpty(this.changed):m.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&m.clone(this.changed);var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)m.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return m.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?m.clone(e):{}).parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;i&&i(n,t,e),n.trigger("sync",n,t,e)},I(this,e),this.sync("read",this,e)},save:function(t,e,n){var i,r,s,o=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,i&&(!n||!n.wait)&&!this.set(i,n))return!1;if(n=m.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=m.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var a=this,l=n.success;return n.success=function(t){a.attributes=o;var e=a.parse(t,n);if(n.wait&&(e=m.extend(i||{},e)),m.isObject(e)&&!a.set(e,n))return!1;l&&l(a,t,n),a.trigger("sync",a,t,n)},I(this,n),"patch"===(r=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=i),s=this.sync(r,this,n),i&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?m.clone(e):{};var n=this,i=e.success,r=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(t){(e.wait||n.isNew())&&r(),i&&i(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;I(this,e);var t=this.sync("delete",this,e);return e.wait||r(),t},url:function(){var t=m.result(this,"urlRoot")||m.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},m.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=m.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,m.extend(e||{},{validationError:n})),!1)}});m.each(["keys","values","pairs","invert","pick","omit"],function(e){o.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),m[e].apply(m,t)}});var u=a.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,m.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},d={add:!0,merge:!1,remove:!1};m.extend(u.prototype,i,{model:o,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,m.defaults(e||{},d))},remove:function(t,e){var n,i,r,s;for(e||(e={}),n=0,i=(t=m.isArray(t)?t.slice():[t]).length;n<i;n++)(s=this.get(t[n]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s));return this},set:function(t,e){var n,i,r,s,o;(e=m.defaults(e||{},g)).parse&&(t=this.parse(t,e)),m.isArray(t)||(t=t?[t]:[]);var a=e.at,l=this.comparator&&null==a&&!1!==e.sort,c=m.isString(this.comparator)?this.comparator:null,u=[],h=[],d={};for(n=0,i=t.length;n<i;n++)(r=this._prepareModel(t[n],e))&&((s=this.get(r))?(e.remove&&(d[s.cid]=!0),e.merge&&(s.set(r.attributes,e),l&&!o&&s.hasChanged(c)&&(o=!0))):e.add&&(u.push(r),r.on("all",this._onModelEvent,this),null!=(this._byId[r.cid]=r).id&&(this._byId[r.id]=r)));if(e.remove){for(n=0,i=this.length;n<i;++n)d[(r=this.models[n]).cid]||h.push(r);h.length&&this.remove(h,e)}if(u.length&&(l&&(o=!0),this.length+=u.length,null!=a?f.apply(this.models,[a,0].concat(u)):p.apply(this.models,u)),o&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=u.length;n<i;n++)(r=u[n]).trigger("add",r,this,e);return o&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;n<i;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,m.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,m.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(n,t){return m.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),m.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(m.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=m.isFunction(e)?e:function(t){return t.get(e)};return m.sortedIndex(this.models,t,i,n)},pluck:function(t){return m.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?m.clone(n):{}).parse&&(n.parse=!0);var i=n.success,r=this;return n.success=function(t){var e=n.reset?"reset":"set";r[e](t,n),i&&i(r,t,n),r.trigger("sync",r,t,n)},I(this,n),this.sync("read",this,n)},create:function(e,n){if(n=n?m.clone(n):{},!(e=this._prepareModel(e,n)))return!1;n.wait||this.add(e,n);var i=this,r=n.success;return n.success=function(t){n.wait&&i.add(e,n),r&&r(e,t,n)},e.save(null,n),e},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof o)return t.collection||(t.collection=this),t;e||(e={});var n=new(e.collection=this).model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});m.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){u.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),m[e].apply(m,t)}});m.each(["groupBy","countBy","sortBy"],function(i){u.prototype[i]=function(e,t){var n=m.isFunction(e)?e:function(t){return t.get(e)};return m[i](this.models,n,t)}});var v=a.View=function(t){this.cid=m.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,y=["model","collection","el","id","attributes","className","tagName","events"];m.extend(v.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a.$?t:a.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=m.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(m.isFunction(n)||(n=this[t[e]]),n){var i=e.match(b),r=i[1],s=i[2];n=m.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=m.extend({},m.result(this,"options"),t)),m.extend(this,m.pick(t,y)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(m.result(this,"el"),!1);else{var t=m.extend({},m.result(this,"attributes"));this.id&&(t.id=m.result(this,"id")),this.className&&(t.class=m.result(this,"className"));var e=a.$("<"+m.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),a.sync=function(t,e,n){var i=w[t];m.defaults(n||(n={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var r={type:i,dataType:"json"};if(n.url||(r.url=m.result(e,"url")||L()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){r.type="POST",n.emulateJSON&&(r.data._method=i);var s=n.beforeSend;n.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),s)return s.apply(this,arguments)}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=n.xhr=a.ajax(m.extend(r,n));return e.trigger("request",e,o,n),o};var w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var x=a.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,C=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;m.extend(x.prototype,i,{initialize:function(){},route:function(n,i,r){m.isRegExp(n)||(n=this._routeToRegExp(n)),m.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return a.history.route(n,function(t){var e=s._extractParameters(n,t);r&&r.apply(s,e),s.trigger.apply(s,["route:"+i].concat(e)),s.trigger("route",i,e),a.history.trigger("route",s,i,e)}),this},navigate:function(t,e){return a.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=m.result(this,"routes");for(var t,e=m.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(_,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return m.map(n,function(t){return t?decodeURIComponent(t):null})}});var M=a.History=function(){this.handlers=[],m.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,P=/msie [\w.]+/,E=/\/$/;M.started=!1,m.extend(M.prototype,i,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(E,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(T,"")},start:function(t){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=m.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,i=P.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace($,"/"),i&&this._wantsHashChange&&(this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?a.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=this.location,s=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&r.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t);return m.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!M.started)return!1;if(e&&!0!==e||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),a.history=new M;o.extend=u.extend=x.extend=v.extend=M.extend=function(t,e){var n,i=this;n=t&&m.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},m.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&m.extend(n.prototype,t),n.__super__=i.prototype,n};var L=function(){throw new Error('A "url" property or function must be specified')},I=function(e,n){var i=n.error;n.error=function(t){i&&i(e,t,n),e.trigger("error",e,t,n)}}}.call(n),n.Backbone}),define("libs/etch",["libs/backbone"],function(r){"use strict";var c={},u={},h={};function i(t){var e=t.target.dataset.value;return null==e&&($target=$(t.target),e=$target.parent()[0].dataset.value),e}return h.VERSION="0.6.2",h.config={selector:".editable",buttonClasses:{default:["save"],all:["bold","italic","underline","unordered-list","ordered-list","link","clear-formatting","save"],title:["bold","italic","underline","save"]}},c.Editor=r.Model.extend({constructor:function(){r.Model.prototype.constructor.apply(this,arguments)}}),u.Editor=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,arguments)},initialize:function(){this.$el=$(this.el),_.bindAll(this,"changeButtons","changePosition","changeEditable","insertImage","_editableModelChanged"),this.model.bind("change:buttons",this.changeButtons,this),this.model.bind("change:position",this.changePosition,this),this.model.bind("change:editable",this.changeEditable,this),this.model.bind("caretUpdated",this._caretUpdated,this),this.model.bind("spectrum:hide",this._hideSpectrum,this),this.model.on("change:editableModel",this._editableModelChanged,this),this._editableModelChanged(this.model,this.model.get("editableModel")),this.changeEditable()},events:{"click .etch-bold":"toggleBold","click .etch-italic":"toggleItalic","click .etch-underline":"toggleUnderline","click .etch-heading":"toggleHeading","click .etch-unordered-list":"toggleUnorderedList","click .etch-justify-left":"justifyLeft","click .etch-justify-center":"justifyCenter","click .etch-justify-right":"justifyRight","click .etch-ordered-list":"toggleOrderedList","click .etch-link":"toggleLink","click .etch-image":"getImage","click .etch-save":"save","click .etch-clear-formatting":"clearFormatting",'click [data-option="fontSize"]':"setFontSize",'click [data-option="fontFamily"]':"setFontFamily"},_editableModelChanged:function(t,e){null!=this._lastEditableModel&&this._lastEditableModel.off(null,null,this),(this._lastEditableModel=e).on("change:size",this._fontSizeChanged,this)},_hideSpectrum:function(){this.$colorChooser.spectrum("hide")},_caretUpdated:function(){var t=$(function(t,e){var n,i,r=null,s=t.document;{if(s.selection)return(n=s.selection.createRange()).collapse(e),n.parentElement();t.getSelection&&0<(i=t.getSelection()).rangeCount&&(n=i.getRangeAt(0),3===(r=n[e?"startContainer":"endContainer"]).nodeType&&(r=r.parentNode))}return r}(window)),e=t.attr("color"),n=t.attr("face");e=e||t.parents("font").attr("color")||"#333",(n=n||t.parents("font").attr("face")||"Lato")&&(n=n.split(",")[0]),this.$fontFamilyReadout.html(n),this.$colorChooser.spectrum("set",e)},changeEditable:function(){this.setButtonClass()},setButtonClass:function(){var t=this.model,e=t.get("editable").attr("data-button-class")||"default";t.set({buttons:h.config.buttonClasses[e]})},_fontSizeChanged:function(t,e){this.$fontSizeReadout.text(e)},changeButtons:function(){console.log("Change btns"),this.$el.empty();var n=this;if(this.model.get("buttons").length){var i=n.$el;_.each(this.model.get("buttons"),function(t){if("<group>"==t)i=h.groupElFactory(),n.$el.append(i);else if("</group>"==t)i=n.$el;else{var e=h.buttonElFactory(t);i.append(e)}}),$(this.el).show("fast");var t=this.$el.find(".color-chooser");if(0<t.length){t.spectrum({color:"#333",showSelectionPalette:!0,localStorageKey:"strut.colorChooser",showPalette:!0,showInitial:!0,showInput:!0,palette:[],clickoutFiresChange:!0,theme:"sp-dark",move:function(t){document.execCommand("foreColor",!1,t.toHexString())},change:function(t){r.trigger("etch:state",{color:t.toHexString()})}});var e=function(t){t.preventDefault()};$(".sp-replacer").mousedown(e),$(".sp-container").mousedown(e),t.mousedown(e),t.find("div").css("backgroundColor","#333")}this.$el.find(".dropdown-toggle").dropdown(),this.$fontSizeReadout=this.$el.find(".fontSizeReadout"),this.$colorChooser=t,this.$fontFamilyReadout=this.$el.find(".fontFamilyBtn > .text")}else $(this.el).hide()},changePosition:function(){var t=this.model.get("position");this.$el.animate({top:t.y,left:t.x},{queue:!1,duration:300})},wrapSelection:function(t,e,n){var i=t===Range?t:t.getRangeAt(0),r=document.createElement(e);i.surroundContents(r)},clearFormatting:function(t){t.preventDefault(),document.execCommand("removeFormat",!1,null)},setFontFamily:function(t){t.preventDefault();var e=i(t);document.execCommand("fontName",!1,e),e=e.substr(e.indexOf("'")+1,e.lastIndexOf("'")-1),this.$el.find(".fontFamilyBtn .text").text(e),r.trigger("etch:state",{face:e})},setFontSize:function(t){var e=this.model.get("editableModel"),n=i(t);e.set("size",n|=0),this.$el.find(".fontSizeBtn .text").text(n),r.trigger("etch:state",{size:n})},toggleBold:function(t){t.preventDefault(),document.execCommand("bold",!1,null)},toggleItalic:function(t){t.preventDefault(),document.execCommand("italic",!1,null)},toggleUnderline:function(t){t.preventDefault(),document.execCommand("underline",!1,null)},toggleHeading:function(t){t.preventDefault();var e=window.getSelection().getRangeAt(0),n=e.commonAncestorContainer.parentElement;if($(n).is("h3"))$(n).replaceWith(n.textContent);else{var i=document.createElement("h3");e.surroundContents(i)}},urlPrompt:function(t){var e=prompt("Enter a url","http://");/^((http|https)...)/.test(e)?t(e):t("http://"+e)},toggleLink:function(t){t.preventDefault();var e=window.getSelection().getRangeAt(0);"A"===e.startContainer.parentNode.tagName||"A"===e.endContainer.parentNode.tagName?document.execCommand("unlink",!1,null):this.urlPrompt(function(t){document.execCommand("createLink",!1,t),window.getSelection().getRangeAt(0).startContainer.parentNode.setAttribute("target","_blank")})},toggleUnorderedList:function(t){t.preventDefault(),document.execCommand("insertUnorderedList",!1,null)},toggleOrderedList:function(t){t.preventDefault(),document.execCommand("insertOrderedList",!1,null)},justifyLeft:function(t){t.preventDefault(),document.execCommand("justifyLeft",!1,null)},justifyCenter:function(t){t.preventDefault(),document.execCommand("justifyCenter",!1,null)},justifyRight:function(t){t.preventDefault(),document.execCommand("justifyRight",!1,null)},getImage:function(t){t.preventDefault(),this.startUploader(this.insertImage)},startUploader:function(e){var t=new c.ImageUploader,n=new u.ImageUploader({model:t});t._imageCallback=function(t){n.startCropper(t,e)},this._savedRange=window.getSelection().getRangeAt(0),$("body").append(n.render().el)},insertImage:function(t){var e=window.getSelection();e.removeAllRanges(),e.addRange(this._savedRange);var n={editable:this.model.get("editable"),editableModel:this.model.get("editableModel")};_.extend(n,t);var i=new c.EditableImage(n),r=new u.EditableImage({model:i});this._savedRange.insertNode($(r.render().el).addClass("etch-float-left")[0])},save:function(t){t.preventDefault(),this.model.get("editableModel").trigger("save")}}),_.extend(h,{models:c,views:u,collections:{},triggerCaret:function(){$(".etch-editor-panel").data("model").trigger("caretUpdated")},editableInit:function(t,e){t.stopPropagation();var n=t.target||t.srcElement,i=$(n).etchFindEditable(),r=$(".etch-editor-panel"),s=r.data("model");if(r.size())i[0]!==s.get("editable")[0]&&s.set({editable:i,editableModel:this.model}),r.css("display","block");else{r=$('<div class="etch-editor-panel">');var o={editable:i,editableModel:this.model};document.body.appendChild(r[0]),r.etchInstantiate({classType:"Editor",attrs:o}),s=r.data("model")}try{document.execCommand("StyleWithCSS",!1,!1)}catch(t){t.message}if(c.EditableImage){var a=i.find("img");if(a.size()){var l={editable:i,editableModel:this.model};a.each(function(){var t=$(this);if(!t.data("editableImageModel")){var e=new c.EditableImage(l);new u.EditableImage({model:e,el:this,tagName:this.tagName});t.data("editableImageModel",e)}})}}$("body").bind("mousedown.editor",function(t){var e=t.target||t.srcElement;$(e).not(".sp-container *, .colorpicker *, .etch-editor-panel, .etch-editor-panel *, .etch-image-tools, .etch-image-tools *").size()&&(r.css("display","none"),s.trigger("spectrum:hide",null),c.EditableImage&&(i.find("img").unbind("mouseenter"),$(h.config.selector+" img").data("editableImageModel",!1)),$(this).unbind("mousedown.editor"))}),this.model.trigger("change:size",this.model,this.model.get("size"),{}),s.set({position:{x:t.pageX-15,y:e||t.pageY-80}})}}),$.fn.etchInstantiate=function(r,s){return this.each(function(){var t=$(this);r||(r={});var e={el:this,attrs:{}};_.extend(e,r);var n=new c[e.classType](e.attrs,e);if(_.isFunction(u[e.classType]))var i=new u[e.classType]({model:n,el:this,tagName:this.tagName});t.data({model:n}),t.data({view:i}),_.isFunction(s)&&s({model:n,view:i})})},h.buttonElFactory=function(t){return $('<a href="#" class="etch-editor-button etch-'+t+'" title="'+t.replace("-"," ")+'"><span></span></a>')},$.fn.etchFindEditable=function(){var t=$(this);return t.is(h.config.selector)?t:t.closest(h.config.selector)},h}),define("css",[],function(){var r=void 0;if("undefined"!=typeof process&&"undefined"!=typeof nodeRequire){var s=nodeRequire("fs");r=nodeRequire("path");var o=null}function a(t){if("undefined"==typeof document)return e=t,n=s.readFileSync("app/"+e,"utf8"),void s.appendFileSync(o,n+"\n");var e,n;if(!isOptimized){var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,document.getElementsByTagName("head")[0].appendChild(i)}}return{load:function(t,e,n,i){r&&!o&&(s.existsSync("dist")||s.mkdirSync("dist"),s.existsSync("dist/styles")||s.mkdirSync("dist/styles"),o="dist/styles/built.css"),a(t),n(null)}}}),define("strut/etch_extension/main",["libs/etch","css!styles/etch_extension/EtchOverrides.css"],function(t){"use strict";_.extend(t.config.buttonClasses,{default:["<group>","bold","italic","</group>","<group>","unordered-list","ordered-list","</group>","<group>","justify-left","justify-center","</group>","<group>","link","</group>","font-family","font-size","<group>","color","</group>","<group>","clear-formatting","</group>"]});var n=["link","clear-formatting","ordered-list","unordered-list"];return t.buttonElFactory=function(t){var e={button:t,title:t.replace("-"," "),display:t.substring(0,1).toUpperCase()};switch(-1<n.indexOf(t)&&(e.display=""),t){case"font-size":return JST["strut.etch_extension/fontSizeSelection"](e);case"font-family":return JST["strut.etch_extension/fontFamilySelection"](e);case"color":return JST["strut.etch_extension/colorChooser"](e);default:return-1!==t.indexOf("justify")?(e.icon=t.substring(t.indexOf("-")+1,t.length),JST["strut.etch_extension/align"](e)):JST["strut.etch_extension/defaultButton"](e)}},t.groupElFactory=function(){return $('<div class="btn-group">')},{initialize:function(){}}}),define("tantaman/web/widgets/FileBrowser",["libs/backbone","css!styles/widgets/fileBrowser.css"],function(n,t){return n.View.extend({events:{destroyed:"dispose","click li[data-filename]":"_fileClicked","click button.close":"_deleteClicked","dblclick li[data-filename]":"_fileChosen"},className:"fileBrowser",initialize:function(){this.render=this.render.bind(this),this.storageInterface.on("change:currentProvider",this.render),this.template=JST["tantaman.web.widgets/FileBrowser"],this.renderListing=this.renderListing.bind(this)},render:function(){return this.$el.html('<div class="browserContent">'),this.storageInterface.providerReady(this.$el)?this.renderListing():this.storageInterface.activateProvider(this.$el,this.renderListing),this},dispose:function(){this.storageInterface.off(null,null,this)},_fileClicked:function(t){this.$fileName.val(t.currentTarget.dataset.filename),this.$el.find(".active").removeClass("active"),$(t.currentTarget).addClass("active")},_fileChosen:function(t){this.$el.trigger("fileChosen",t.currentTarget.dataset.fileName)},_deleteClicked:function(t){var e=$(t.currentTarget).parent().parent();return this.storageInterface.remove(e.attr("data-filename")),e.remove(),t.stopPropagation(),!1},renderListing:function(){var n=this;this.storageInterface.listPresentations("/",function(t,e){e?n.$el.find(".browserContent").html(e):n.$el.find(".browserContent").html(n.template({files:t})),n.$fileName=n.$el.find(".fileName")})},fileName:function(){return this.$fileName.val()},constructor:function(t,e){this.storageInterface=t,this.editorModel=e,n.View.prototype.constructor.call(this)}})}),define("strut/storage/view/StorageModal",["libs/backbone","tantaman/web/widgets/FileBrowser","css!styles/storage/storageModal.css"],function(t,e){return t.View.extend({className:"storageModal modal hide",events:{"click a[data-provider]":"_providerSelected","click .ok":"_okClicked",destroyed:"dispose"},initialize:function(){this.storageInterface=this.options.storageInterface,this.editorModel=this.options.editorModel,delete this.options.storageInterface,delete this.options.editorModel,this.template=JST["strut.storage/StorageModal"],this.storageInterface.on("change:providers",this.render,this),this.storageInterface.on("change:currentProvider",this._providerChanged,this),this.fileBrowser=new e(this.storageInterface,this.editorModel)},title:function(t){this.$el.find(".title").html(t)},dispose:function(){this.storageInterface.off(null,null,this)},render:function(){var t=this.storageInterface.providerNames();this.$el.html(this.template({title:this.__title(),tabs:t})),this._providerChanged(),this.$el.find(".tabContent").append(this.fileBrowser.render().$el)},show:function(t,e){this.actionHandler=t,this.title(e),this.$el.modal("show"),this.fileBrowser.render()},_providerChanged:function(){this.$lastProviderTab&&this.$lastProviderTab.removeClass("active"),this.$lastProviderTab=this.$el.find('[data-provider="'+this.storageInterface.currentProviderId()+'"]').parent(),this.$lastProviderTab.addClass("active")},__title:function(){return"none"},_okClicked:function(){if(this.actionHandler){if(""==this.fileBrowser.fileName())return;var n=this;this.actionHandler(this.storageInterface,this.editorModel,this.fileBrowser.fileName(),function(t,e){e||n.$el.modal("hide")})}},_providerSelected:function(t){this.storageInterface.selectProvider(t.target.dataset.provider)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/storage/model/ActionHandlers",[],function(){return{save:function(t,e,n,i){t.savePresentation(n,e.exportPresentation(n),i)},open:function(t,n,e,i){t.savePresentation(n.fileName(),n.exportPresentation(n.fileName()),function(){t.load(e,function(t,e){e?(console.log(e),console.log(e.stack)):n.importPresentation(t),i(null,e)})})},new_:function(t){t.newPresentation()}}}),define("tantaman/web/widgets/ErrorModal",[],function(){return{show:function(t){console.log(t)}}}),define("strut/storage/view/SaveMenuItem",["libs/backbone","../model/ActionHandlers","tantaman/web/widgets/ErrorModal","lang"],function(i,t,e,n){return i.View.extend({tagName:"li",events:{click:"save"},constructor:function(t,e,n){i.View.prototype.constructor.call(this),this.model=e,this.saveAsModal=t,this.storageInterface=n},save:function(){fileName=this.model.fileName(),null==fileName?this.saveAsModal.show(t.save,n.save_as):t.save(this.storageInterface,this.model,fileName,e.show)},render:function(){return this.$el.html("<a>"+n.save+"</a>"),this}})}),define("tantaman/web/storage/StorageProvidersWrapper",["libs/backbone"],function(t){"use strict";function e(t){this.registry=t,this.registry.on("registered:tantaman.web.StorageProvider",this._providerRegistered,this),this._getProviders(),this._updateCurrentProvider()}return _.extend(e.prototype,t.Events,{_currentProviderId:null,_providerRegistered:function(t){var e=t.service();this.providers[e.id]=e,null==this._currentProviderId&&(this._currentProviderId=e.id),this.trigger("change:providers.push",this.providers,e),this.trigger("change:providers",this.providers,e)},_getProviders:function(){var t=this.registry.get("tantaman.web.StorageProvider"),n={};t.forEach(function(t){var e=t.service();n[e.id]=e,null==this._currentProviderId&&(this._currentProviderId=e.id)},this),this.providers=n},selectProvider:function(t){t!=this._currentProviderId&&(this.currentProvider().bg(),this._currentProviderId=t,this.trigger("change:currentProvider"))},providerNames:function(){var t=[];for(var e in this.providers)t.push({name:this.providers[e].name,id:e});return t},currentProvider:function(){return this.providers[this._currentProviderId]},_updateCurrentProvider:function(){window.sessionMeta.lastProvider&&(this._currentProviderId=window.sessionMeta.lastProvider)}}),e}),define("strut/storage/model/StorageInterface",["tantaman/web/storage/StorageProvidersWrapper"],function(e){"use strict";function t(t){this._providers=new e(t)}return t.prototype={providerNames:function(){return this._providers.providerNames()},providerReady:function(t){return this.currentProvider().ready(t)},activateProvider:function(t,e){this.currentProvider().activate(t,e)},selectProvider:function(t){this._providers.selectProvider(t)},currentProvider:function(){return this._providers.currentProvider()},currentProviderId:function(){return this._providers._currentProviderId},on:function(){return this._providers.on.apply(this._providers,arguments)},store:function(t,e,n){return this.currentProvider().setContents(t,e,n),this},load:function(t,e){return this.currentProvider().getContents(t,e),this},remove:function(t,e){return this.currentProvider().rm(t,e),this},list:function(t,e){return this.currentProvider().ls(t,/.*/,e),this},listPresentations:function(t,e){return this.currentProvider().ls(t,/.*\.strut$/,e),this},savePresentation:function(t,e,n){var i=t.indexOf(".strut");-1!=i&&i+".strut".length==t.length||(t+=".strut"),window.sessionMeta.lastPresentation=t,this.store(t,e,n)}},t}),define("tantaman/web/widgets/MenuItem",[],function(){function t(t){this.$el=$("<li><a>"+t.title+" "+(t.hotkey?'<span class="label pull-right">'+t.hotkey+"</span>":"")+"</a></li>"),this.$el.click(function(){t.modal?t.modal.show(t.handler,t.title):t.handler(t.model)})}return t.prototype={render:function(){return this}},t}),define("strut/storage/main",["./view/StorageModal","./view/SaveMenuItem","./model/StorageInterface","./model/ActionHandlers","tantaman/web/widgets/MenuItem","lang"],function(n,i,e,r,s,o){"use strict";var a=null,l=null,c=$("#modals"),u={createMenuItems:function(t){var e=[];return null==l&&((l=new n({editorModel:t,storageInterface:a})).render(),c.append(l.$el)),e.push(new s({title:o.new_,handler:r.new_,model:t})),e.push(new s({title:o.open,modal:l,handler:r.open})),e.push(new i(l,t,a)),e.push(new s({title:o.save_as,modal:l,handler:r.save})),e.push({$el:$('<li class="divider"></li>'),render:function(){return this}}),e}};return{initialize:function(t){a=new e(t),t.register({interfaces:"strut.LogoMenuItemProvider"},u),t.register({interfaces:"strut.StorageInterface"},a)}}}),define("framework/ServiceCollection",["common/EventEmitter","lodash"],function(i,r){"use strict";var s=function(t){return t};function t(t,e,n){r.extend(this,new i),this._idToItem={},this._lookup=t.normalize(e),this._converter=n||s,this._registry=t,this._register(),this._populateItems()}t.toServiceConverter=function(t){return t.service()};var e=t.prototype=Object.create(Array.prototype);return e._register=function(){this._registry.on("registered",this._serviceRegistered,this),this._registry.on("deregistered",this._serviceDeregistered,this)},e._serviceDeregistered=function(t){t.matches(this._lookup)&&this._handleRemoval(item,t)},e._handleRemoval=function(e,n){e=this._idToItem(n.serviceIdentifier());Array.isArray(e)||(e=[e]),e.forEach(function(t){t=this.indexOf(e);this.splice(t,1),this.emit("deregistered",e,n,t)},this)},e._serviceRegistered=function(t){if(t.matches(this._lookup)){var e=this._converter(t);this._handleAddition(e,t)}},e._populateItems=function(){this._registry.get(this._lookup).forEach(function(t){var e=this._converter(t);this._handleAddition(e,t)},this)},e._handleAddition=function(e,n){this._idToItem[n.serviceIdentifier()]=e,Array.isArray(e)?e.forEach(function(t){this.push(t),this.emit("registered",e,n,t)},this):(this.push(e),this.emit("registered",e,n,this.length-1))},e.dispose=function(){this._registry.off(null,null,this)},t}),define("common/collections/LinkedList",[],function(){return function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.push=function(t){var e;return e={prev:null,next:null,value:t},null!=this.tail?((this.tail.next=e).prev=this.tail,this.tail=e):this.head=this.tail=e,++this.length,this},t.prototype.pop=function(){var t;if(null==this.tail)throw"List is empty";return t=this.tail.value,this.tail===this.head?this.tail=this.head=null:(this.tail=this.tail.prev,this.tail.next=null),--this.length,t},t.prototype.shift=function(){var t;if(null==this.head)throw"List is empty";return t=this.head.value,this.tail===this.head?this.tail=this.head=null:(this.head=this.head.next,this.head.prev=null),--this.length,t},t.prototype.unshift=function(t){var e;return e={prev:null,next:null,value:t},null!=this.head?((this.head.prev=e).next=this.head,this.head=e):this.head=this.tail=e,++this.length,this},t.prototype.first=function(){return this.head.value},t.prototype.last=function(){return this.tail.value},t.prototype.forEach=function(t){var e,n,i;for(e=this.head,n=0,i=[];null!==e;)t(e.value,n++,this),i.push(e=e.next);return i},t}()}),define("tantaman/web/undo_support/Commands",[],function(){var t;return(t=function(t,e){this.commands=t,this.name=e}).prototype={do:function(){this.commands.forEach(function(t){t.do()})},undo:function(){this.commands.reverse().forEach(function(t){t.undo()})}},{CombinedCommand:t}}),define("tantaman/web/undo_support/CmdList",["common/EventEmitter","common/collections/LinkedList","./Commands"],function(e,n,i){return function(){function t(t){this.size=t,this.actions=new n,this.cursor=null,this.recording=!1,this.undoCount=0,_.extend(this,new e)}return t.prototype.clear=function(){this.cursor=null,this.undoCount=null,this.actions=new n},t.prototype.push=function(t){var e;if(!this.recording)return this.actions.length-this.undoCount<this.size?(0<this.undoCount?(e={prev:null,next:null,value:t},this.cursor?(e.prev=this.cursor,this.cursor.next.prev=null,this.cursor.next=e,this.actions.length+=1,this.actions.length=this.actions.length-this.undoCount):(this.actions.head=e,this.actions.length=1),this.actions.tail=e,this.undoCount=0):this.actions.push(t),this.cursor=null):(this.actions.shift(),this.actions.push(t)),this.emit("updated"),this;this.recorded.push(t)},t.prototype.pushdo=function(t){if(!this.recording){var e=t.do();return this.push(t),e}this.recorded.push(t)},t.prototype.record=function(t,e){if(this.recording=!0,this.recorded=[],t(),this.recording=!1,this.recorded.length){var n=new i.CombinedCommand(this.recorded,e);return this.push(n),n}},t.prototype.undoName=function(){var t;return this.undoCount<this.actions.length&&null!=(t=this.cursor||this.actions.tail)?t.value.name:""},t.prototype.redoName=function(){var t;return 0<this.undoCount&&null!=(t=null==this.cursor?this.actions.head:this.cursor.next)?t.value.name:""},t.prototype.undo=function(){return this.undoCount<this.actions.length&&(null==this.cursor&&(this.cursor=this.actions.tail),this.cursor.value.undo(),this.cursor=this.cursor.prev,++this.undoCount,this.emit("updated")),this},t.prototype.redo=function(){return 0<this.undoCount&&(null==this.cursor?this.cursor=this.actions.head:this.cursor=this.cursor.next,this.cursor.value.do(),--this.undoCount,this.emit("updated")),this},t}()}),define("tantaman/web/undo_support/CmdListFactory",["./CmdList"],function(e){"use strict";var i={};return{create:function(t){return new e((t=t||{}).size||20)},managedInstance:function(t,e){var n=i[t];return n||(n=this.create(e),i[t]=n),n}}}),define("tantaman/web/widgets/UndoRedoMenuItem",[],function(){"use strict";function t(t){this.$el=$("<li><a>"+t.title+'<span class="label">'+t.hotkey+"</span></a></li>"),this.options=t,this.$el.click(this._perform.bind(this)),this._sub=t.cmdList.on("updated",this._listUpdated,this)}return t.prototype={render:function(){return this},_listUpdated:function(){var t,e=this.options.cmdList[this.options.action+"Name"]();e?((t=this.$el.find(".label")).html(e),t.removeClass("dispNone")):(t=this.$el.find(".label")).addClass("dispNone")},dispose:function(){this._sub.dispose()},_perform:function(t){this.options.handler()}},t}),define("strut/logo_button/main",["framework/ServiceCollection","tantaman/web/widgets/MenuItem","tantaman/web/undo_support/CmdListFactory","tantaman/web/widgets/UndoRedoMenuItem"],function(e,i,t,r){"use strict";var s,o=t.managedInstance("editor");var n={createMenuItems:function(){var n=[];return s.forEach(function(t){var e;n.push("undo"==(e=t).meta().action||"redo"==e.meta().action?new r({cmdList:o,action:e.meta().action,handler:e.service(),hotkey:e.meta().hotkey,title:e.meta().title}):new i({title:e.meta().title,handler:e.service(),hotkey:e.meta().hotkey})),"redo"==t.meta().action&&n.push({$el:$('<li class="divider"></li>'),render:function(){return this}})}),n.push({$el:$('<li class="divider"></li>'),render:function(){return this}}),n}};return{initialize:function(t){s=new e(t,"strut.editor.glob.action"),t.register({interfaces:"strut.LogoMenuItemProvider"},n)}}}),define("tantaman/web/widgets/Dropdown",["libs/backbone","css!styles/widgets/widgets.css"],function(t,e){function n(t,e,n){this.$el=$('<div class="dropdown btn-group">'),this.el=this.$el[0],n&&n.class&&this.$el.addClass(n.class),this._template=e;var i=this;this.$el.on("destroyed",function(){i.dispose()}),(this._model=t).on&&t.on("change",this._render,this)}return n.prototype={render:function(){var t;return t=this._model.attributes?this._model.attributes:this._model,this.$el.html(this._template(t)),this},dispose:function(){this._model.off&&this._model.off(null,null,this),this.off()}},_.extend(n.prototype,t.Events),n}),define("strut/deck/Utils",[],function(){return{slideSurface:function(t,e){var n;return t&&("bg-default"!=(n=t.get("surface"))&&null!=n||(n=e.slideSurface())),null==n&&(n=e.slideSurface()),n},isImg:function(t){return t&&0==t.indexOf("img:")},getImgUrl:function(t){return"url("+t.substring(4)+")"},slideBackground:function(t,e,n){var i;n=n||{};var r=this.slideSurface(t,e);return t?("bg-default"!=(i=t.get("background"))&&null!=i||(i=e.slideBackground()),"bg-transparent"==i&&(i=r)):i=e.slideBackground(),"bg-default"==i&&n.surfaceForDefault&&(i=r),i==r&&n.transparentForSurface&&(i=""),i==e.slideSurface()&&n.transparentForDeckSurface&&(i=""),i},getCurrentBackgrounds:function(t){return t.attr("class").match(/bg-[^ ]+/g)},getCurrentBackground:function(t){var e=this.getCurrentBackgrounds(t);if(e)return e[0]},removeCurrentBackground:function(e){var t=this.getCurrentBackgrounds(e);return t&&t.forEach(function(t){e.removeClass(t)}),t},applyBackground:function(t,e,n,i){this.removeCurrentBackground(t);var r=this.slideBackground(e,n,i);0==r.indexOf("img:")?t.css("background-image","url("+r.substring(4)+")"):(t.css("background-image",""),t.addClass(r))}}}),define("libs/imgup",[],function(){var t={};return function(t){"use strict";var r="https://api.imgur.com/3/upload";function s(t){(this._xhr=t).onload=n.onload.bind(this),t.upload.onabort=t.onabort=t.upload.onerror=t.onerror=t.ontimeout=n.onerror.bind(this),t.upload.onprogress=n.onprogress.bind(this),this._progressBacks=[],this._errorBacks=[],this._thenBacks=[]}var n={onload:function(){var e=JSON.parse(this._xhr.responseText);e.success?this._thenBacks.forEach(function(t){t(e)}):n.onerror.call(this,e)},onprogress:function(e){var n=e.loaded/e.total;this._progressBacks.forEach(function(t){t(n,e)})},onerror:function(e){this._errorBacks.forEach(function(t){t(e)})}};function e(t){this.clientId=t}s.prototype={cancel:function(){return this._xhr.abort(),this},then:function(t,e){return null!=t&&this._thenBacks.push(t),null!=e&&this._errorBacks.push(e),this},error:function(t){return this._errorBacks.push(t),this},progress:function(t){return this._progressBacks.push(t),this}},e.prototype={upload:function(t){var e=new FormData;e.append("image",t);var n=new XMLHttpRequest;n.open("POST",r),n.setRequestHeader("Authorization","Client-ID "+this.clientId);var i=new s(n);return n.send(e),i}},t.Imgup=e}(t),t.Imgup}),define("tantaman/web/widgets/ItemImportModal",["libs/backbone","libs/imgup"],function(t,e){var n={},i=/[a-z]+:/,r=new e("847de02274cba30"),s={"http:":!0,"http://":!0,"file:":!0,"/":!0,"https://":!0,"https:":!0},o=t.View.extend({className:"itemGrabber modal hide",events:{"click .ok":"okClicked","click div[data-option='browse']":"browseClicked","change input[type='file']":"fileChosen","keyup input[name='itemUrl']":"urlChanged","paste input[name='itemUrl']":"urlChanged",hidden:"hidden"},initialize:function(){this.loadItem=_.debounce(this.loadItem.bind(this),200)},show:function(t){return this.cb=t,this.$el.modal("show")},okClicked:function(){if(!this.$el.find(".ok").hasClass("disabled"))return this.cb(this.src),this.$el.modal("hide")},fileChosen:function(t){var e,n=this;(e=t.target.files[0]).type.match("image.*")&&(this._switchToProgress(),this.item.src="",r.upload(e).progress(function(t){n._updateProgress(t)}).then(function(t){n._switchToThumbnail(),n.$input.val(t.data.link),n.urlChanged({which:-1})},function(){n._updateProgress(0),n._switchToThumbnail(),n.$input.val("Failed to upload image to imgur")}))},browseClicked:function(){return this.$el.find('input[type="file"]').click()},hidden:function(){if(null!=this.$input)return this.item.src="",this.$input.val("")},urlChanged:function(t){if(13===t.which)return this.src=this.$input.val(),this.okClicked();this.loadItem()},loadItem:function(){var t=this.$input.val();if(!(t in s)){var e=i.exec(t);return null!=e&&0==e.index||(t="http://"+t),this.item.src=t,this.src=this.item.src}},_itemLoadError:function(){return this.$el.find(".ok").addClass("disabled"),this.$el.find(".alert").removeClass("dispNone")},_itemLoaded:function(){return this.$el.find(".ok").removeClass("disabled"),this.$el.find(".alert").addClass("dispNone")},_updateProgress:function(t){this.$progressBar.css("width",100*t+"%")},_switchToProgress:function(){this.$thumbnail.addClass("dispNone"),this.$progress.removeClass("dispNone")},_switchToThumbnail:function(){this.$progress.addClass("dispNone"),this.$thumbnail.removeClass("dispNone")},render:function(){var t=this;return this.$el.html(JST["tantaman.web.widgets/ItemImportModal"](this.options)),this.$el.modal(),this.$el.modal("hide"),this.item=this.$el.find(this.options.tag)[0],"video"===this.options.tag&&this.$el.find(".modal-body").prepend("<div class='alert alert-success'>Supports <strong>webm & YouTube</strong>.<br/>Try out: http://www.youtube.com/watch?v=vHUsdkmr-SM</div>"),this.options.ignoreErrors||(this.item.onerror=function(){return t._itemLoadError()},this.item.onload=function(){return t._itemLoaded()}),this.$input=this.$el.find("input[name='itemUrl']"),this.$progress=this.$el.find(".progress"),this.$progressBar=this.$progress.find(".bar"),this.$thumbnail=this.$el.find(".thumbnail"),this.$el},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}});return{get:function(t){var e=n[t.tag];return e||((e=new o(t)).$el.bind("destroyed",function(){delete n[t.tag]}),(n[t.tag]=e).render(),$("#modals").append(e.$el)),e},ctor:o}}),define("strut/themes/ColorChooserModal",["libs/backbone"],function(t){return t.View.extend({className:"modal hide",events:{"click .ok":"_apply"},initialize:function(){this._color="#EEE"},show:function(t){this._cb=t,this.$el.modal("show")},hide:function(){this.$el.modal("hide")},_apply:function(){var t="string"==typeof this._color?this._color:this._color.toHexString();this._$colorChooser.spectrum("set",this._color),this._cb(t),this.hide()},render:function(){var e=this;return this.$el.html(JST["strut.themes/ColorChooserModal"]()),this._$body=this.$el.find(".modal-body"),this._$colorChooser=this.$el.find(".color-chooser"),this._$colorChooser.spectrum({color:this._color,showSelectionPalette:!0,localStorageKey:"strut.colorChooser",showPalette:!0,showInitial:!0,showInput:!0,palette:[],clickoutFiresChange:!0,flat:!0,move:function(t){e._color=t,e._$body.css("background",t.toHexString())}}),this.$el.modal({show:!1}),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/themes/BackgroundProvider",["tantaman/web/widgets/Dropdown","strut/deck/Utils","tantaman/web/widgets/ItemImportModal","./ColorChooserModal","lang"],function(s,i,t,e,n){function r(t){var e=t.backgrounds,n=t.editorModel,i=t.selector,r=t.attr;this._view=new s(e,t.template,{class:"iconBtns group-dropdown"}),this._editorModel=n,this._selector=i,this._attr=r,this._previewBackground=this._previewBackground.bind(this),this._restoreBackground=this._restoreBackground.bind(this),this._setBackground=this._setBackground.bind(this),this._view.$el.on("mouseover",".thumbnail",this._previewBackground),this._view.$el.on("mouseout",".thumbnail",this._restoreBackground),this._view.$el.on("click",".thumbnail",this._setBackground),this._setBackgroundImage=this._setBackgroundImage.bind(this)}var o=t.get({tag:"img",name:n.image,title:n.insert_image,icon:"icon-picture",browsable:!0}),a=new e;return a.render(),$("#modals").append(a.$el),r.prototype={view:function(){return this._view},_previewBackground:function(t){var e=$(this._selector);if(0!=e.length){var n=t.currentTarget.dataset.class;null!=n&&"bg-img"!=n&&"bg-custom"!=n&&("bg-default"==n&&"Background"==this._attr&&(n=$(t.currentTarget).parent().parent().is(".allSlides")?this._editorModel.deck().slideSurface():i.slideBackground(null,this._editorModel.deck(),{transparentForSurface:!0,surfaceForDefault:!0})),this._swapBg(e,n))}},_setBackground:function(t){var e=t.currentTarget.dataset.class,n=$(t.currentTarget).parent().parent().is(".allSlides");if("bg-img"!=e)if("bg-custom"!=e)this._setBgClass(n,e);else{i=this;a.show(function(t){i._setCustomBgColor(n,t)})}else{var i=this;o.show(function(t){i._setBackgroundImage(n,t)})}},_setCustomBgColor:function(t,e){var n=this._editorModel.addCustomBgClassFor(e).klass;this._setBgClass(t,n)},_setBgClass:function(t,e){if(null!=e){var n=this._attr.substring(0,1).toLowerCase()+this._attr.substring(1);""==e&&(e=void 0),this._pickObj(t).set(n,e)}},_pickObj:function(t){return t?this._editorModel.deck():this._editorModel.activeSlide()},_setBackgroundImage:function(t,e){var n=this._pickObj(t);"Background"==this._attr?n.set("background","img:"+e):n.set("surface","img:"+e)},_restoreBackground:function(t){var e;"Background"==this._attr&&(e=i.slideBackground(this._editorModel.activeSlide(),this._editorModel.deck(),{transparentForSurface:!0,surfaceForDefault:!0})),null==e&&(e="slide-editor"!=this._editorModel.get("modeId")?i.slideSurface(null,this._editorModel.deck()):i.slideSurface(this._editorModel.activeSlide(),this._editorModel.deck()));var n=$(this._selector);0!=n.length&&(i.isImg(e)?this._removeLastBg(n):this._swapBg(n,e))},_removeLastBg:function(t){this._lastBg||(this._lastBg=i.getCurrentBackground(t)),this._lastBg&&t.removeClass(this._lastBg)},_swapBg:function(t,e){this._removeLastBg(t),this._lastBg=e,t.addClass(e)},dispose:function(){this._view.dispose()}},r}),define("strut/themes/AvailableBackgrounds",["css!styles/strut.themes/backgroundClasses.css"],function(){return{title:"background",backgrounds:[{klass:"bg-solid-black",description:"Black"},{klass:"bg-solid-light",description:"Light"},{klass:"bg-solid-smoke",description:"Smoke"},{klass:"bg-solid-orange",description:"Orange"},{klass:"bg-solid-yellow",description:"Yellow"},{klass:"bg-solid-grass",description:"Grass"},{klass:"bg-solid-darkgreen",description:"Dark Green"},{klass:"bg-solid-sky",description:"Sky"},{klass:"bg-solid-lavender",description:"Lavender"},{klass:"bg-solid-purple",description:"Purple"},{klass:"bg-solid-salmon",description:"Salmon"}]}}),define("strut/themes/AvailableSurfaces",["css!styles/strut.themes/surfaceClasses.css"],function(){return{title:"surface",backgrounds:[{klass:"bg-surf-grad-black"},{klass:"bg-surf-grad-light"},{klass:"bg-surf-grad-smoke"},{klass:"bg-surf-grad-orange"},{klass:"bg-surf-grad-yellow"},{klass:"bg-surf-grad-grass"},{klass:"bg-surf-grad-darkgreen"},{klass:"bg-surf-grad-sky"},{klass:"bg-surf-grad-lavender"},{klass:"bg-surf-grad-purple"},{klass:"bg-surf-grad-salmon"}]}}),console.log("Loaded mirror"),window.CodeMirror=function(){"use strict";var u=/gecko\/\d/i.test(navigator.userAgent),_=/MSIE \d/.test(navigator.userAgent),k=_&&(null==document.documentMode||document.documentMode<8),x=_&&(null==document.documentMode||document.documentMode<9),C=/WebKit\//.test(navigator.userAgent),t=C&&/Qt\/\d+\.\d+/.test(navigator.userAgent),e=/Chrome\//.test(navigator.userAgent),h=/Opera\//.test(navigator.userAgent),a=/Apple Computer/.test(navigator.vendor),c=/KHTML\//.test(navigator.userAgent),o=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),p=/PhantomJS/.test(navigator.userAgent),d=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),f=d||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),w=d||/Mac/.test(navigator.platform),n=/win/i.test(navigator.platform),i=h&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);i&&(i=Number(i[1])),i&&15<=i&&(C=!(h=!1));var r,s=w&&(t||h&&(null==i||i<12.11)),S=u||_&&!x,m=!1,b=!1;function g(t,n){if(!(this instanceof g))return new g(t,n);for(var e in this.options=n=n||{},Me)!n.hasOwnProperty(e)&&Me.hasOwnProperty(e)&&(n[e]=Me[e]);A(n);var i="string"==typeof n.value?0:n.value.first,r=this.display=function(t,e){var n={},i=n.input=$i("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");C?i.style.width="1000px":i.setAttribute("wrap","off");d&&(i.style.border="1px solid black");i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),n.inputDiv=$i("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=$i("div",[$i("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=$i("div",[$i("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=$i("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=$i("div",null,"CodeMirror-gutter-filler"),n.lineDiv=$i("div",null,"CodeMirror-code"),n.selectionDiv=$i("div",null,null,"position: relative; z-index: 1"),n.cursor=$i("div","","CodeMirror-cursor"),n.otherCursor=$i("div","","CodeMirror-cursor CodeMirror-secondarycursor"),n.measure=$i("div",null,"CodeMirror-measure"),n.lineSpace=$i("div",[n.measure,n.selectionDiv,n.lineDiv,n.cursor,n.otherCursor],null,"position: relative; outline: none"),n.mover=$i("div",[$i("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=$i("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=$i("div",null,null,"position: absolute; height: "+hi+"px; width: 1px;"),n.gutters=$i("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=$i("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=$i("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),k&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0);t.appendChild?t.appendChild(n.wrapper):t(n.wrapper);d&&(i.style.width="0px");C||(n.scroller.draggable=!0);c?(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"):k&&(n.scrollbarH.style.minWidth=n.scrollbarV.style.minWidth="18px");return n.viewOffset=n.lastSizeC=0,n.showingFrom=n.showingTo=e,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new pi,n.cachedCharWidth=n.cachedTextHeight=null,n.measureLineCache=[],n.measureLineCachePos=0,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n}(t,i);E(r.wrapper.CodeMirror=this),n.autofocus&&!f&&Ct(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new pi},$(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var s,o=n.value;"string"==typeof o&&(o=new Mn(n.value,n.mode)),gt(this,En)(this,o),_&&setTimeout(ki(kt,this,!0),20),function(i){var t,n=i.display;ei(n.scroller,"mousedown",gt(i,$t)),ei(n.scroller,"dblclick",_?gt(i,function(t){if(!ai(i,t)){var e=Tt(i,t);if(e&&!Pt(i,t)&&!Mt(i.display,t)){Kn(t);var n=Ce(Ln(i.doc,e.line).text,e);de(i.doc,n.from,n.to)}}}):function(t){ai(i,t)||Kn(t)});ei(n.lineSpace,"selectstart",function(t){Mt(n,t)||Kn(t)}),S||ei(n.scroller,"contextmenu",function(t){Gt(i,t)});function e(){i.state.focused&&setTimeout(ki(Ct,i),0)}function r(){null==t&&(t=setTimeout(function(){t=null,n.cachedCharWidth=n.cachedTextHeight=Ai=null,Q(i),bt(i,ki(yt,i))},100))}function s(t){ai(i,t)||i.options.onDragEvent&&i.options.onDragEvent(i,Yn(t))||Zn(t)}ei(n.scroller,"scroll",function(){n.scroller.clientHeight&&(It(i,n.scroller.scrollTop),At(i,n.scroller.scrollLeft,!0),ii(i,"scroll",i))}),ei(n.scrollbarV,"scroll",function(){n.scroller.clientHeight&&It(i,n.scrollbarV.scrollTop)}),ei(n.scrollbarH,"scroll",function(){n.scroller.clientHeight&&At(i,n.scrollbarH.scrollLeft)}),ei(n.scroller,"mousewheel",function(t){Bt(i,t)}),ei(n.scroller,"DOMMouseScroll",function(t){Bt(i,t)}),ei(n.scrollbarH,"mousedown",e),ei(n.scrollbarV,"mousedown",e),ei(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),ei(window,"resize",r),setTimeout(function t(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(t,5e3):ni(window,"resize",r)},5e3),ei(n.input,"keyup",gt(i,function(t){ai(i,t)||i.options.onKeyEvent&&i.options.onKeyEvent(i,Yn(t))||16==t.keyCode&&(i.doc.sel.shift=!1)})),ei(n.input,"input",ki(xt,i)),ei(n.input,"keydown",gt(i,Wt)),ei(n.input,"keypress",gt(i,Vt)),ei(n.input,"focus",ki(qt,i)),ei(n.input,"blur",ki(Ut,i)),i.options.dragDrop&&(ei(n.scroller,"dragstart",function(t){!function(t,e){if(_&&(!t.state.draggingText||+new Date-Et<100))return Zn(e);if(ai(t,e)||Mt(t.display,e))return;var n=t.getSelection();if(e.dataTransfer.setData("Text",n),e.dataTransfer.setDragImage&&!a){var i=$i("img",null,null,"position: fixed; left: 0; top: 0;");h&&(i.width=i.height=1,t.display.wrapper.appendChild(i),i._top=i.offsetTop),e.dataTransfer.setDragImage(i,0,0),h&&i.parentNode.removeChild(i)}}(i,t)}),ei(n.scroller,"dragenter",s),ei(n.scroller,"dragover",s),ei(n.scroller,"drop",gt(i,Lt)));function o(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=i.getSelection(),bi(n.input))}ei(n.scroller,"paste",function(t){Mt(n,t)||(Ct(i),xt(i))}),ei(n.input,"paste",function(){if(C&&!i.state.fakedLastChar&&!(new Date-i.state.lastMiddleDown<200)){var t=n.input.selectionStart,e=n.input.selectionEnd;n.input.value+="$",n.input.selectionStart=t,n.input.selectionEnd=e,i.state.fakedLastChar=!0}i.state.pasteIncoming=!0,xt(i)}),ei(n.input,"cut",o),ei(n.input,"copy",o),c&&ei(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),Ct(i)})}(this);try{s=document.activeElement==r.input}catch(t){}s||n.autofocus&&!f?setTimeout(ki(qt,this),20):Ut(this),gt(this,function(){for(var t in Se)Se.propertyIsEnumerable(t)&&Se[t](this,n[t],$e);for(var e=0;e<Ie.length;++e)Ie[e](this)})()}function v(t){t.doc.mode=g.getMode(t.options,t.doc.modeOption),t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,q(t,100),t.state.modeGen++,t.curOp&&yt(t)}function y(e){var n=ct(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/ut(e.display)-3);return function(t){return tn(e.doc,t)?0:i?(Math.ceil(t.text.length/r)||1)*n:n}}function M(t){var e=t.doc,n=y(t);e.iter(function(t){var e=n(t);e!=t.height&&Dn(t,e)})}function T(t){var e=Be[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),t.state.disableInput=e.disableInput}function $(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Q(t)}function P(t){E(t),yt(t),setTimeout(function(){O(t)},20)}function E(t){var e=t.display.gutters,n=t.options.gutters;Pi(e);for(var i=0;i<n.length;++i){var r=n[i],s=e.appendChild($i("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&((t.display.lineGutter=s).style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=i?"":"none"}function L(t,e){if(0==e.height)return 0;for(var n,i=e.text.length,r=e;n=Je(r);){r=Ln(t,(s=n.find()).from.line),i+=s.from.ch-s.to.ch}for(r=e;n=Ze(r);){var s=n.find();i-=r.text.length-s.from.ch,i+=(r=Ln(t,s.to.line)).text.length-s.to.ch}return i}function I(t){var n=t.display,i=t.doc;n.maxLine=Ln(i,i.first),n.maxLineLength=L(i,n.maxLine),n.maxLineChanged=!0,i.iter(function(t){var e=L(i,t);e>n.maxLineLength&&(n.maxLineLength=e,n.maxLine=t)})}function A(t){for(var e=!1,n=0;n<t.gutters.length;++n)"CodeMirror-linenumbers"==t.gutters[n]&&(t.lineNumbers?e=!0:t.gutters.splice(n--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function D(t){var e=t.display,n=t.doc.height+Y(e);e.sizer.style.minHeight=e.heightForcer.style.top=n+"px",e.gutters.style.height=Math.max(n,e.scroller.clientHeight-hi)+"px";var i=Math.max(n,e.scroller.scrollHeight),r=e.scroller.scrollWidth>e.scroller.clientWidth+1,s=i>e.scroller.clientHeight+1;s?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=r?Bi(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=i-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),r?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=s?Bi(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),r&&s?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=Bi(e.measure)+"px"):e.scrollbarFiller.style.display="",r&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=Bi(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",o&&0===Bi(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=l?"18px":"12px")}function N(t,e,n){var i=t.scroller.scrollTop,r=t.wrapper.clientHeight;"number"==typeof n?i=n:n&&(i=n.top,r=n.bottom-n.top),i=Math.floor(i-X(t));var s=Math.ceil(i+r);return{from:On(e,i),to:On(e,s)}}function O(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=H(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,r=n+"px",s=e.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,a=s.alignable;o<a.length;++o)a[o].style.left=r;t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function B(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function H(t){return Ii(t.scroller).left-Ii(t.sizer).left}function z(t,e,n,i){for(var r,s=t.display.showingFrom,o=t.display.showingTo,a=N(t.display,t.doc,n);j(t,e,a,i)&&(r=!(i=!1),W(t),D(t),n&&(n=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof n?n:n.top)),!((a=N(t.display,t.doc,n)).from>=t.display.showingFrom&&a.to<=t.display.showingTo));)e=[];return r&&(oi(t,"update",t),t.display.showingFrom==s&&t.display.showingTo==o||oi(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),r}function j(t,e,n,i){var r=t.display,s=t.doc;if(!r.wrapper.clientWidth)return r.showingFrom=r.showingTo=s.first,void(r.viewOffset=0);if(!(!i&&0==e.length&&n.from>r.showingFrom&&n.to<r.showingTo)){(function(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=B(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild($i("div",[$i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,o=r.offsetWidth-s;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(s,i.lineGutter.offsetWidth-o),i.lineNumWidth=i.lineNumInnerWidth+o,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",!0}return!1})(t)&&(e=[{from:s.first,to:s.first+s.size}]);var o=r.sizer.style.marginLeft=r.gutters.offsetWidth+"px";r.scrollbarH.style.left=t.options.fixedGutter?o:"0";var a=1/0;if(t.options.lineNumbers)for(var l=0;l<e.length;++l)e[l].diff&&e[l].from<a&&(a=e[l].from);var c=s.first+s.size,u=Math.max(n.from-t.options.viewportMargin,s.first),h=Math.min(c,n.to+t.options.viewportMargin);if(r.showingFrom<u&&u-r.showingFrom<20&&(u=Math.max(s.first,r.showingFrom)),r.showingTo>h&&r.showingTo-h<20&&(h=Math.min(c,r.showingTo)),b)for(u=Nn(Qe(s,Ln(s,u)));h<c&&tn(s,Ln(s,h));)++h;var d=[{from:Math.max(r.showingFrom,s.first),to:Math.min(r.showingTo,c)}];if(d=d[0].from>=d[0].to?[]:function(t,e){for(var n=0,i=e.length||0;n<i;++n){for(var r=e[n],s=[],o=r.diff||0,a=0,l=t.length;a<l;++a){var c=t[a];r.to<=c.from&&r.diff?s.push({from:c.from+o,to:c.to+o}):r.to<=c.from||r.from>=c.to?s.push(c):(r.from>c.from&&s.push({from:c.from,to:r.from}),r.to<c.to&&s.push({from:r.to+o,to:c.to+o}))}t=s}return t}(d,e),b)for(l=0;l<d.length;++l)for(var p,f=d[l];p=Ze(Ln(s,f.to-1));){var m=p.find().from.line;if(!(m>f.from)){d.splice(l--,1);break}f.to=m}var g=0;for(l=0;l<d.length;++l){(f=d[l]).from<u&&(f.from=u),f.to>h&&(f.to=h),f.from>=f.to?d.splice(l--,1):g+=f.to-f.from}if(i||g!=h-u||u!=r.showingFrom||h!=r.showingTo){d.sort(function(t,e){return t.from-e.from});try{var v=document.activeElement}catch(t){}return g<.7*(h-u)&&(r.lineDiv.style.display="none"),function(u,t,e,h,d){var p=function(t){for(var e=t.display,n={},i={},r=e.gutters.firstChild,s=0;r;r=r.nextSibling,++s)n[t.options.gutters[s]]=r.offsetLeft,i[t.options.gutters[s]]=r.offsetWidth;return{fixedPos:H(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}(u),n=u.display,f=u.options.lineNumbers;h.length||C&&u.display.currentWheelTarget||Pi(n.lineDiv);var m=n.lineDiv,g=m.firstChild;function v(t){var e=t.nextSibling;return C&&w&&u.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),e}var b=h.shift(),y=t;u.doc.iter(t,e,function(t){if(b&&b.to==y&&(b=h.shift()),tn(u.doc,t)){if(0!=t.height&&Dn(t,0),t.widgets&&g&&g.previousSibling)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e];if(n.showIfHidden){var i=g.previousSibling;if(/pre/i.test(i.nodeName)){var r=$i("div",null,null,"position: relative");i.parentNode.replaceChild(r,i),r.appendChild(i),i=r}var s=i.appendChild($i("div",[n.node],"CodeMirror-linewidget"));n.handleMouseEvents||(s.ignoreEvents=!0),F(n,s,i,p)}}}else if(b&&b.from<=y&&b.to>y){for(;g.lineObj!=t;)g=v(g);f&&d<=y&&g.lineNumber&&Li(g.lineNumber,B(u.options,y)),g=g.nextSibling}else{if(t.widgets)for(var o,a=0,l=g;l&&a<20;++a,l=l.nextSibling)if(l.lineObj==t&&/div/i.test(l.nodeName)){o=l;break}var c=function(t,e,n,i,r){var s,o=mn(t,e),a=e.gutterMarkers,l=t.display;if(!(t.options.lineNumbers||a||e.bgClass||e.wrapClass||e.widgets))return o;if(r){for(var c,u=!(r.alignable=null),h=0,d=null,p=r.firstChild;p;p=c)if(c=p.nextSibling,/\bCodeMirror-linewidget\b/.test(p.className)){for(var f=0;f<e.widgets.length;++f){var m=e.widgets[f];if(m.node==p.firstChild){m.above||d||(d=p),F(m,p,r,i),++h;break}}if(f==e.widgets.length){u=!1;break}}else r.removeChild(p);r.insertBefore(o,d),u&&h==e.widgets.length&&((s=r).className=e.wrapClass||"")}s||(s=$i("div",null,e.wrapClass,"position: relative")).appendChild(o);e.bgClass&&s.insertBefore($i("div",null,e.bgClass+" CodeMirror-linebackground"),s.firstChild);if(t.options.lineNumbers||a){var g=s.insertBefore($i("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),s.firstChild);if(t.options.fixedGutter&&(s.alignable||(s.alignable=[])).push(g),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(s.lineNumber=g.appendChild($i("div",B(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var v=0;v<t.options.gutters.length;++v){var b=t.options.gutters[v],y=a.hasOwnProperty(b)&&a[b];y&&g.appendChild($i("div",[y],"CodeMirror-gutter-elt","left: "+i.gutterLeft[b]+"px; width: "+i.gutterWidth[b]+"px"))}}k&&(s.style.zIndex=2);if(e.widgets&&s!=r)for(var f=0,w=e.widgets;f<w.length;++f){var m=w[f],x=$i("div",[m.node],"CodeMirror-linewidget");m.handleMouseEvents||(x.ignoreEvents=!0),F(m,x,s,i),m.above?s.insertBefore(x,t.options.lineNumbers&&0!=e.height?g:o):s.appendChild(x),oi(m,"redraw")}return s}(u,t,y,p,o);if(c!=o)m.insertBefore(c,g);else{for(;g!=o;)g=v(g);g=g.nextSibling}c.lineObj=t}++y});for(;g;)g=v(g)}(t,u,h,d,a),r.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus(),(u!=r.showingFrom||h!=r.showingTo||r.lastSizeC!=r.wrapper.clientHeight)&&(r.lastSizeC=r.wrapper.clientHeight,q(t,400)),r.showingFrom=u,r.showingTo=h,function(t){for(var e,n=t.display,i=n.lineDiv.offsetTop,r=n.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj){if(k){var s=r.offsetTop+r.offsetHeight;e=s-i,i=s}else{var o=Ii(r);e=o.bottom-o.top}var a=r.lineObj.height-e;if(e<2&&(e=ct(n)),.001<a||a<-.001){Dn(r.lineObj,e);var l=r.lineObj.widgets;if(l)for(var c=0;c<l.length;++c)l[c].height=l[c].node.offsetHeight}}}(t),R(t),!0}R(t)}}function R(t){var e=t.display.viewOffset=Bn(t,Ln(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function F(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function W(t){var e,n,i,r=t.display,s=se(t.doc.sel.from,t.doc.sel.to);if(s||t.options.showCursorWhenSelecting?(n=(e=t).display,i=st(e,e.doc.sel.head,"div"),n.cursor.style.left=i.left+"px",n.cursor.style.top=i.top+"px",n.cursor.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",n.cursor.style.display="",i.other?(n.otherCursor.style.display="",n.otherCursor.style.left=i.other.left+"px",n.otherCursor.style.top=i.other.top+"px",n.otherCursor.style.height=.85*(i.other.bottom-i.other.top)+"px"):n.otherCursor.style.display="none"):r.cursor.style.display=r.otherCursor.style.display="none",s?r.selectionDiv.style.display="none":function(r){var t=r.display,e=r.doc,n=r.doc.sel,s=document.createDocumentFragment(),f=t.lineSpace.offsetWidth,m=(i=r.display,Ei(i.measure,$i("pre",null,null,"text-align: left")).appendChild($i("span","x")).offsetLeft);var i;function g(t,e,n,i){e<0&&(e=0),s.appendChild($i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?f-t:n)+"px; height: "+(i-e)+"px"))}function o(n,l,c){var u,h,i=Ln(e,n),d=i.text.length;function p(t,e){return rt(r,re(n,t),"div",i,e)}return function(t,e,n,i){if(!t)return i(e,n,"ltr");for(var r=!1,s=0;s<t.length;++s){var o=t[s];(o.from<n&&o.to>e||e==n&&o.to==e)&&(i(Math.max(o.from,e),Math.min(o.to,n),1==o.level?"rtl":"ltr"),r=!0)}r||i(e,n,"ltr")}(Hn(i),l||0,null==c?d:c,function(t,e,n){var i,r,s,o=p(t,"left");if(t==e)r=s=(i=o).left;else{if(i=p(e-1,"right"),"rtl"==n){var a=o;o=i,i=a}r=o.left,s=i.right}null==l&&0==t&&(r=m),3<i.top-o.top&&(g(r,o.top,null,o.bottom),r=m,o.bottom<i.top&&g(r,o.bottom,null,i.top)),null==c&&e==d&&(s=f),(!u||o.top<u.top||o.top==u.top&&o.left<u.left)&&(u=o),(!h||i.bottom>h.bottom||i.bottom==h.bottom&&i.right>h.right)&&(h=i),r<m+1&&(r=m),g(r,i.top,s-r,i.bottom)}),{start:u,end:h}}if(n.from.line==n.to.line)o(n.from.line,n.from.ch,n.to.ch);else{var a=Ln(e,n.from.line),l=Ln(e,n.to.line),c=Qe(e,a)==Qe(e,l),u=o(n.from.line,n.from.ch,c?a.text.length:null).end,h=o(n.to.line,c?0:null,n.to.ch).start;c&&(u.top<h.top-2?(g(u.right,u.top,null,u.bottom),g(m,h.top,h.left,h.bottom)):g(u.right,u.top,h.left-u.right,u.bottom)),u.bottom<h.top&&g(m,u.bottom,null,h.top)}Ei(t.selectionDiv,s),t.selectionDiv.style.display=""}(t),t.options.moveInputWithCursor){var o=st(t,t.doc.sel.head,"div"),a=Ii(r.wrapper),l=Ii(r.lineDiv);r.inputDiv.style.top=Math.max(0,Math.min(r.wrapper.clientHeight-10,o.top+l.top-a.top))+"px",r.inputDiv.style.left=Math.max(0,Math.min(r.wrapper.clientWidth-10,o.left+l.left-a.left))+"px"}}function V(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",0<t.options.cursorBlinkRate&&(e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate))}}function q(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,ki(U,t))}function U(r){var s=r.doc;if(s.frontier<s.first&&(s.frontier=s.first),!(s.frontier>=r.display.showingTo)){var o,a=+new Date+r.options.workTime,l=De(s.mode,G(r,s.frontier)),c=[];s.iter(s.frontier,Math.min(s.first+s.size,r.display.showingTo+500),function(t){if(s.frontier>=r.display.showingFrom){var e=t.styles;t.styles=un(r,t,l);for(var n=!e||e.length!=t.styles.length,i=0;!n&&i<e.length;++i)n=e[i]!=t.styles[i];n&&(o&&o.end==s.frontier?o.end++:c.push(o={start:s.frontier,end:s.frontier+1})),t.stateAfter=De(s.mode,l)}else dn(r,t,l),t.stateAfter=s.frontier%5==0?De(s.mode,l):null;if(++s.frontier,+new Date>a)return q(r,r.options.workDelay),!0}),c.length&&gt(r,function(){for(var t=0;t<c.length;++t)yt(this,c[t].start,c[t].end)})()}}function G(n,i,t){var r=n.doc,s=n.display;if(!r.mode.startState)return!0;var o=function(t,e,n){for(var i,r,s=t.doc,o=e,a=e-(t.doc.mode.innerMode?1e3:100);a<o;--o){if(o<=s.first)return s.first;var l=Ln(s,o-1);if(l.stateAfter&&(!n||o<=s.frontier))return o;var c=fi(l.text,null,t.options.tabSize);(null==r||c<i)&&(r=o-1,i=c)}return r}(n,i,t),a=o>r.first&&Ln(r,o-1).stateAfter;return a=a?De(r.mode,a):Ne(r.mode),r.iter(o,i,function(t){dn(n,t,a);var e=o==i-1||o%5==0||o>=s.showingFrom&&o<s.showingTo;t.stateAfter=e?De(r.mode,a):null,++o}),a}function X(t){return t.lineSpace.offsetTop}function Y(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function K(t,e,n,i,r){var s=-1;i=i||Z(t,e);for(var o=n;;o+=s){var a=i[o];if(a)break;s<0&&0==o&&(s=1)}return"left"==(r=n<o?"left":o<n?"right":r)&&a.leftSide?a=a.leftSide:"right"==r&&a.rightSide&&(a=a.rightSide),{left:o<n?a.right:a.left,right:n<o?a.left:a.right,top:a.top,bottom:a.bottom}}function J(t,e){for(var n=t.display.measureLineCache,i=0;i<n.length;++i){var r=n[i];if(r.text==e.text&&r.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==r.width&&r.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return r}}function Z(t,e){var n=J(t,e);if(n)return n.measure;var i=function(t,e){var n=t.display,i=_i(e.text.length),r=mn(t,e,i,!0);if(_&&!k&&!t.options.lineWrapping&&100<r.childNodes.length){for(var s=document.createDocumentFragment(),o=r.childNodes.length,a=0,l=Math.ceil(o/10);a<l;++a){for(var c=$i("div",null,null,"display: inline-block"),u=0;u<10&&o;++u)c.appendChild(r.firstChild),--o;s.appendChild(c)}r.appendChild(s)}Ei(n.measure,r);var h=Ii(n.lineDiv),d=[],p=_i(e.text.length),f=r.offsetHeight;x&&n.measure.first!=r&&Ei(n.measure,r);function m(t){var e=t.top-h.top,n=t.bottom-h.top;f<n&&(n=f),e<0&&(e=0);for(var i=d.length-2;0<=i;i-=2){var r=d[i],s=d[i+1];if(!(n<r||s<e)&&(r<=e&&n<=s||e<=r&&s<=n||Math.min(n,s)-Math.max(e,r)>=n-e>>1)){d[i]=Math.min(e,r),d[i+1]=Math.max(n,s);break}}return i<0&&(i=d.length,d.push(e,n)),{left:t.left-h.left,right:t.right-h.left,top:i,bottom:null}}function g(t){t.bottom=d[t.top+1],t.top=d[t.top]}for(var a=0;a<i.length;++a)if(w=i[a]){var v=w,b=null;if(/\bCodeMirror-widget\b/.test(w.className)&&w.getClientRects){1==w.firstChild.nodeType&&(v=w.firstChild);var y=v.getClientRects();1<y.length&&((b=p[a]=m(y[0])).rightSide=m(y[y.length-1]))}b||(b=p[a]=m(Ii(v))),w.measureRight&&(b.right=Ii(w.measureRight).left),w.leftSide&&(b.leftSide=m(Ii(w.leftSide)))}Pi(t.display.measure);for(var w,a=0;a<p.length;++a)(w=p[a])&&(g(w),w.leftSide&&g(w.leftSide),w.rightSide&&g(w.rightSide));return p}(t,e),r=t.display.measureLineCache,s={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:i,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass};return 16==r.length?r[++t.display.measureLineCachePos%16]=s:r.push(s),i}function Q(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function tt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function et(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function nt(t,e,n,i){if(e.widgets)for(var r=0;r<e.widgets.length;++r)if(e.widgets[r].above){var s=an(e.widgets[r]);n.top+=s,n.bottom+=s}if("line"==i)return n;i||(i="local");var o=Bn(t,e);if("local"==i?o+=X(t.display):o-=t.display.viewOffset,"page"==i||"window"==i){var a=Ii(t.display.lineSpace);o+=a.top+("window"==i?0:et());var l=a.left+("window"==i?0:tt());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function it(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=tt(),r-=et();else if("local"==n||!n){var s=Ii(t.display.sizer);i+=s.left,r+=s.top}var o=Ii(t.display.lineSpace);return{left:i-o.left,top:r-o.top}}function rt(t,e,n,i,r){return i||(i=Ln(t.doc,e.line)),nt(t,i,K(t,i,e.ch,null,r),n)}function st(i,t,r,s,o){function a(t,e){var n=K(i,s,t,o,e?"right":"left");return e?n.left=n.right:n.right=n.left,nt(i,s,n,r)}function e(t,e){var n=l[e],i=n.level%2;return t==qi(n)&&e&&n.level<l[e-1].level?(t=Ui(n=l[--e])-(n.level%2?0:1),i=!0):t==Ui(n)&&e<l.length-1&&n.level<l[e+1].level&&(t=qi(n=l[++e])-n.level%2,i=!1),i&&t==n.to&&t>n.from?a(t-1):a(t,i)}s=s||Ln(i.doc,t.line),o||(o=Z(i,s));var l=Hn(s),n=t.ch;if(!l)return a(n);var c=e(n,Ki(l,n));return null!=Ri&&(c.other=e(n,Ri)),c}function ot(t,e,n,i){var r=new re(t,e);return r.xRel=i,n&&(r.outside=!0),r}function at(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return ot(i.first,0,!0,-1);var r=On(i,n),s=i.first+i.size-1;if(s<r)return ot(i.first+i.size-1,Ln(i,s).text.length,!0,1);for(e<0&&(e=0);;){var o=Ln(i,r),a=lt(t,o,r,e,n),l=Ze(o),c=l&&l.find();if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&0<a.xRel))return a;r=c.to.line}}function lt(n,i,r,t,e){var s=e-Bn(n,i),o=!1,a=2*n.display.wrapper.clientWidth,l=Z(n,i);function c(t){var e=st(n,re(r,t),"line",i,l);return o=!0,s>e.bottom?e.left-a:s<e.top?e.left+a:(o=!1,e.left)}var u=Hn(i),h=i.text.length,d=Gi(i),p=Xi(i),f=c(d),m=o,g=c(p),v=o;if(g<t)return ot(r,p,v,1);for(;;){if(u?p==d||p==Zi(i,d,1):p-d<=1){for(var b=t<f||t-f<=g-t?d:p,y=t-(b==d?f:g);Ti.test(i.text.charAt(b));)++b;return ot(r,b,b==d?m:v,y<0?-1:y?1:0)}var w=Math.ceil(h/2),x=d+w;if(u){x=d;for(var _=0;_<w;++_)x=Zi(i,x,1)}var k=c(x);t<k?(p=x,g=k,(v=o)&&(g+=1e3),h=w):(d=x,f=k,m=o,h-=w)}}function ct(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==r){r=$i("pre");for(var e=0;e<49;++e)r.appendChild(document.createTextNode("x")),r.appendChild($i("br"));r.appendChild(document.createTextNode("x"))}Ei(t.measure,r);var n=r.offsetHeight/50;return 3<n&&(t.cachedTextHeight=n),Pi(t.measure),n||1}function ut(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=$i("span","x"),n=$i("pre",[e]);Ei(t.measure,n);var i=e.offsetWidth;return 2<i&&(t.cachedCharWidth=i),i||10}var ht,dt,pt=0;function ft(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++pt},si++||(ri=[])}function mt(t){var e,n,i=t.curOp,r=t.doc,s=t.display;if(t.curOp=null,i.updateMaxLine&&I(t),s.maxLineChanged&&!t.options.lineWrapping&&s.maxLine){var o=function(t,e){var n=!1;if(e.markedSpans)for(var i=0;i<e.markedSpans;++i){var r=e.markedSpans[i];!r.collapsed||null!=r.to&&r.to!=e.text.length||(n=!0)}var s=!n&&J(t,e);if(s)return K(t,e,e.text.length,s.measure,"right").right;var o=mn(t,e,null,!0),a=o.appendChild(Hi(t.display.measure));return Ei(t.display.measure,o),Ii(a).right-Ii(t.display.lineDiv).left}(t,s.maxLine);s.sizer.style.minWidth=Math.max(0,o+3+hi)+"px",s.maxLineChanged=!1;var a=Math.max(0,s.sizer.offsetLeft+s.sizer.offsetWidth-s.scroller.clientWidth);a<r.scrollLeft&&!i.updateScrollPos&&At(t,Math.min(s.scroller.scrollLeft,a),!0)}if(i.updateScrollPos)e=i.updateScrollPos;else if(i.selectionChanged&&s.scroller.clientHeight){var l=st(t,r.sel.head);e=ve(t,l.left,l.top,l.left,l.bottom)}(i.changes.length||i.forceUpdate||e&&null!=e.scrollTop)&&(n=z(t,i.changes,e&&e.scrollTop,i.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!n&&i.selectionChanged&&W(t),i.updateScrollPos?(s.scroller.scrollTop=s.scrollbarV.scrollTop=r.scrollTop=e.scrollTop,s.scroller.scrollLeft=s.scrollbarH.scrollLeft=r.scrollLeft=e.scrollLeft,O(t),i.scrollToPos&&ge(t,ce(t.doc,i.scrollToPos),i.scrollToPosMargin)):e&&function(t){var e=ge(t,t.doc.sel.head,t.options.cursorScrollMargin);if(!t.state.focused)return;var n=t.display,i=Ii(n.sizer),r=null;e.top+i.top<0?r=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1);if(null!=r&&!p){var s="none"==n.cursor.style.display;s&&(n.cursor.style.display="",n.cursor.style.left=e.left+"px",n.cursor.style.top=e.top-n.viewOffset+"px"),n.cursor.scrollIntoView(r),s&&(n.cursor.style.display="none")}}(t),i.selectionChanged&&V(t),t.state.focused&&i.updateInput&&kt(t,i.userSelChange);var c,u=i.maybeHiddenMarkers,h=i.maybeUnhiddenMarkers;if(u)for(var d=0;d<u.length;++d)u[d].lines.length||ii(u[d],"hide");if(h)for(d=0;d<h.length;++d)h[d].lines.length&&ii(h[d],"unhide");if(--si||(c=ri,ri=null),i.textChanged&&ii(t,"change",t,i.textChanged),i.cursorActivity&&ii(t,"cursorActivity",t),c)for(d=0;d<c.length;++d)c[d]()}function gt(i,r){return function(){var t=i||this,e=!t.curOp;e&&ft(t);try{var n=r.apply(t,arguments)}finally{e&&mt(t)}return n}}function vt(n){return function(){var t,e=this.cm&&!this.cm.curOp;e&&ft(this.cm);try{t=n.apply(this,arguments)}finally{e&&mt(this.cm)}return t}}function bt(t,e){var n,i=!t.curOp;i&&ft(t);try{n=e()}finally{i&&mt(t)}return n}function yt(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:n,diff:i})}function wt(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){_t(t),t.state.focused&&wt(t)})}function xt(e){var n=!1;e.display.pollingFast=!0,e.display.poll.set(20,function t(){_t(e)||n?(e.display.pollingFast=!1,wt(e)):(n=!0,e.display.poll.set(60,t))})}function _t(t){var e=t.display.input,n=t.display.prevInput,i=t.doc,r=i.sel;if(!t.state.focused||Fi(e)||St(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var s=e.value;if(s==n&&se(r.from,r.to))return!1;if(_&&!x&&t.display.inputHasSelection===s)return kt(t,!0),!1;var o=!t.curOp;o&&ft(t),r.shift=!1;for(var a=0,l=Math.min(n.length,s.length);a<l&&n.charCodeAt(a)==s.charCodeAt(a);)++a;var c=r.from,u=r.to;a<n.length?c=re(c.line,c.ch-(n.length-a)):t.state.overwrite&&se(c,u)&&!t.state.pasteIncoming&&(u=re(u.line,Math.min(Ln(i,u.line).text.length,u.ch+(s.length-a))));var h=t.curOp.updateInput,d={from:c,to:u,text:zi(s.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"};return Zt(t.doc,d,"end"),t.curOp.updateInput=h,oi(t,"inputRead",t,d),1e3<s.length||-1<s.indexOf("\n")?e.value=t.display.prevInput="":t.display.prevInput=s,o&&mt(t),!(t.state.pasteIncoming=!1)}function kt(t,e){var n,i,r=t.doc;if(se(r.sel.from,r.sel.to))e&&(t.display.prevInput=t.display.input.value="",_&&!x&&(t.display.inputHasSelection=null));else{t.display.prevInput="";var s=(n=Wi&&(100<r.sel.to.line-r.sel.from.line||1e3<(i=t.getSelection()).length))?"-":i||t.getSelection();t.display.input.value=s,t.state.focused&&bi(t.display.input),_&&!x&&(t.display.inputHasSelection=s)}t.display.inaccurateSelection=n}function Ct(t){"nocursor"==t.options.readOnly||f&&document.activeElement==t.display.input||t.display.input.focus()}function St(t){return t.options.readOnly||t.doc.cantEdit}function Mt(t,e){for(var n=Qn(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function Tt(t,e,n){var i=t.display;if(!n){var r=Qn(e);if(r==i.scrollbarH||r==i.scrollbarH.firstChild||r==i.scrollbarV||r==i.scrollbarV.firstChild||r==i.scrollbarFiller||r==i.gutterFiller)return null}var s,o,a=Ii(i.lineSpace);try{s=e.clientX,o=e.clientY}catch(e){return null}return at(t,s-a.left,o-a.top)}function $t(e){if(!ai(this,e)){var s=this,o=s.display,a=s.doc,t=a.sel;if(t.shift=e.shiftKey,Mt(o,e))C||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100));else if(!Pt(s,e)){var l=Tt(s,e);switch(ti(e)){case 3:return void(S&&Gt.call(s,s,e));case 2:return C&&(s.state.lastMiddleDown=+new Date),l&&de(s.doc,l),setTimeout(ki(Ct,s),20),void Kn(e)}if(l){s.state.focused||qt(s);var n,i,r=+new Date,c="single";if(dt&&dt.time>r-400&&se(dt.pos,l))c="triple",Kn(e),setTimeout(ki(Ct,s),20),n=s,i=l.line,de(n.doc,re(i,0),ce(n.doc,re(i+1,0)));else if(ht&&ht.time>r-400&&se(ht.pos,l)){c="double",dt={time:r,pos:l},Kn(e);var u=Ce(Ln(a,l.line).text,l);de(s.doc,u.from,u.to)}else ht={time:r,pos:l};var h=l;if(s.options.dragDrop&&Ni&&!St(s)&&!se(t.from,t.to)&&!oe(l,t.from)&&!oe(t.to,l)&&"single"==c){var d=gt(s,function(t){C&&(o.scroller.draggable=!1),s.state.draggingText=!1,ni(document,"mouseup",d),ni(o.scroller,"drop",d),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Kn(t),de(s.doc,l),Ct(s))});return C&&(o.scroller.draggable=!0),s.state.draggingText=d,o.scroller.dragDrop&&o.scroller.dragDrop(),ei(document,"mouseup",d),void ei(o.scroller,"drop",d)}Kn(e),"single"==c&&de(s.doc,ce(a,l));var p=t.from,f=t.to,m=l,g=Ii(o.wrapper),v=0,b=gt(s,function(t){_||ti(t)?w(t):x(t)}),y=gt(s,x);ei(document,"mousemove",b),ei(document,"mouseup",y)}else Qn(e)==o.scroller&&Kn(e)}}function w(t){var e=++v,n=Tt(s,t,!0);if(n)if(se(n,h)){var i=t.clientY<g.top?-20:t.clientY>g.bottom?20:0;i&&setTimeout(gt(s,function(){v==e&&(o.scroller.scrollTop+=i,w(t))}),50)}else{s.state.focused||qt(s),function(t){if(!se(m,t))if(m=t,"single"!=c)if(p=ce(a,p),f=ce(a,f),"double"==c){var e=Ce(Ln(a,t.line).text,t);oe(t,p)?de(s.doc,e.from,f):de(s.doc,p,e.to)}else"triple"==c&&(oe(t,p)?de(s.doc,f,ce(a,re(t.line,0))):de(s.doc,p,ce(a,re(t.line+1,0))));else de(s.doc,ce(a,l),t)}(h=n);var r=N(o,a);(n.line>=r.to||n.line<r.from)&&setTimeout(gt(s,function(){v==e&&w(t)}),150)}}function x(t){v=1/0,Kn(t),Ct(s),ni(document,"mousemove",b),ni(document,"mouseup",y)}}function Pt(t,e){var n=t.display;try{var i=e.clientX,r=e.clientY}catch(e){return!1}if(i>=Math.floor(Ii(n.gutters).right))return!1;if(Kn(e),!ci(t,"gutterClick"))return!0;var s=Ii(n.lineDiv);if(r>s.bottom)return!0;r-=s.top-n.viewOffset;for(var o=0;o<t.options.gutters.length;++o){var a=n.gutters.childNodes[o];if(a&&Ii(a).right>=i){oi(t,"gutterClick",t,On(t.doc,r),t.options.gutters[o],e);break}}return!0}var Et=0;function Lt(t){var i=this;if(!(ai(i,t)||Mt(i.display,t)||i.options.onDragEvent&&i.options.onDragEvent(i,Yn(t)))){Kn(t),_&&(Et=+new Date);var r=Tt(i,t,!0),e=t.dataTransfer.files;if(r&&!St(i))if(e&&e.length&&window.FileReader&&window.File)for(var s=e.length,o=Array(s),a=0,n=function(t,e){var n=new FileReader;n.onload=function(){o[e]=n.result,++a==s&&(r=ce(i.doc,r),Zt(i.doc,{from:r,to:r,text:zi(o.join("\n")),origin:"paste"},"around"))},n.readAsText(t)},l=0;l<s;++l)n(e[l],l);else{if(i.state.draggingText&&!oe(r,i.doc.sel.from)&&!oe(i.doc.sel.to,r))return i.state.draggingText(t),void setTimeout(ki(Ct,i),20);try{if(o=t.dataTransfer.getData("Text")){var c=i.doc.sel.from,u=i.doc.sel.to;pe(i.doc,r,r),i.state.draggingText&&ie(i.doc,"",c,u,"paste"),i.replaceSelection(o,null,"paste"),Ct(i),qt(i)}}catch(t){}}}}function It(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,u||z(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),u&&z(t,[]),q(t,100))}function At(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,O(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}var Dt,Nt=0,Ot=null;function Bt(t,e){var n=e.wheelDeltaX,i=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta);var r=t.display,s=r.scroller;if(n&&s.scrollWidth>s.clientWidth||i&&s.scrollHeight>s.clientHeight){if(i&&w&&C)for(var o=e.target;o!=s;o=o.parentNode)if(o.lineObj){t.display.currentWheelTarget=o;break}if(n&&!u&&!h&&null!=Ot)return i&&It(t,Math.max(0,Math.min(s.scrollTop+i*Ot,s.scrollHeight-s.clientHeight))),At(t,Math.max(0,Math.min(s.scrollLeft+n*Ot,s.scrollWidth-s.clientWidth))),Kn(e),void(r.wheelStartX=null);if(i&&null!=Ot){var a=i*Ot,l=t.doc.scrollTop,c=l+r.wrapper.clientHeight;a<0?l=Math.max(0,l+a-50):c=Math.min(t.doc.height,c+a+50),z(t,[],{top:l,bottom:c})}Nt<20&&(null==r.wheelStartX?(r.wheelStartX=s.scrollLeft,r.wheelStartY=s.scrollTop,r.wheelDX=n,r.wheelDY=i,setTimeout(function(){if(null!=r.wheelStartX){var t=s.scrollLeft-r.wheelStartX,e=s.scrollTop-r.wheelStartY,n=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,n&&(Ot=(Ot*Nt+n)/(Nt+1),++Nt)}},200)):(r.wheelDX+=n,r.wheelDY+=i))}}function Ht(t,e,n){if("string"==typeof e&&!(e=Oe[e]))return!1;t.display.pollingFast&&_t(t)&&(t.display.pollingFast=!1);var i=t.doc,r=i.sel.shift,s=!1;try{St(t)&&(t.state.suppressEdits=!0),n&&(i.sel.shift=!1),s=e(t)!=di}finally{i.sel.shift=r,t.state.suppressEdits=!1}return s}function zt(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function jt(e,t){var n=He(e.options.keyMap),i=n.auto;clearTimeout(Dt),i&&!je(t)&&(Dt=setTimeout(function(){He(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i,T(e))},50));var r=Re(t,!0),s=!1;if(!r)return!1;var o=zt(e);return(s=t.shiftKey?ze("Shift-"+r,o,function(t){return Ht(e,t,!0)})||ze(r,o,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Ht(e,t)}):ze(r,o,function(t){return Ht(e,t)}))&&(Kn(t),V(e),x&&(t.oldKeyCode=t.keyCode,t.keyCode=0),oi(e,"keyHandled",e,r,t)),s}_?Ot=-.53:u?Ot=15:e?Ot=-.7:a&&(Ot=-1/3);var Rt,Ft=null;function Wt(t){if(this.state.focused||qt(this),!(ai(this,t)||this.options.onKeyEvent&&this.options.onKeyEvent(this,Yn(t)))){_&&27==t.keyCode&&(t.returnValue=!1);var e=t.keyCode;this.doc.sel.shift=16==e||t.shiftKey;var n=jt(this,t);h&&(Ft=n?e:null,!n&&88==e&&!Wi&&(w?t.metaKey:t.ctrlKey)&&this.replaceSelection(""))}}function Vt(t){var e=this;if(!(ai(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Yn(t)))){var n=t.keyCode,i=t.charCode;if(h&&n==Ft)return Ft=null,void Kn(t);if(!(h&&(!t.which||t.which<10)||c)||!jt(e,t)){var r,s,o,a,l=String.fromCharCode(null==i?n:i);if(this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!St(this)&&-1<this.doc.mode.electricChars.indexOf(l)&&setTimeout(gt(e,function(){we(e,e.doc.sel.to.line,"smart")}),75),s=t,(a=ze("'"+(o=l)+"'",zt(r=e),function(t){return Ht(r,t,!0)}))&&(Kn(s),V(r),oi(r,"keyHandled",r,"'"+o+"'",s)),!a)_&&!x&&(e.display.inputHasSelection=null),xt(e)}}}function qt(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(ii(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(kt(t,!0),C&&setTimeout(ki(kt,t,!0),0))),wt(t),V(t))}function Ut(t){t.state.focused&&(ii(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function Gt(n,t){if(!ai(n,t,"contextmenu")){var i=n.display,e=n.doc.sel;if(!Mt(i,t)){var r=Tt(n,t),s=i.scroller.scrollTop;if(r&&!h){(se(e.from,e.to)||oe(r,e.from)||!oe(r,e.to))&&gt(n,pe)(n.doc,r,r);var o=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",Ct(n),kt(n,!0),se(e.from,e.to)&&(i.input.value=i.prevInput=" "),_&&!x&&l(),S){Zn(t);var a=function(){ni(window,"mouseup",a),setTimeout(c,20)};ei(window,"mouseup",a)}else setTimeout(c,50)}}}function l(){if(null!=i.input.selectionStart){var t=i.input.value=" "+(se(e.from,e.to)?"":i.input.value);i.prevInput=" ",i.input.selectionStart=1,i.input.selectionEnd=t.length}}function c(){if(i.inputDiv.style.position="relative",i.input.style.cssText=o,x&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=s),wt(n),null!=i.input.selectionStart){_&&!x||l(),clearTimeout(Rt);var t=0,e=function(){" "==i.prevInput&&0==i.input.selectionStart?gt(n,Oe.selectAll)(n):t++<10?Rt=setTimeout(e,500):kt(n)};Rt=setTimeout(e,200)}}}var Xt=g.changeEnd=function(t){return t.text?re(t.from.line+t.text.length-1,vi(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};function Yt(t,e,n){if(!oe(e.from,n))return ce(t,n);var i=e.text.length-1-(e.to.line-e.from.line);if(n.line>e.to.line+i){var r=n.line-i,s=t.first+t.size-1;return s<r?re(s,Ln(t,s).text.length):ue(n,Ln(t,r).text.length)}if(n.line==e.to.line+i)return ue(n,vi(e.text).length+(1==e.text.length?e.from.ch:0)+Ln(t,e.to.line).text.length-e.to.ch);var o=n.line-e.from.line;return ue(n,e.text[o].length+(o?0:e.from.ch))}function Kt(t,i,e){if(e&&"object"==typeof e)return{anchor:Yt(t,i,e.anchor),head:Yt(t,i,e.head)};if("start"==e)return{anchor:i.from,head:i.from};var r=Xt(i);if("around"==e)return{anchor:i.from,head:r};if("end"==e)return{anchor:r,head:r};var n=function(t){if(oe(t,i.from))return t;if(!oe(i.to,t))return r;var e=t.line+i.text.length-(i.to.line-i.from.line)-1,n=t.ch;return t.line==i.to.line&&(n+=r.ch-i.to.ch),re(e,n)};return{anchor:n(t.sel.anchor),head:n(t.sel.head)}}function Jt(r,t,e){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return e&&(n.update=function(t,e,n,i){t&&(this.from=ce(r,t)),e&&(this.to=ce(r,e)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),ii(r,"beforeChange",r,n),r.cm&&ii(r.cm,"beforeChange",r.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Zt(t,e,n,i){if(t.cm){if(!t.cm.curOp)return gt(t.cm,Zt)(t,e,n,i);if(t.cm.state.suppressEdits)return}if(!(ci(t,"beforeChange")||t.cm&&ci(t.cm,"beforeChange"))||(e=Jt(t,e,!0))){var r=m&&!i&&function(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=yi(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],s=0;s<i.length;++s)for(var o=i[s],a=o.find(),l=0;l<r.length;++l){var c=r[l];if(!oe(c.to,a.from)&&!oe(a.to,c.from)){var u=[l,1];(oe(c.from,a.from)||!o.inclusiveLeft&&se(c.from,a.from))&&u.push({from:c.from,to:a.from}),(oe(a.to,c.to)||!o.inclusiveRight&&se(c.to,a.to))&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}(t,e.from,e.to);if(r){for(var s=r.length-1;1<=s;--s)Qt(t,{from:r[s].from,to:r[s].to,text:[""]});r.length&&Qt(t,{from:r[0].from,to:r[0].to,text:e.text},n)}else Qt(t,e,n)}}function Qt(t,n,e){var i=Kt(t,n,e);Fn(t,n,i,t.cm?t.cm.curOp.id:NaN),ne(t,n,i,Xe(t,n));var r=[];Pn(t,function(t,e){e||-1!=yi(r,t.history)||(Gn(t.history,n),r.push(t.history)),ne(t,n,null,Xe(t,n))})}function te(t,e){if(!t.cm||!t.cm.state.suppressEdits){var n=t.history,i=("undo"==e?n.done:n.undone).pop();if(i){var r={changes:[],anchorBefore:i.anchorAfter,headBefore:i.headAfter,anchorAfter:i.anchorBefore,headAfter:i.headBefore,generation:n.generation};("undo"==e?n.undone:n.done).push(r),n.generation=i.generation||++n.maxGeneration;for(var s=ci(t,"beforeChange")||t.cm&&ci(t.cm,"beforeChange"),o=i.changes.length-1;0<=o;--o){var a=i.changes[o];if(a.origin=e,s&&!Jt(t,a,!1))return void(("undo"==e?n.done:n.undone).length=0);r.changes.push(Rn(t,a));var l=o?Kt(t,a,null):{anchor:i.anchorBefore,head:i.headBefore};ne(t,a,l,Ye(t,a));var c=[];Pn(t,function(t,e){e||-1!=yi(c,t.history)||(Gn(t.history,a),c.push(t.history)),ne(t,a,null,Ye(t,a))})}}}}function ee(t,e){function n(t){return re(t.line+e,t.ch)}t.first+=e,t.cm&&yt(t.cm,t.first,t.first,e),t.sel.head=n(t.sel.head),t.sel.anchor=n(t.sel.anchor),t.sel.from=n(t.sel.from),t.sel.to=n(t.sel.to)}function ne(t,e,n,i){if(t.cm&&!t.cm.curOp)return gt(t.cm,ne)(t,e,n,i);if(e.to.line<t.first)ee(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);ee(t,r),e={from:re(t.first,0),to:re(e.to.line+r,e.to.ch),text:[vi(e.text)],origin:e.origin}}var s=t.lastLine();e.to.line>s&&(e={from:e.from,to:re(s,Ln(t,s).text.length),text:[e.text[0]],origin:e.origin}),e.removed=In(t,e.from,e.to),n||(n=Kt(t,e,null)),t.cm?function(t,e,n,i){var r=t.doc,s=t.display,o=e.from,a=e.to,l=!1,c=o.line;t.options.lineWrapping||(c=Nn(Qe(r,Ln(r,o.line))),r.iter(c,a.line+1,function(t){if(t==s.maxLine)return l=!0}));oe(r.sel.head,e.from)||oe(e.to,r.sel.head)||(t.curOp.cursorActivity=!0);_n(r,e,n,i,y(t)),t.options.lineWrapping||(r.iter(c,o.line+e.text.length,function(t){var e=L(r,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0));r.frontier=Math.min(r.frontier,o.line),q(t,400);var u=e.text.length-(a.line-o.line)-1;if(yt(t,o.line,a.line+1,u),ci(t,"change")){var h={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var d=t.curOp.textChanged;d.next;d=d.next);d.next=h}else t.curOp.textChanged=h}}(t.cm,e,i,n):_n(t,e,i,n)}}function ie(t,e,n,i,r){if(i||(i=n),oe(i,n)){var s=i;i=n,n=s}"string"==typeof e&&(e=zi(e)),Zt(t,{from:n,to:i,text:e,origin:r},null)}function re(t,e){if(!(this instanceof re))return new re(t,e);this.line=t,this.ch=e}function se(t,e){return t.line==e.line&&t.ch==e.ch}function oe(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function ae(t){return re(t.line,t.ch)}function le(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ce(t,e){if(e.line<t.first)return re(t.first,0);var n=t.first+t.size-1;return e.line>n?re(n,Ln(t,n).text.length):ue(e,Ln(t,e.line).text.length)}function ue(t,e){var n=t.ch;return null==n||e<n?re(t.line,e):n<0?re(t.line,0):t}function he(t,e){return e>=t.first&&e<t.first+t.size}function de(t,e,n,i){if(t.sel.shift||t.sel.extend){var r=t.sel.anchor;if(n){var s=oe(e,r);s!=oe(n,r)?(r=e,e=n):s!=oe(e,n)&&(e=n)}pe(t,r,e,i)}else pe(t,e,n||e,i);t.cm&&(t.cm.curOp.userSelChange=!0)}function pe(t,e,n,i,r){if(!r&&ci(t,"beforeSelectionChange")||t.cm&&ci(t.cm,"beforeSelectionChange")){var s=(ii(o=t,"beforeSelectionChange",o,a={anchor:e,head:n}),o.cm&&ii(o.cm,"beforeSelectionChange",o.cm,a),a.anchor=ce(o,a.anchor),a.head=ce(o,a.head),a);n=s.head,e=s.anchor}var o,a,l=t.sel;if(l.goalColumn=null,!r&&se(e,l.anchor)||(e=me(t,e,i,"push"!=r)),!r&&se(n,l.head)||(n=me(t,n,i,"push"!=r)),!se(l.anchor,e)||!se(l.head,n)){l.anchor=e;var c=oe(l.head=n,e);l.from=c?n:e,l.to=c?e:n,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),oi(t,"cursorActivity",t)}}function fe(t){pe(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function me(t,e,n,i){var r=!1,s=e,o=n||1;t.cantEdit=!1;t:for(;;){var a=Ln(t,s.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=s.ch:c.from<s.ch))&&(null==c.to||(u.inclusiveRight?c.to>=s.ch:c.to>s.ch))){if(i&&(ii(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find()[o<0?"from":"to"];if(se(h,s)&&(h.ch+=o,h.ch<0?h=h.line>t.first?ce(t,re(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?re(h.line+1,0):null),!h)){if(r)return i?(t.cantEdit=!0,re(t.first,0)):me(t,e,n,!0);r=!0,h=e,o=-o}s=h;continue t}}return s}}function ge(t,e,n){for(null==n&&(n=0);;){var i=!1,r=st(t,e),s=ve(t,r.left,r.top-n,r.left,r.bottom+n),o=t.doc.scrollTop,a=t.doc.scrollLeft;if(null!=s.scrollTop&&(It(t,s.scrollTop),1<Math.abs(t.doc.scrollTop-o)&&(i=!0)),null!=s.scrollLeft&&(At(t,s.scrollLeft),1<Math.abs(t.doc.scrollLeft-a)&&(i=!0)),!i)return r}}function ve(t,e,n,i,r){var s=t.display,o=ct(t.display);n<0&&(n=0);var a=s.scroller.clientHeight-hi,l=s.scroller.scrollTop,c={},u=t.doc.height+Y(s),h=n<o,d=u-o<r;if(n<l)c.scrollTop=h?0:n;else if(l+a<r){var p=Math.min(n,(d?u:r)-a);p!=l&&(c.scrollTop=p)}var f=s.scroller.clientWidth-hi,m=s.scroller.scrollLeft;e+=s.gutters.offsetWidth,i+=s.gutters.offsetWidth;var g=s.gutters.offsetWidth,v=e<g+10;return e<m+g||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-g)):f+m-3<i&&(c.scrollLeft=i+10-f),c}function be(t,e,n){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==n?t.doc.scrollTop:n}}function ye(t,e,n){var i=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),r=t.display.scroller;i.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,i.scrollTop+n)),i.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,i.scrollLeft+e))}function we(t,e,n,i){var r=t.doc;if(null==n&&(n="add"),"smart"==n)if(t.doc.mode.indent)var s=G(t,e);else n="prev";var o,a=t.options.tabSize,l=Ln(r,e),c=fi(l.text,null,a),u=l.text.match(/^\s*/)[0];if("smart"==n&&(o=t.doc.mode.indent(s,l.text.slice(u.length),l.text))==di){if(!i)return;n="prev"}"prev"==n?o=e>r.first?fi(Ln(r,e-1).text,null,a):0:"add"==n?o=c+t.options.indentUnit:"subtract"==n?o=c-t.options.indentUnit:"number"==typeof n&&(o=c+n),o=Math.max(0,o);var h="",d=0;if(t.options.indentWithTabs)for(var p=Math.floor(o/a);p;--p)d+=a,h+="\t";d<o&&(h+=gi(o-d)),h!=u&&ie(t.doc,h,re(e,0),re(e,u.length),"+input"),l.stateAfter=null}function xe(t,e,n){var i=e,r=e,s=t.doc;return"number"==typeof e?r=Ln(s,le(s,e)):i=Nn(e),null==i?null:n(r,i)?(yt(t,i,i+1),r):null}function _e(i,t,r,e,s){var o=t.line,a=t.ch,n=r,l=Ln(i,o),c=!0;function u(t){var e,n=(s?Zi:Qi)(l,a,r,!0);if(null==n){if(t||!((e=o+r)<i.first||e>=i.first+i.size?c=!1:l=Ln(i,o=e)))return c=!1;a=s?(r<0?Xi:Gi)(l):r<0?l.text.length:0}else a=n;return!0}if("char"==e)u();else if("column"==e)u(!0);else if("word"==e||"group"==e)for(var h=null,d="group"==e,p=!0;!(r<0)||u(!p);p=!1){var f=l.text.charAt(a)||"\n",m=Si(f)?"w":d?/\s/.test(f)?null:"p":null;if(h&&h!=m){r<0&&(r=1,u());break}if(m&&(h=m),0<r&&!u(!p))break}var g=me(i,re(o,a),n,!0);return c||(g.hitSide=!0),g}function ke(t,e,n,i){var r,s=t.doc,o=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+n*(a-(n<0?1.5:.5)*ct(t.display))}else"line"==i&&(r=0<n?e.bottom+3:e.top-3);for(;;){var l=at(t,o,r);if(!l.outside)break;if(n<0?r<=0:r>=s.height){l.hitSide=!0;break}r+=5*n}return l}function Ce(t,e){var n=e.ch,i=e.ch;if(t){(e.xRel<0||i==t.length)&&n?--n:++i;for(var r=t.charAt(n),s=Si(r)?Si:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Si(t)};0<n&&s(t.charAt(n-1));)--n;for(;i<t.length&&s(t.charAt(i));)++i}return{from:re(e.line,n),to:re(e.line,i)}}g.Pos=re,g.prototype={constructor:g,focus:function(){window.focus(),Ct(this),qt(this),xt(this)},setOption:function(t,e){var n=this.options,i=n[t];n[t]==e&&"mode"!=t||(n[t]=e,Se.hasOwnProperty(t)&&gt(this,Se[t])(this,e,i))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:gt(null,function(t,e){var n=t.token?t:g.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:e&&e.opaque}),this.state.modeGen++,yt(this)}),removeOverlay:gt(null,function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return e.splice(n,1),this.state.modeGen++,void yt(this)}}),indentLine:gt(null,function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),he(this.doc,t)&&we(this,t,e,n)}),indentSelection:gt(null,function(t){var e=this.doc.sel;if(se(e.from,e.to))return we(this,e.from.line,t);for(var n=e.to.line-(e.to.ch?0:1),i=e.from.line;i<=n;++i)we(this,i,t)}),getTokenAt:function(t,e){for(var n=this.doc,i=G(this,(t=ce(n,t)).line,e),r=this.doc.mode,s=new Fe(Ln(n,t.line).text,this.options.tabSize);s.pos<t.ch&&!s.eol();){s.start=s.pos;var o=r.token(s,i)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,type:o||null,state:i}},getTokenTypeAt:function(t){t=ce(this.doc,t);var e=hn(this,Ln(this.doc,t.line)),n=0,i=(e.length-1)/2,r=t.ch;if(0==r)return e[2];for(;;){var s=n+i>>1;if((s?e[2*s-1]:0)>=r)i=s;else{if(!(e[2*s+1]<r))return e[2*s+2];n=s+1}}},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?g.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){if(Ae.hasOwnProperty(e)){var n=Ae[e],i=this.getModeAt(t);return i[e]&&n[i[e]]||i.helperType&&n[i.helperType]||n[i.name]}},getStateAfter:function(t,e){var n=this.doc;return G(this,(t=le(n,null==t?n.first+n.size-1:t))+1,e)},cursorCoords:function(t,e){var n=this.doc.sel;return st(this,null==t?n.head:"object"==typeof t?ce(this.doc,t):t?n.from:n.to,e||"page")},charCoords:function(t,e){return rt(this,ce(this.doc,t),e||"page")},coordsChar:function(t,e){return at(this,(t=it(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=it(this,{top:t,left:0},e||"page").top,On(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,i=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:i<t&&(t=i,n=!0);var r=Ln(this.doc,t);return nt(this,Ln(this.doc,t),{top:0,left:0},e||"page").top+(n?r.height:0)},defaultTextHeight:function(){return ct(this.display)},defaultCharWidth:function(){return ut(this.display)},setGutterMarker:gt(null,function(t,n,i){return xe(this,t,function(t){var e=t.gutterMarkers||(t.gutterMarkers={});return!(e[n]=i)&&Mi(e)&&(t.gutterMarkers=null),!0})}),clearGutter:gt(null,function(e){var n=this,t=n.doc,i=t.first;t.iter(function(t){t.gutterMarkers&&t.gutterMarkers[e]&&(t.gutterMarkers[e]=null,yt(n,i,i+1),Mi(t.gutterMarkers)&&(t.gutterMarkers=null)),++i})}),addLineClass:gt(null,function(t,n,i){return xe(this,t,function(t){var e="text"==n?"textClass":"background"==n?"bgClass":"wrapClass";if(t[e]){if(new RegExp("(?:^|\\s)"+i+"(?:$|\\s)").test(t[e]))return!1;t[e]+=" "+i}else t[e]=i;return!0})}),removeLineClass:gt(null,function(t,s,o){return xe(this,t,function(t){var e="text"==s?"textClass":"background"==s?"bgClass":"wrapClass",n=t[e];if(!n)return!1;if(null==o)t[e]=null;else{var i=n.match(new RegExp("(?:^|\\s+)"+o+"(?:$|\\s+)"));if(!i)return!1;var r=i.index+i[0].length;t[e]=n.slice(0,i.index)+(i.index&&r!=n.length?" ":"")+n.slice(r)||null}return!0})}),addLineWidget:gt(null,function(t,e,n){return function(i,t,e,n){var r=new sn(i,e,n);r.noHScroll&&(i.display.alignWidgets=!0);return xe(i,t,function(t){var e=t.widgets||(t.widgets=[]);if(null==r.insertAt?e.push(r):e.splice(Math.min(e.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,!tn(i.doc,t)||r.showIfHidden){var n=Bn(i,t)<i.doc.scrollTop;Dn(t,t.height+an(r)),n&&ye(i,0,r.height)}return!0}),r}(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!he(this.doc,t))return null;var e=t;if(!(t=Ln(this.doc,t)))return null}else{if(null==(e=Nn(t)))return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,n,i,r){var s,o,a,l,c,u,h=this.display,d=(t=st(this,ce(this.doc,t))).bottom,p=t.left;if(e.style.position="absolute",h.sizer.appendChild(e),"over"==i)d=t.top;else if("above"==i||"near"==i){var f=Math.max(h.wrapper.clientHeight,this.doc.height),m=Math.max(h.sizer.clientWidth,h.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>f)&&t.top>e.offsetHeight?d=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=f&&(d=t.bottom),p+e.offsetWidth>m&&(p=m-e.offsetWidth)}e.style.top=d+"px",e.style.left=e.style.right="","right"==r?(p=h.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?p=0:"middle"==r&&(p=(h.sizer.clientWidth-e.offsetWidth)/2),e.style.left=p+"px"),n&&(s=this,a=d,l=(o=p)+e.offsetWidth,c=d+e.offsetHeight,null!=(u=ve(s,o,a,l,c)).scrollTop&&It(s,u.scrollTop),null!=u.scrollLeft&&At(s,u.scrollLeft))},triggerOnKeyDown:gt(null,Wt),execCommand:function(t){return Oe[t](this)},findPosH:function(t,e,n,i){var r=1;e<0&&(r=-1,e=-e);for(var s=0,o=ce(this.doc,t);s<e&&!(o=_e(this.doc,o,r,n,i)).hitSide;++s);return o},moveH:gt(null,function(t,e){var n,i=this.doc.sel;n=i.shift||i.extend||se(i.from,i.to)?_e(this.doc,i.head,t,e,this.options.rtlMoveVisually):t<0?i.from:i.to,de(this.doc,n,n,t)}),deleteH:gt(null,function(t,e){var n=this.doc.sel;se(n.from,n.to)?ie(this.doc,"",n.from,_e(this.doc,n.head,t,e,!1),"+delete"):ie(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,n,i){var r=1,s=i;e<0&&(r=-1,e=-e);for(var o=0,a=ce(this.doc,t);o<e;++o){var l=st(this,a,"div");if(null==s?s=l.left:l.left=s,(a=ke(this,l,r,n)).hitSide)break}return a},moveV:gt(null,function(t,e){var n=this.doc.sel,i=st(this,n.head,"div");null!=n.goalColumn&&(i.left=n.goalColumn);var r=ke(this,i,t,e);"page"==e&&ye(this,0,rt(this,r,"div").top-i.top),de(this.doc,r,r,t),n.goalColumn=i.left}),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:gt(null,function(t,e){be(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=hi;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:gt(null,function(t,e){"number"==typeof t&&(t=re(t,0)),e||(e=0);var n=t;t&&null==t.line||(this.curOp.scrollToPos=t?ce(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,n=st(this,this.curOp.scrollToPos));var i=ve(this,n.left,n.top-e,n.right,n.bottom+e);be(this,i.scrollLeft,i.scrollTop)}),setSize:gt(null,function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(t){return bt(this,t)},refresh:gt(null,function(){Q(this),be(this,this.doc.scrollLeft,this.doc.scrollTop),yt(this)}),swapDoc:gt(null,function(t){var e=this.doc;return e.cm=null,En(this,t),Q(this),kt(this,!0),be(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ui(g);var Se=g.optionHandlers={},Me=g.defaults={};function Te(t,e,i,n){g.defaults[t]=e,i&&(Se[t]=n?function(t,e,n){n!=$e&&i(t,e,n)}:i)}var $e=g.Init={toString:function(){return"CodeMirror.Init"}};Te("value","",function(t,e){t.setValue(e)},!0),Te("mode",null,function(t,e){t.doc.modeOption=e,v(t)},!0),Te("indentUnit",2,v,!0),Te("indentWithTabs",!1),Te("smartIndent",!0),Te("tabSize",4,function(t){v(t),Q(t),yt(t)},!0),Te("electricChars",!0),Te("rtlMoveVisually",!n),Te("theme","default",function(t){$(t),P(t)},!0),Te("keyMap","default",T),Te("extraKeys",null),Te("onKeyEvent",null),Te("onDragEvent",null),Te("lineWrapping",!1,function(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),I(t)),M(t),yt(t),Q(t),setTimeout(function(){D(t)},100)},!0),Te("gutters",[],function(t){A(t.options),P(t)},!0),Te("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?H(t.display)+"px":"0",t.refresh()},!0),Te("coverGutterNextToScrollbar",!1,D,!0),Te("lineNumbers",!1,function(t){A(t.options),P(t)},!0),Te("firstLineNumber",1,P,!0),Te("lineNumberFormatter",function(t){return t},P,!0),Te("showCursorWhenSelecting",!1,W,!0),Te("readOnly",!1,function(t,e){"nocursor"==e?(Ut(t),t.display.input.blur()):e||kt(t,!0)}),Te("dragDrop",!0),Te("cursorBlinkRate",530),Te("cursorScrollMargin",0),Te("cursorHeight",1),Te("workTime",100),Te("workDelay",100),Te("flattenSpans",!0),Te("pollInterval",100),Te("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),Te("historyEventDelay",500),Te("viewportMargin",10,function(t){t.refresh()},!0),Te("maxHighlightLength",1e4,function(t){v(t),t.refresh()},!0),Te("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Te("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Te("autofocus",null);var Pe=g.modes={},Ee=g.mimeModes={};g.defineMode=function(t,e){if(g.defaults.mode||"null"==t||(g.defaults.mode=t),2<arguments.length){e.dependencies=[];for(var n=2;n<arguments.length;++n)e.dependencies.push(arguments[n])}Pe[t]=e},g.defineMIME=function(t,e){Ee[t]=e},g.resolveMode=function(t){if("string"==typeof t&&Ee.hasOwnProperty(t))t=Ee[t];else if(t&&"string"==typeof t.name&&Ee.hasOwnProperty(t.name)){var e=Ee[t.name];(t=wi(e,t)).name=e.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return g.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},g.getMode=function(t,e){e=g.resolveMode(e);var n=Pe[e.name];if(!n)return g.getMode(t,"text/plain");var i=n(t,e);if(Le.hasOwnProperty(e.name)){var r=Le[e.name];for(var s in r)r.hasOwnProperty(s)&&(i.hasOwnProperty(s)&&(i["_"+s]=i[s]),i[s]=r[s])}return i.name=e.name,i},g.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),g.defineMIME("text/plain","null");var Le=g.modeExtensions={};g.extendMode=function(t,e){xi(e,Le.hasOwnProperty(t)?Le[t]:Le[t]={})},g.defineExtension=function(t,e){g.prototype[t]=e},g.defineDocExtension=function(t,e){Mn.prototype[t]=e},g.defineOption=Te;var Ie=[];g.defineInitHook=function(t){Ie.push(t)};var Ae=g.helpers={};function De(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ne(t,e,n){return!t.startState||t.startState(e,n)}g.registerHelper=function(t,e,n){Ae.hasOwnProperty(t)||(Ae[t]=g[t]={}),Ae[t][e]=n},g.isWordChar=Si,g.copyState=De,g.startState=Ne,g.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var Oe=g.commands={selectAll:function(t){t.setSelection(re(t.firstLine(),0),re(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),n=t.getCursor(!1),i=!se(e,n);i||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,i?n:re(e.line),"+delete"):t.replaceRange("",e,re(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",re(e,0),re(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",re(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(re(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(re(t.lastLine()))},goLineStart:function(t){t.extendSelection(Yi(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),n=Yi(t,e.line),i=t.getLineHandle(n.line),r=Hn(i);if(r&&0!=r[0].level)t.extendSelection(n);else{var s=Math.max(0,i.text.search(/\S/)),o=e.line==n.line&&e.ch<=s&&e.ch;t.extendSelection(re(n.line,o?0:s))}},goLineEnd:function(t){t.extendSelection(function(t,e){var n,i;for(;n=Ze(i=Ln(t.doc,e));)e=n.find().to.line;var r=Hn(i),s=r?r[0].level%2?Gi(i):Xi(i):i.text.length;return re(e,s)}(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","+input")},transposeChars:function(t){var e=t.getCursor(),n=t.getLine(e.line);0<e.ch&&e.ch<n.length-1&&t.replaceRange(n.charAt(e.ch)+n.charAt(e.ch-1),re(e.line,e.ch-1),re(e.line,e.ch+1))},newlineAndIndent:function(t){gt(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},Be=g.keyMap={};function He(t){return"string"==typeof t?Be[t]:t}function ze(o,t,a){function l(t){var e=(t=He(t))[o];if(!1===e)return"stop";if(null!=e&&a(e))return!0;if(t.nofallthrough)return"stop";var n=t.fallthrough;if(null==n)return!1;if("[object Array]"!=Object.prototype.toString.call(n))return l(n);for(var i=0,r=n.length;i<r;++i){var s=l(n[i]);if(s)return s}return!1}for(var e=0;e<t.length;++e){var n=l(t[e]);if(n)return"stop"!=n}}function je(t){var e=Vi[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Re(t,e){if(h&&34==t.keyCode&&t.char)return!1;var n=Vi[t.keyCode];return null!=n&&!t.altGraphKey&&(t.altKey&&(n="Alt-"+n),(s?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(s?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)}function Fe(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function We(t,e){this.lines=[],this.type=e,this.doc=t}function Ve(r,s,o,t,e){if(t&&t.shared)return function(t,n,i,r,s){(r=xi(r)).shared=!1;var o=[Ve(t,n,i,r,s)],a=o[0],l=r.replacedWith;return Pn(t,function(t){l&&(r.replacedWith=l.cloneNode(!0)),o.push(Ve(t,ce(t,n),ce(t,i),r,s));for(var e=0;e<t.linked.length;++e)if(t.linked[e].isParent)return;a=vi(o)}),new qe(o,a)}(r,s,o,t,e);if(r.cm&&!r.cm.curOp)return gt(r.cm,Ve)(r,s,o,t,e);var a=new We(r,e);if("range"==e&&!oe(s,o))return a;t&&xi(t,a),a.replacedWith&&(a.collapsed=!0,a.replacedWith=$i("span",[a.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||(a.replacedWith.ignoreEvents=!0)),a.collapsed&&(b=!0),a.addToHistory&&Fn(r,{from:s,to:o,origin:"markText"},{head:r.sel.head,anchor:r.sel.anchor},NaN);var l,c,u,h=s.line,d=0,p=r.cm;if(r.iter(h,o.line+1,function(t){p&&a.collapsed&&!p.options.lineWrapping&&Qe(r,t)==p.display.maxLine&&(u=!0);var e,n,i={from:null,to:null,marker:a};d+=t.text.length,h==s.line&&(i.from=s.ch,d-=s.ch),h==o.line&&(i.to=o.ch,d-=t.text.length-o.ch),a.collapsed&&(h==o.line&&(c=Ke(t,o.ch)),h==s.line?l=Ke(t,s.ch):Dn(t,0)),n=i,(e=t).markedSpans=e.markedSpans?e.markedSpans.concat([n]):[n],n.marker.attachLine(e),++h}),a.collapsed&&r.iter(s.line,o.line+1,function(t){tn(r,t)&&Dn(t,0)}),a.clearOnEnter&&ei(a,"beforeCursorEnter",function(){a.clear()}),a.readOnly&&(m=!0,(r.history.done.length||r.history.undone.length)&&r.clearHistory()),a.collapsed){if(l!=c)throw new Error("Inserting collapsed marker overlapping an existing one");a.size=d,a.atomic=!0}return p&&(u&&(p.curOp.updateMaxLine=!0),(a.className||a.title||a.startStyle||a.endStyle||a.collapsed)&&yt(p,s.line,o.line+1),a.atomic&&fe(p)),a}function qe(t,e){this.markers=t,this.primary=e;for(var n=0,i=this;n<t.length;++n)t[n].parent=this,ei(t[n],"clear",function(){i.clear()})}function Ue(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function Ge(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Xe(t,e){var n=he(t,e.from.line)&&Ln(t,e.from.line).markedSpans,i=he(t,e.to.line)&&Ln(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,s=e.to.ch,o=se(e.from,e.to),a=function(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var s=t[r],o=s.marker;if(null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e)||"bookmark"==o.type&&s.from==e&&(!n||!s.marker.insertLeft)){var a=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}(n,r,o),l=function(t,e,n){if(t)for(var i,r=0;r<t.length;++r){var s=t[r],o=s.marker;if(null==s.to||(o.inclusiveRight?s.to>=e:s.to>e)||"bookmark"==o.type&&s.from==e&&(!n||s.marker.insertLeft)){var a=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);(i||(i=[])).push({from:a?null:s.from-e,to:null==s.to?null:s.to-e,marker:o})}}return i}(i,s,o),c=1==e.text.length,u=vi(e.text).length+(c?r:0);if(a)for(var h=0;h<a.length;++h){if(null==(d=a[h]).to)(p=Ue(l,d.marker))?c&&(d.to=null==p.to?null:p.to+u):d.to=r}if(l)for(h=0;h<l.length;++h){var d,p;if(null!=(d=l[h]).to&&(d.to+=u),null==d.from)(p=Ue(a,d.marker))||(d.from=u,c&&(a||(a=[])).push(d));else d.from+=u,c&&(a||(a=[])).push(d)}if(c&&a){for(h=0;h<a.length;++h)null!=a[h].from&&a[h].from==a[h].to&&"bookmark"!=a[h].marker.type&&a.splice(h--,1);a.length||(a=null)}var f=[a];if(!c){var m,g=e.text.length-2;if(0<g&&a)for(h=0;h<a.length;++h)null==a[h].to&&(m||(m=[])).push({from:null,to:null,marker:a[h].marker});for(h=0;h<g;++h)f.push(m);f.push(l)}return f}function Ye(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=0,r=[];i<e.text.length;++i)r.push(Wn(n[i]));return r}(t,e),i=Xe(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var s=n[r],o=i[r];if(s&&o)t:for(var a=0;a<o.length;++a){for(var l=o[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue t;s.push(l)}else o&&(n[r]=o)}return n}function Ke(t,e){var n,i=b&&t.markedSpans;if(i)for(var r,s=0;s<i.length;++s)(r=i[s]).marker.collapsed&&(null==r.from||r.from<e)&&(null==r.to||r.to>e)&&(!n||n.width<r.marker.width)&&(n=r.marker);return n}function Je(t){return Ke(t,-1)}function Ze(t){return Ke(t,t.text.length+1)}function Qe(t,e){for(var n;n=Je(e);)e=Ln(t,n.find().from.line);return e}function tn(t,e){var n=b&&e.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.replacedWith&&0==i.from&&i.marker.inclusiveLeft&&en(t,e,i))return!0}}function en(t,e,n){if(null==n.to){var i=Ln(t,n.marker.find().to.line);return en(t,i,Ue(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r,s=0;s<e.markedSpans.length;++s)if((r=e.markedSpans[s]).marker.collapsed&&!r.marker.replacedWith&&r.from==n.to&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&en(t,e,r))return!0}function nn(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function rn(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}Be.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Be.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Be.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},Be.default=w?Be.macDefault:Be.pcDefault,Be.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},g.lookupKey=ze,g.isModifierKey=je,g.keyName=Re,g.fromTextArea=function(e,t){if(t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=document.body;try{n=document.activeElement}catch(t){}t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=a.getValue()}if(e.form&&(ei(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var r=e.form,s=r.submit;try{var o=r.submit=function(){i(),r.submit=s,r.submit(),r.submit=o}}catch(t){}}e.style.display="none";var a=g(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(ni(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=s))},a},Fe.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else n=e&&(t.test?t.test(e):t(e));if(n)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(-1<e)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return fi(this.string,null,this.tabSize)},match:function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&0<i.index?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},g.StringStream=Fe,ui(g.TextMarker=We),We.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&ft(t),ci(this,"clear")){var n=this.find();n&&oi(this,"clear",n.from,n.to)}for(var i=null,r=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Ue(o.markedSpans,this);null!=a.to&&(r=Nn(o)),o.markedSpans=Ge(o.markedSpans,a),null!=a.from?i=Nn(o):this.collapsed&&!tn(this.doc,o)&&t&&Dn(o,ct(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(s=0;s<this.lines.length;++s){var l=Qe(t.doc,this.lines[s]),c=L(t.doc,l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&yt(t,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&fe(t)),e&&mt(t)}},We.prototype.find=function(){for(var t,e,n=0;n<this.lines.length;++n){var i=this.lines[n],r=Ue(i.markedSpans,this);if(null!=r.from||null!=r.to){var s=Nn(i);null!=r.from&&(t=re(s,r.from)),null!=r.to&&(e=re(s,r.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},We.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var n,i=Ln(this.doc,t.line);if((n=J(e,i))&&(n.text=n.measure=n.markedSpans=null),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var r=e.display.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj==i){r.offsetHeight!=i.height&&Dn(i,r.offsetHeight);break}bt(e,function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0})}}},We.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=yi(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},We.prototype.detachLine=function(t){if(this.lines.splice(yi(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},ui(g.SharedTextMarker=qe),qe.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();oi(this,"clear")}},qe.prototype.find=function(){return this.primary.find()};var sn=g.LineWidget=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.cm=t,this.node=e};function on(n){return function(){var t=!this.cm.curOp;t&&ft(this.cm);try{var e=n.apply(this,arguments)}finally{t&&mt(this.cm)}return e}}function an(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||Ei(t.cm.display.measure,$i("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}ui(sn),sn.prototype.clear=on(function(){var t=this.line.widgets,e=Nn(this.line);if(null!=e&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(this.line.widgets=null);var i=Bn(this.cm,this.line)<this.cm.doc.scrollTop;Dn(this.line,Math.max(0,this.line.height-an(this))),i&&ye(this.cm,0,-this.height),yt(this.cm,e,e+1)}}),sn.prototype.changed=on(function(){var t=this.height;this.height=null;var e=an(this)-t;if(e){Dn(this.line,this.line.height+e);var n=Nn(this.line);yt(this.cm,n,n+1)}});var ln=g.Line=function(t,e,n){this.text=t,rn(this,e),this.height=n?n(this):1};function cn(t,e,n,i,r){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var o,a=0,l=null,c=new Fe(e,t.options.tabSize);for(""==e&&n.blankLine&&n.blankLine(i);!c.eol();)c.pos>t.options.maxHighlightLength?(s=!1,c.pos=Math.min(e.length,c.start+5e4),o=null):o=n.token(c,i),s&&l==o||(a<c.start&&r(c.start,l),a=c.start,l=o),c.start=c.pos;a<c.pos&&r(c.pos,l)}function un(t,e,n){var s=[t.state.modeGen];cn(t,e.text,t.doc.mode,n,function(t,e){s.push(t,e)});for(var i=0;i<t.state.overlays.length;++i){var o=t.state.overlays[i],a=1,l=0;cn(t,e.text,o.mode,!0,function(t,e){for(var n=a;l<t;){var i=s[a];t<i&&s.splice(a,1,t,s[a+1],i),a+=2,l=Math.min(t,i)}if(e)if(o.opaque)s.splice(n,a-n,t,e),a=n+2;else for(;n<a;n+=2){var r=s[n+1];s[n+1]=r?r+" "+e:e}})}return s}function hn(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=un(t,e,e.stateAfter=G(t,Nn(e)))),e.styles}function dn(t,e,n){var i=t.doc.mode,r=new Fe(e.text,t.options.tabSize);for(""==e.text&&i.blankLine&&i.blankLine(n);!r.eol()&&r.pos<=t.options.maxHighlightLength;)i.token(r,n),r.start=r.pos}ui(ln);var pn={};function fn(t){return t?pn[t]||(pn[t]="cm-"+t.replace(/ +/g," cm-")):null}function mn(t,e,n,i){for(var r,s=e,o=!0;r=Je(s);)s=Ln(t.doc,r.find().from.line);var a,l={pre:$i("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:i};s.textClass&&(l.pre.className=s.textClass);do{s.text&&(o=!1),l.measure=s==e&&n,l.pos=0,l.addToken=l.measure?bn:vn,(_||C)&&t.getOption("lineWrapping")&&(l.addToken=yn(l.addToken));var c=xn(s,l,hn(t,s));n&&s==e&&!l.measuredSomething&&(n[0]=l.pre.appendChild(Hi(t.display.measure)),l.measuredSomething=!0),c&&(s=Ln(t.doc,c.to.line))}while(c);if(!n||l.measuredSomething||n[0]||(n[0]=l.pre.appendChild(o?$i("span",""):Hi(t.display.measure))),l.pre.firstChild||tn(t.doc,e)||l.pre.appendChild(document.createTextNode("")),n&&_&&(a=Hn(s))){var u=a.length-1;a[u].from==a[u].to&&--u;var h=a[u],d=a[u-1];if(h.from+1==h.to&&d&&h.level<d.level){var p=n[l.pos-1];p&&p.parentNode.insertBefore(p.measureRight=Hi(t.display.measure),p.nextSibling)}}return ii(t,"renderLine",t,e,l.pre),l.pre}var gn=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;function vn(t,e,n,i,r,s){if(e){if(gn.test(e)){h=document.createDocumentFragment();for(var o=0;;){gn.lastIndex=o;var a=gn.exec(e),l=a?a.index-o:e.length-o;if(l&&(h.appendChild(document.createTextNode(e.slice(o,o+l))),t.col+=l),!a)break;if(o+=l+1,"\t"==a[0]){var c=t.cm.options.tabSize,u=c-t.col%c;h.appendChild($i("span",gi(u),"cm-tab")),t.col+=u}else{(p=$i("span","","cm-invalidchar")).title="\\u"+a[0].charCodeAt(0).toString(16),h.appendChild(p),t.col+=1}}}else{t.col+=e.length;var h=document.createTextNode(e)}if(n||i||r||t.measure){var d=n||"";i&&(d+=i),r&&(d+=r);var p=$i("span",[h],d);return s&&(p.title=s),t.pre.appendChild(p)}t.pre.appendChild(h)}}function bn(t,e,n,i,r){for(var s=t.cm.options.lineWrapping,o=0;o<e.length;++o){var a=e.charAt(o),l=0==o;"\ud800"<=a&&a<"\udbff"&&o<e.length-1?(a=e.slice(o,o+2),++o):o&&s&&Oi(e,o)&&t.pre.appendChild($i("wbr"));var c=t.measure[t.pos],u=t.measure[t.pos]=vn(t,a,n,l&&i,o==e.length-1&&r);c&&(u.leftSide=c.leftSide||c),_&&s&&" "==a&&o&&!/\s/.test(e.charAt(o-1))&&o<e.length-1&&!/\s/.test(e.charAt(o+1))&&(u.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.measuredSomething=!0)}function yn(o){function a(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":"";return e+=" "}return function(t,e,n,i,r,s){return o(t,e.replace(/ {3,}/,a),n,i,r,s)}}function wn(t,e,n,i){var r=!i&&n.replacedWith;if(r&&(t.copyWidgets&&(r=r.cloneNode(!0)),t.pre.appendChild(r),t.measure)){if(e)t.measure[t.pos]=r;else{var s=Hi(t.cm.display.measure);if("bookmark"!=n.type||n.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(s,r)}else t.measure[t.pos]=t.pre.appendChild(s)}t.measuredSomething=!0}t.pos+=e}function xn(t,e,n){var i=t.markedSpans,r=t.text,s=0;if(i)for(var o,a,l,c,u,h,d=r.length,p=0,f=(k=1,""),m=0;;){if(m==p){a=l=c=u="",h=null,m=1/0;for(var g=[],v=0;v<i.length;++v){var b=i[v],y=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&m>b.to&&(m=b.to,l=""),y.className&&(a+=" "+y.className),y.startStyle&&b.from==p&&(c+=" "+y.startStyle),y.endStyle&&b.to==m&&(l+=" "+y.endStyle),y.title&&!u&&(u=y.title),y.collapsed&&(!h||h.marker.size<y.size)&&(h=b)):b.from>p&&m>b.from&&(m=b.from),"bookmark"==y.type&&b.from==p&&y.replacedWith&&g.push(y)}if(h&&(h.from||0)==p&&(wn(e,(null==h.to?d:h.to)-p,h.marker,null==h.from),null==h.to))return h.marker.find();if(!h&&g.length)for(v=0;v<g.length;++v)wn(e,0,g[v])}if(d<=p)break;for(var w=Math.min(d,m);;){if(f){var x=p+f.length;if(!h){var _=w<x?f.slice(0,w-p):f;e.addToken(e,_,o?o+a:a,c,p+_.length==m?l:"",u)}if(w<=x){f=f.slice(w-p),p=w;break}p=x,c=""}f=r.slice(s,s=n[k++]),o=fn(n[k++])}}else for(var k=1;k<n.length;k+=2)e.addToken(e,r.slice(s,s=n[k]),fn(n[k+1]))}function _n(t,i,e,n,r){function s(t){return e?e[t]:null}function o(t,e,n){!function(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),nn(t),rn(t,n);var r=i?i(t):1;r!=t.height&&Dn(t,r)}(t,e,n,r),oi(t,"change",t,i)}var a=i.from,l=i.to,c=i.text,u=Ln(t,a.line),h=Ln(t,l.line),d=vi(c),p=s(c.length-1),f=l.line-a.line;if(0==a.ch&&0==l.ch&&""==d){for(var m=0,g=c.length-1,v=[];m<g;++m)v.push(new ln(c[m],s(m),r));o(h,h.text,p),f&&t.remove(a.line,f),v.length&&t.insert(a.line,v)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),p);else{for(v=[],m=1,g=c.length-1;m<g;++m)v.push(new ln(c[m],s(m),r));v.push(new ln(d+u.text.slice(l.ch),p,r)),o(u,u.text.slice(0,a.ch)+c[0],s(0)),t.insert(a.line+1,v)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),s(0)),t.remove(a.line+1,f);else{o(u,u.text.slice(0,a.ch)+c[0],s(0)),o(h,d+h.text.slice(l.ch),p);for(m=1,g=c.length-1,v=[];m<g;++m)v.push(new ln(c[m],s(m),r));1<f&&t.remove(a.line+1,f-1),t.insert(a.line+1,v)}oi(t,"change",t,i),pe(t,n.anchor,n.head,null,!0)}function kn(t){this.lines=t,this.parent=null;for(var e=0,n=t.length,i=0;e<n;++e)t[e].parent=this,i+=t[e].height;this.height=i}function Cn(t){for(var e=0,n=0,i=0,r=(this.children=t).length;i<r;++i){var s=t[i];e+=s.chunkSize(),n+=s.height,s.parent=this}this.size=e,this.height=n,this.parent=null}kn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height,(s=r).parent=null,nn(s),oi(r,"delete")}var s;this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0,r=e.length;i<r;++i)e[i].parent=this},iterN:function(t,e,n){for(var i=t+e;t<i;++t)if(n(this.lines[t]))return!0}},Cn.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var s=Math.min(e,r-t),o=i.height;if(i.removeInner(t,s),this.height-=o-i.height,r==s&&(this.children.splice(n--,1),i.parent=null),0==(e-=s))break;t=0}else t-=r}if(this.size-e<25){var a=[];this.collapse(a),this.children=[new kn(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,n=this.children.length;e<n;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0,r=this.children.length;i<r;++i){var s=this.children[i],o=s.chunkSize();if(t<=o){if(s.insertInner(t,e,n),s.lines&&50<s.lines.length){for(;50<s.lines.length;){var a=new kn(s.lines.splice(s.lines.length-25,25));s.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new Cn(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=yi(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var i=new Cn(t.children);(i.parent=t).children=[i,e],t=i}e.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0,r=this.children.length;i<r;++i){var s=this.children[i],o=s.chunkSize();if(t<o){var a=Math.min(e,o-t);if(s.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var Sn=0,Mn=g.Doc=function(t,e,n){if(!(this instanceof Mn))return new Mn(t,e,n);null==n&&(n=0),Cn.call(this,[new kn([new ln("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=zn(),this.cleanGeneration=1;var i=re(this.frontier=n,0);this.sel={from:i,to:i,head:i,anchor:i,shift:!1,extend:!1,goalColumn:null},this.id=++Sn,this.modeOption=e,"string"==typeof t&&(t=zi(t)),_n(this,{from:i,to:i,text:t},null,{head:i,anchor:i})};Mn.prototype=wi(Cn.prototype,{constructor:Mn,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0,r=e.length;i<r;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=An(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:function(t){var e=re(this.first,0),n=this.first+this.size-1;Zt(this,{from:e,to:re(n,Ln(this,n).text.length),text:zi(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,n,i){ie(this,t,e=ce(this,e),n=n?ce(this,n):e,i)},getRange:function(t,e,n){var i=In(this,ce(this,t),ce(this,e));return!1===n?i:i.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){he(this,t)&&ie(this,e,re(t,0),ce(this,re(t)))},removeLine:function(t){t?ie(this,"",ce(this,re(t-1)),ce(this,re(t))):ie(this,"",re(0,0),ce(this,re(1,0)))},getLineHandle:function(t){if(he(this,t))return Ln(this,t)},getLineNumber:function(t){return Nn(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ln(this,t)),Qe(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ce(this,t)},getCursor:function(t){var e=this.sel;return ae(null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||!1===t?e.to:e.from)},somethingSelected:function(){return!se(this.sel.head,this.sel.anchor)},setCursor:vt(function(t,e,n){var i=ce(this,"number"==typeof t?re(t,e||0):t);n?de(this,i):pe(this,i,i)}),setSelection:vt(function(t,e,n){pe(this,ce(this,t),ce(this,e||t),n)}),extendSelection:vt(function(t,e,n){de(this,ce(this,t),e&&ce(this,e),n)}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,n){Zt(this,{from:this.sel.from,to:this.sel.to,text:zi(t),origin:n},e||"around")},undo:vt(function(){te(this,"undo")}),redo:vt(function(){te(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=zn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Vn(this.history.done),undone:Vn(this.history.undone)}},setHistory:function(t){var e=this.history=zn(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,n){return Ve(this,ce(this,t),ce(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return Ve(this,t=ce(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Ln(this,(t=ce(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},getAllMarks:function(){var i=[];return this.iter(function(t){var e=t.markedSpans;if(e)for(var n=0;n<e.length;++n)null!=e[n].from&&i.push(e[n].marker)}),i},posFromIndex:function(n){var i,r=this.first;return this.iter(function(t){var e=t.text.length+1;if(n<e)return i=n,!0;n-=e,++r}),ce(this,re(r,i))},indexFromPos:function(t){var e=(t=ce(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new Mn(An(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Mn(An(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],i},unlinkDoc:function(t){if(t instanceof g&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this);break}}if(t.history==this.history){var n=[t.id];Pn(t,function(t){n.push(t.id)},!0),t.history=zn(),t.history.done=Vn(this.history.done,n),t.history.undone=Vn(this.history.undone,n)}},iterLinkedDocs:function(t){Pn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Mn.prototype.eachLine=Mn.prototype.iter;var Tn="iter insert remove copy getEditor".split(" ");for(var $n in Mn.prototype)Mn.prototype.hasOwnProperty($n)&&yi(Tn,$n)<0&&(g.prototype[$n]=function(t){return function(){return t.apply(this.doc,arguments)}}(Mn.prototype[$n]));function Pn(t,a,l){!function t(e,n,i){if(e.linked)for(var r=0;r<e.linked.length;++r){var s=e.linked[r];if(s.doc!=n){var o=i&&s.sharedHist;l&&!o||(a(s.doc,o),t(s.doc,e,o))}}}(t,null,!0)}function En(t,e){if(e.cm)throw new Error("This document is already in use.");M((t.doc=e).cm=t),v(t),t.options.lineWrapping||I(t),t.options.mode=e.modeOption,yt(t)}function Ln(t,e){for(e-=t.first;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(e<r){t=i;break}e-=r}return t.lines[e]}function In(t,n,i){var r=[],s=n.line;return t.iter(n.line,i.line+1,function(t){var e=t.text;s==i.line&&(e=e.slice(0,i.ch)),s==n.line&&(e=e.slice(n.ch)),r.push(e),++s}),r}function An(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function Dn(t,e){for(var n=e-t.height,i=t;i;i=i.parent)i.height+=n}function Nn(t){if(null==t.parent)return null;for(var e=t.parent,n=yi(e.lines,t),i=e.parent;i;i=(e=i).parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function On(t,e){var n=t.first;t:do{for(var i=0,r=t.children.length;i<r;++i){var s=t.children[i],o=s.height;if(e<o){t=s;continue t}e-=o,n+=s.chunkSize()}return n}while(!t.lines);for(i=0,r=t.lines.length;i<r;++i){var a=t.lines[i].height;if(e<a)break;e-=a}return n+i}function Bn(t,e){for(var n=0,i=(e=Qe(t.doc,e)).parent,r=0;r<i.lines.length;++r){var s=i.lines[r];if(s==e)break;n+=s.height}for(var o=i.parent;o;o=(i=o).parent)for(r=0;r<o.children.length;++r){var a=o.children[r];if(a==i)break;n+=a.height}return n}function Hn(t){var e=t.order;return null==e&&(e=t.order=ar(t.text)),e}function zn(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function jn(e,n,t,i){var r=n["spans_"+e.id],s=0;e.iter(Math.max(e.first,t),Math.min(e.first+e.size,i),function(t){t.markedSpans&&((r||(r=n["spans_"+e.id]={}))[s]=t.markedSpans),++s})}function Rn(t,e){var n={from:{line:e.from.line,ch:e.from.ch},to:Xt(e),text:In(t,e.from,e.to)};return jn(t,n,e.from.line,e.to.line+1),Pn(t,function(t){jn(t,n,e.from.line,e.to.line+1)},!0),n}function Fn(t,e,n,i){var r=t.history;r.undone.length=0;var s=+new Date,o=vi(r.done);if(o&&(r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=vi(o.changes);se(e.from,e.to)&&se(e.from,a.to)?a.to=Xt(e):o.changes.push(Rn(t,e)),o.anchorAfter=n.anchor,o.headAfter=n.head}else for(o={changes:[Rn(t,e)],generation:r.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:n.anchor,headAfter:n.head},r.done.push(o),r.generation=++r.maxGeneration;r.done.length>r.undoDepth;)r.done.shift();r.lastTime=s,r.lastOp=i,r.lastOrigin=e.origin}function Wn(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Vn(t,e){for(var n=0,i=[];n<t.length;++n){var r=t[n],s=r.changes,o=[];i.push({changes:o,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;a<s.length;++a){var l,c=s[a];if(o.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(l=u.match(/^spans_(\d+)$/))&&-1<yi(e,Number(l[1]))&&(vi(o)[u]=c[u],delete c[u])}}return i}function qn(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Un(t,e,n,i){for(var r=0;r<t.length;++r){for(var s=t[r],o=!0,a=0;a<s.changes.length;++a){var l=s.changes[a];if(s.copied||(l.from=ae(l.from),l.to=ae(l.to)),n<l.from.line)l.from.line+=i,l.to.line+=i;else if(e<=l.to.line){o=!1;break}}s.copied||(s.anchorBefore=ae(s.anchorBefore),s.headBefore=ae(s.headBefore),s.anchorAfter=ae(s.anchorAfter),s.readAfter=ae(s.headAfter),s.copied=!0),o?(qn(s.anchorBefore),qn(s.headBefore),qn(s.anchorAfter),qn(s.headAfter)):(t.splice(0,r+1),r=0)}}function Gn(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Un(t.done,n,i,r),Un(t.undone,n,i,r)}function Xn(){Zn(this)}function Yn(t){return t.stop||(t.stop=Xn),t}function Kn(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Jn(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Zn(t){Kn(t),Jn(t)}function Qn(t){return t.target||t.srcElement}function ti(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),w&&t.ctrlKey&&1==e&&(e=3),e}function ei(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});(i[e]||(i[e]=[])).push(n)}}function ni(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers&&t._handlers[e];if(!i)return;for(var r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}}}function ii(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}ui(Mn),g.e_stop=Zn,g.e_preventDefault=Kn,g.e_stopPropagation=Jn;var ri,si=0;function oi(t,e){var n=t._handlers&&t._handlers[e];if(n){var i=Array.prototype.slice.call(arguments,2);ri||(++si,ri=[],setTimeout(li,0));for(var r=0;r<n.length;++r)ri.push(s(n[r]))}function s(t){return function(){t.apply(null,i)}}}function ai(t,e,n){return ii(t,n||e.type,t,e),(null!=(i=e).defaultPrevented?i.defaultPrevented:0==i.returnValue)||e.codemirrorIgnore;var i}function li(){--si;var t=ri;ri=null;for(var e=0;e<t.length;++e)t[e]()}function ci(t,e){var n=t._handlers&&t._handlers[e];return n&&0<n.length}function ui(t){t.prototype.on=function(t,e){ei(this,t,e)},t.prototype.off=function(t,e){ni(this,t,e)}}g.on=ei,g.off=ni,g.signal=ii;var hi=30,di=g.Pass={toString:function(){return"CodeMirror.Pass"}};function pi(){this.id=null}function fi(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var s=i||0,o=r||0;s<e;++s)"\t"==t.charAt(s)?o+=n-o%n:++o;return o}pi.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},g.countColumn=fi;var mi=[""];function gi(t){for(;mi.length<=t;)mi.push(vi(mi)+" ");return mi[t]}function vi(t){return t[t.length-1]}function bi(t){if(d)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(t){}}function yi(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;++n)if(t[n]==e)return n;return-1}function wi(t,e){function n(){}n.prototype=t;var i=new n;return e&&xi(e,i),i}function xi(t,e){for(var n in e||(e={}),t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function _i(t){for(var e=[],n=0;n<t;++n)e.push(void 0);return e}function ki(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}var Ci=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Si(t){return/\w/.test(t)||""<t&&(t.toUpperCase()!=t.toLowerCase()||Ci.test(t))}function Mi(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var Ti=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;function $i(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)Li(r,e);else if(e)for(var s=0;s<e.length;++s)r.appendChild(e[s]);return r}function Pi(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function Ei(t,e){return Pi(t).appendChild(e)}function Li(t,e){x?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function Ii(t){return t.getBoundingClientRect()}g.replaceGetRect=function(t){Ii=t};var Ai,Di,Ni=function(){if(x)return!1;var t=$i("div");return"draggable"in t||"dragDrop"in t}();function Oi(){return!1}function Bi(t){if(null!=Ai)return Ai;var e=$i("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Ei(t,e),e.offsetWidth&&(Ai=e.offsetHeight-e.clientHeight),Ai||0}function Hi(t){if(null==Di){var e=$i("span","");Ei(t,$i("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Di=e.offsetWidth<=1&&2<e.offsetHeight&&!k)}return Di?$i("span",""):$i("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}u?Oi=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:a&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Oi=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:C&&!/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)&&(Oi=function(t,e){if(1<e&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(2<e&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var zi=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var s=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),o=s.indexOf("\r");-1!=o?(n.push(s.slice(0,o)),e+=o+1):(n.push(s),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)};g.splitLines=zi;var ji,Ri,Fi=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Wi="oncopy"in(ji=$i("div"))||(ji.setAttribute("oncopy","return;"),"function"==typeof ji.oncopy),Vi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};function qi(t){return t.level%2?t.to:t.from}function Ui(t){return t.level%2?t.from:t.to}function Gi(t){var e=Hn(t);return e?qi(e[0]):0}function Xi(t){var e=Hn(t);return e?Ui(vi(e)):t.text.length}function Yi(t,e){var n=Ln(t.doc,e),i=Qe(t.doc,n);i!=n&&(e=Nn(i));var r=Hn(i);return re(e,r?r[0].level%2?Xi(i):Gi(i):0)}function Ki(t,e){for(var n,i=0;i<t.length;++i){var r=t[i];if(r.from<e&&r.to>e)return Ri=null,i;if(r.from==e||r.to==e){if(null!=n)return s=t,o=r.level,a=t[n].level,void 0,l=s[0].level,o==l||a!=l&&o<a?(Ri=n,i):(Ri=i,n);n=i}}var s,o,a,l;return Ri=null,n}function Ji(t,e,n,i){if(!i)return e+n;for(;0<(e+=n)&&Ti.test(t.text.charAt(e)););return e}function Zi(t,e,n,i){var r=Hn(t);if(!r)return Qi(t,e,n,i);for(var s=Ki(r,e),o=r[s],a=Ji(t,e,o.level%2?-n:n,i);;){if(a>o.from&&a<o.to)return a;if(a==o.from||a==o.to)return Ki(r,a)==s?a:0<n==(o=r[s+=n]).level%2?o.to:o.from;if(!(o=r[s+=n]))return null;a=0<n==o.level%2?Ji(t,o.to,-1,i):Ji(t,o.from,1,i)}}function Qi(t,e,n,i){var r=e+n;if(i)for(;0<r&&Ti.test(t.text.charAt(r));)r+=n;return r<0||r>t.text.length?null:r}g.keyNames=Vi,function(){for(var t=0;t<10;t++)Vi[t+48]=String(t);for(t=65;t<=90;t++)Vi[t]=String.fromCharCode(t);for(t=1;t<=12;t++)Vi[t+111]=Vi[t+63235]="F"+t}();var tr,er,nr,ir,rr,sr,or,ar=(tr="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",er="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",nr=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,ir=/[stwN]/,rr=/[LRr]/,sr=/[Lb1n]/,or=/[1n]/,function(t){if(!nr.test(t))return!1;for(var e,n=t.length,i=[],r=0;r<n;++r)i.push(u=(e=t.charCodeAt(r))<=255?tr.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1791?er.charAt(e-1536):1792<=e&&e<=2220?"r":"L");r=0;for(var s="L";r<n;++r)"m"==(u=i[r])?i[r]=s:s=u;r=0;for(var o="L";r<n;++r)"1"==(u=i[r])&&"r"==o?i[r]="n":rr.test(u)&&"r"==(o=u)&&(i[r]="R");for(r=1,s=i[0];r<n-1;++r)"+"==(u=i[r])&&"1"==s&&"1"==i[r+1]?i[r]="1":","!=u||s!=i[r+1]||"1"!=s&&"n"!=s||(i[r]=s),s=u;for(r=0;r<n;++r)if(","==(u=i[r]))i[r]="N";else if("%"==u){for(var a=r+1;a<n&&"%"==i[a];++a);for(var l=r&&"!"==i[r-1]||a<n-1&&"1"==i[a]?"1":"N",c=r;c<a;++c)i[c]=l;r=a-1}for(r=0,o="L";r<n;++r){var u=i[r];"L"==o&&"1"==u?i[r]="L":rr.test(u)&&(o=u)}for(r=0;r<n;++r)if(ir.test(i[r])){for(a=r+1;a<n&&ir.test(i[a]);++a);var h="L"==(r?i[r-1]:"L"),d="L"==(a<n-1?i[a]:"L");for(l=h||d?"L":"R",c=r;c<a;++c)i[c]=l;r=a-1}var p,f=[];for(r=0;r<n;)if(sr.test(i[r])){var m=r;for(++r;r<n&&sr.test(i[r]);++r);f.push({from:m,to:r,level:0})}else{var g=r,v=f.length;for(++r;r<n&&"L"!=i[r];++r);for(c=g;c<r;)if(or.test(i[c])){g<c&&f.splice(v,0,{from:g,to:c,level:1});var b=c;for(++c;c<r&&or.test(i[c]);++c);f.splice(v,0,{from:b,to:c,level:2}),g=c}else++c;g<r&&f.splice(v,0,{from:g,to:r,level:1})}return 1==f[0].level&&(p=t.match(/^\s+/))&&(f[0].from=p[0].length,f.unshift({from:0,to:p[0].length,level:0})),1==vi(f).level&&(p=t.match(/\s+$/))&&(vi(f).to-=p[0].length,f.push({from:n-p[0].length,to:n,level:0})),f[0].level!=vi(f).level&&f.push({from:n,to:n,level:f[0].level}),f});return g.version="3.16.0",g}(),define("codemirror/codemirror",["css!../components/codemirror/codemirror.css"],(n=this,function(){return n.CodeMirror})),define("tantaman/web/widgets/CodeEditor",["libs/backbone","codemirror/codemirror"],function(t,n){return t.View.extend({className:"CodeEditor modal hide",events:{"click .ok":"saveCode","click .cancel":"hide",hidden:"_hidden"},initialize:function(){this.template=JST["tantaman.web.widgets/CodeEditor"]},saveCode:function(){var t=this.mirror.getValue();this._saveCb(t)},show:function(t,e){this._saveCb=t,this.$el.modal("show"),this.mirror||(this.mirror=n.fromTextArea(this.$input[0],{mode:this.options.mode})),e&&this.mirror.setValue(e)},hide:function(){this.$el.modal("hide")},_hidden:function(){this.$input.val("")},render:function(){return this.$el.html(this.template(this.options)),this.$el.addClass(this.options.class),this.$input=this.$el.find(".codeInput"),this.$el.modal({show:!1}),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/widgets/Button",["libs/backbone"],function(t){"use strict";return t.View.extend({className:"btn btn-plast",tagName:"a",events:{click:"_clicked"},initialize:function(){},_clicked:function(){this._disabled||this.options.cb()},render:function(){return this.$el.html('<i class="'+this.options.icon+' icon-white"></i>'+this.options.name),this},disable:function(){this.$el.addClass("disabled"),this._disabled=!0},enable:function(){this._disabled=!1,this.$el.removeClass("disabled")},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/css_manip/CssManip",[],function(){var o=/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g;return{createStyleElem:function(t){var e=document.createElement("style");return e.type="text/css",t.id&&(e.id=t.id),e},getStyleElem:function(t){var e=document.getElementById(t.id);return!e&&t.create&&(e=this.createStyleElem(t),this.appendStyleElem(e)),e},appendStyleElem:function(t){document.getElementsByTagName("head")[0].appendChild(t)},extractClasses:function(t){for(var e=t.rules||t.cssRules,n={},i=0;i<e.length;++i){var r=e[i].selectorText.match(o);if(r)for(var s=0;s<r.length;++s){n[r[s].substring(1)]=!0}}return n}}}),function(t,e){"use strict";function r(n){var t=Object.keys(n),i=[];return t.forEach(function(t){if("^"==t[0])throw"rules with ^ as their first character are currently unsupported.";var e={regex:new RegExp("^("+t+")"),action:n[t]};i.push(e)}),i}function l(t,e,n){for(var i in"string"==typeof t&&(t=new l.StringStream(t)),this._stream=t,this._currString="",this._state="initial",e=function(t,e){t||(t={}),e||(e={});var n=e.initial;if(n)for(var i in t)n[i]=t[i];else e.initial=t;return e}(e,n),this._rules={},e)this._rules[i]=r(e[i])}l.EOF={toString:function(){return"eof"}},l.IGNORE={toString:function(){return"ignored"}},l.NO_MATCH={msg:"NO SUITABLE CONTINUOUS MATCH"},(l.StringStream=function(t){this._string=t}).prototype={nextString:function(){var t=this._string;return this._string=void 0,t}},l.prototype={lex:function(){var t,e;if(!((o=this._getInput())||""!=this._currString&&this._currString))return l.EOF;this._currString+=o;for(var n=this._rules[this._state];!t;){for(var i=0;i<n.length;++i){var r,s=(r=n[i]).regex.exec(this._currString);s&&(!t||s[0].length>t[0].length)&&(t=s,e=i)}if(!t){var o;if(!(o=this._getInput(!0)))throw l.NO_MATCH;this._currString+=o}}if(this._currString=this._currString.substring(t[0].length),"function"==typeof(r=n[e]).action){var a=r.action(t[0],this);return a===l.IGNORE?this.lex():a}return r.action===l.IGNORE?this.lex():r.action},_getInput:function(t){return!this._currString||""==this._currString||t?this._stream.nextString():""},state:function(t){if(!t)return this._state;this._state=t}},"function"==typeof define?define("lexed",[],function(){return l}):t.Lexed=l}(this),define("strut/themes/StylesheetPreProcessor",["lexed"],function(i){var r={initial:{"/\\*":function(t,e){return e.state("comment"),t},"@[^\\n{]+":function(t,e){return t},"\\s+":function(t,e){return t},"{":function(t,e){return e.state("ruleDefinition"),t},",":function(t,e){return t},"[^{\\s\\/,@]+":function(t,e){return e.state("ruleName"),{text:t}}},ruleName:{"{":function(t,e){return e.state("ruleDefinition"),t},",":function(t,e){return e.state("initial"),t},"[^{,]+":function(t,e){return t}},comment:{"\\*/":function(t,e){return e.state("initial"),t},"\\*":function(t){return t},"[^*]":function(t){return t}},ruleDefinition:{"/\\*":function(t,e){return e.state("comment"),t},"{":function(t,e){return console.log("inner rule"),e.state("innerRule"),t},"[^{}]":function(t){return t},"}":function(t,e){return console.log("initial"),e.state("initial"),t}},innerRule:{"/\\*":function(t,e){return e.state("comment"),t},"[^}]":function(t){return t},"}":function(t,e){return e.state("ruleDefinition"),t}}};return{beforeSave:function(t){for(var e="",n=new i(t,null,r);(token=n.lex())!=i.EOF;)token.text?e+=".strut-surface "+token.text:e+=token;return e},beforeEdit:function(t){return t?t.replace(/.strut-surface /g,""):""}}}),CodeMirror.defineMode("css",function(t,e){"use strict";e.propertyKeywords||(e=CodeMirror.resolveMode("text/css"));var i=t.indentUnit,r=e.hooks||{},o=e.atMediaTypes||{},a=e.atMediaFeatures||{},l=e.propertyKeywords||{},c=e.colorKeywords||{},u=e.valueKeywords||{},h=!!e.allowNested,d=null;function p(t,e){return d=e,t}function f(t,e){var n=t.next();if(r[n]){var i=r[n](t,e);if(!1!==i)return i}if("@"==n)return t.eatWhile(/[\w\\\-]/),p("def",t.current());if("="==n)p(null,"compare");else{if(("~"==n||"|"==n)&&t.eat("="))return p(null,"compare");if('"'==n||"'"==n)return e.tokenize=s(n),e.tokenize(t,e);if("#"==n)return t.eatWhile(/[\w\\\-]/),p("atom","hash");if("!"==n)return t.match(/^\s*\w*/),p("keyword","important");if(/\d/.test(n))return t.eatWhile(/[\w.%]/),p("number","unit");if("-"!==n)return/[,+>*\/]/.test(n)?p(null,"select-op"):"."==n&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?p("qualifier","qualifier"):":"==n?p("operator",n):/[;{}\[\]\(\)]/.test(n)?p(null,n):("u"==n&&t.match("rl(")?(t.backUp(1),e.tokenize=m):t.eatWhile(/[\w\\\-]/),p("property","variable"));if(/\d/.test(t.peek()))return t.eatWhile(/[\w.%]/),p("number","unit");if(t.match(/^[^-]+-/))return p("meta","meta")}}function s(r,s){return function(t,e){for(var n,i=!1;null!=(n=t.next())&&(n!=r||i);)i=!i&&"\\"==n;return i||(s&&t.backUp(1),e.tokenize=f),p("string","string")}}function m(t,e){return t.next(),t.match(/\s*[\"\']/,!1)?e.tokenize=f:e.tokenize=s(")",!0),p(null,"(")}return{startState:function(t){return{tokenize:f,baseIndent:t||0,stack:[],lastToken:null}},token:function(t,e){if(e.tokenize=e.tokenize||f,e.tokenize==f&&t.eatSpace())return null;var n=e.tokenize(t,e);n&&"string"!=typeof n&&(n=p(n[0],n[1]));var i=e.stack[e.stack.length-1];if("variable"==n)return"variable-definition"==d&&e.stack.push("propertyValue"),e.lastToken="variable-2";if("property"==n){var r=t.current().toLowerCase();"propertyValue"==i?n=u.hasOwnProperty(r)?"string-2":c.hasOwnProperty(r)?"keyword":"variable-2":"rule"==i?l.hasOwnProperty(r)||(n+=" error"):"block"==i?n=l.hasOwnProperty(r)?"property":c.hasOwnProperty(r)?"keyword":u.hasOwnProperty(r)?"string-2":"tag":i&&"@media{"!=i?"@media"==i?n=o[t.current()]?"attribute":/^(only|not)$/.test(r)?"keyword":"and"==r?"error":a.hasOwnProperty(r)?"error":"attribute error":"@mediaType"==i?n=o.hasOwnProperty(r)?"attribute":"and"==r?"operator":(/^(only|not)$/.test(r),"error"):"@mediaType("==i?l.hasOwnProperty(r)||(o.hasOwnProperty(r)?n="error":"and"==r?n="operator":/^(only|not)$/.test(r)?n="error":n+=" error"):n="@import"==i?"tag":"error":n="tag"}else"atom"==n?i&&"@media{"!=i&&"block"!=i?"propertyValue"==i?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())||(n+=" error"):n="error":n="builtin":"@media"==i&&"{"==d&&(n="error");if("{"==d)if("@media"==i||"@mediaType"==i)e.stack[e.stack.length-1]="@media{";else{var s=h?"block":"rule";e.stack.push(s)}else"}"==d?("interpolation"==i&&(n="operator"),e.stack.pop(),"propertyValue"==i&&e.stack.pop()):"interpolation"==d?e.stack.push("interpolation"):"@media"==d?e.stack.push("@media"):"@import"==d?e.stack.push("@import"):"@media"==i&&/\b(keyword|attribute)\b/.test(n)?e.stack[e.stack.length-1]="@mediaType":"@mediaType"==i&&","==t.current()?e.stack[e.stack.length-1]="@media":"("==d?"@media"==i||"@mediaType"==i?(e.stack[e.stack.length-1]="@mediaType",e.stack.push("@mediaType(")):e.stack.push("("):")"==d?("propertyValue"==i&&e.stack.pop(),e.stack.pop()):":"==d&&"property"==e.lastToken?e.stack.push("propertyValue"):"propertyValue"==i&&";"==d?e.stack.pop():"@import"==i&&";"==d&&e.stack.pop();return e.lastToken=n},indent:function(t,e){var n=t.stack.length;return/^\}/.test(e)&&(n-="propertyValue"==t.stack[n-1]?2:1),t.baseIndent+n*i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}),function(){function t(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=!0;return e}var e=t(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),n=t(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),i=t(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-inside","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","zoom","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-profile","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","writing-mode"]),r=t(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),s=t(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);function o(t,e){for(var n,i=!1;null!=(n=t.next());){if(i&&"/"==n){e.tokenize=null;break}i="*"==n}return["comment","comment"]}CodeMirror.defineMIME("text/css",{atMediaTypes:e,atMediaFeatures:n,propertyKeywords:i,colorKeywords:r,valueKeywords:s,hooks:{"<":function(t,e){function n(t,e){for(var n,i=0;null!=(n=t.next());){if(2<=i&&">"==n){e.tokenize=null;break}i="-"==n?i+1:0}return["comment","comment"]}if(t.eat("!"))return(e.tokenize=n)(t,e)},"/":function(t,e){return!!t.eat("*")&&(e.tokenize=o)(t,e)}},name:"css"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:e,atMediaFeatures:n,propertyKeywords:i,colorKeywords:r,valueKeywords:s,allowNested:!0,hooks:{":":function(t){return!!t.match(/\s*{/)&&[null,"{"]},$:function(t){return t.match(/^[\w-]+/),":"==t.peek()?["variable","variable-definition"]:["variable","variable"]},"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=o)(t,e):["operator","operator"]},"#":function(t){return t.eat("{")?["operator","interpolation"]:(t.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css"})}(),define("codemirror/modes/css",["codemirror/codemirror"],function(){}),define("strut/themes/StylesheetProvider",["tantaman/web/widgets/CodeEditor","tantaman/web/widgets/Button","tantaman/web/css_manip/CssManip","css!styles/strut.themes/stylesheetEditor.css","./StylesheetPreProcessor","codemirror/modes/css"],function(t,e,n,i,r,s){var o=new t({class:"stylesheetEditor",title:"Edit CSS",placeholder:"/*.example {\n\tborder: 4px groove orange;\n}*/",mode:"css"}),a=n.getStyleElem({id:"userStylesheet",create:!0}),l=!1;function c(t){this._cssEditor=o,this._editorModel=t,a.innerHTML=t.customStylesheet(),t.deck().on("change:customStylesheet",this._editorSheetChanged,this),this._button=new e({icon:"icon-edit",cb:this._launch.bind(this),name:"CSS"}),this._button.$el.addClass("iconBtns btn-grouped"),this._cssSaved=this._cssSaved.bind(this),l||(l=!0)}return $("#modals").append(o.render().$el),c.prototype={view:function(){return this._button},_launch:function(){var t=this._editorModel.customStylesheet();this._cssEditor.show(this._cssSaved,r.beforeEdit(t))},_cssSaved:function(t){t=r.beforeSave(t),a.innerHTML=t,this._editorModel.customStylesheet(t),this._cssEditor.hide()},_editorSheetChanged:function(t,e){a.innerHTML=e},dispose:function(){this._editorModel.deck().off(null,null,this)}},c}),define("tantaman/web/widgets/PopoverTextbox",["libs/backbone"],function(t){return t.View.extend({events:{"click .ok":"_save","click .cancel":"hide",click:"_stopProp",mousedown:"_stopProp"},className:"popover",initialize:function(){this.hide=this.hide.bind(this),this.template=JST["tantaman.web.widgets/PopoverTextbox"]},show:function(t,e,n){console.log("Showing popover"),this._cb=e,this.$el.css(t),this.$el.css("display","block"),this.$input.val(n),this.$input.focus()},hide:function(){this.$el.css("display",""),this.$input.val("")},_save:function(t){t.stopPropagation(),this._cb(this.$input.val())},_stopProp:function(t){t.stopPropagation()},render:function(){return this.$el.html(this.template(this.options)),this.$input=this.$el.find("input"),this},remove:function(){t.View.prototype.remove.apply(this,arguments)},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/themes/ClassEditor",["tantaman/web/widgets/Button","tantaman/web/widgets/PopoverTextbox"],function(n,i){function t(t){this._button=new n({icon:"icon-plus",cb:this._launch.bind(this),name:"Class"}),this._appended=!1,this._button.$el.addClass("iconBtns btn-grouped"),this._button.disable(),this._deck=t.deck(),this._popover=new i({title:"Classes: "}),this._popover.render();var e=this._deck.get("activeSlide");e&&this._activeSlideChanged(this._deck,e),this._deck.on("change:activeSlide",this._activeSlideChanged,this),this._classesSaved=this._classesSaved.bind(this)}return t.prototype={view:function(){return this._button},_activeSlideChanged:function(t,e){this._activeSlide&&this._activeSlide.off(null,null,this),this._activeSlide=e,this._activeSlide&&(this._activeSlide.on("change:activeComponent",this._activeComponentsChanged,this),this._activeComponentsChanged(e))},_activeComponentsChanged:function(t){this._activeComponents=this._activeSlide.selected,this._activeComponents.length?this._button.enable():this._button.disable(),this._popover.hide()},_launch:function(){this._appended||($(".slideContainer").append(this._popover.$el),this._appended=!0);this._activeComponents.length?this._popover.show({left:this._activeComponents[0].get("x"),top:this._activeComponents[0].get("y")},this._classesSaved,this._activeComponents[0].customClasses()):alert("Please, select some component first.")},_classesSaved:function(e){this._activeComponents.forEach(function(t){t.customClasses(e)}),this._popover.hide()},dispose:function(){this._activeSlide&&this._activeSlide.off(null,null,this),this._deck.off(null,null,this),this._popover.remove()}},t}),define("strut/themes/main",["./BackgroundProvider","./AvailableBackgrounds","./AvailableSurfaces","./StylesheetProvider","./ClassEditor"],function(e,n,i,r,s){"use strict";var o={create:function(t){return new e({backgrounds:n,editorModel:t,selector:".operatingTable .slideContainer",attr:"Background",template:JST["strut.themes/BackgroundChooserDropdown"]})}},a={create:function(t){return new e({backgrounds:i,editorModel:t,selector:".strut-surface",attr:"Surface",template:JST["strut.themes/SurfaceChooserDropdown"]})}},l={create:function(t){return new r(t)}},c={create:function(t){return new s(t)}};return{initialize:function(t){t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"slide-editor":!0,overview:!0},overflow:!1}},o),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"slide-editor":!0,overview:!0},overflow:!1}},a),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{overview:!0,"slide-editor":!0},overflow:!0}},l),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{overview:!0,"slide-editor":!0},overflow:!0}},c)}}}),function(){for(var i,a,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc"},d={},p={},f={},l=!1,c=!1,t=1;t<20;++t)r[111+t]="f"+t;for(t=0;t<=9;++t)r[t+96]=t;function e(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function m(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return r[t.which]?r[t.which]:n[t.which]?n[t.which]:String.fromCharCode(t.which).toLowerCase()}function g(t,e){t=t||{};var n,i=!1;for(n in f)t[n]&&f[n]>e?i=!0:f[n]=0;i||(c=!1)}function v(t,e,n,i,r){var s,o,a,l,c=[],u=n.type;if(!d[t])return[];for("keyup"==u&&y(t)&&(e=[t]),s=0;s<d[t].length;++s)(o=d[t][s]).seq&&f[o.seq]!=o.level||u==o.action&&(("keypress"!=u||n.metaKey||n.ctrlKey)&&(a=e,l=o.modifiers,a.sort().join(",")!==l.sort().join(","))||(i&&o.combo==r&&d[t].splice(s,1),c.push(o)));return c}function b(t,e,n){o.stopCallback(e,e.target||e.srcElement,n)||!1===t(e,n)&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0)}function s(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e,n,i=m(t);i&&("keyup"!=t.type||l!=i?("keydown"==t.type?o.pressed[i]=!0:"keyup"==t.type&&delete o.pressed[i],o.handleKey(i,(n=[],(e=t).shiftKey&&n.push("shift"),e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),n),t)):l=!1)}function y(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function w(t,e,n){return n||(n=function(){if(!i)for(var t in i={},r)95<t&&t<112||r.hasOwnProperty(t)&&(i[r[t]]=t);return i}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function x(e,t,n,i){f[e]=0,i||(i=w(t[0],[]));var r,s=function(){c=i,++f[e],clearTimeout(a),a=setTimeout(g,1e3)},o=function(t){b(n,t,e),"keyup"!==i&&(l=m(t)),setTimeout(g,10)};for(r=0;r<t.length;++r)_(t[r],r<t.length-1?s:o,i,e,r)}function _(t,e,n,i,r){p[t+":"+n]=e;var s,o,a,l=(t=t.replace(/\s+/g," ")).split(" "),c=[];if(1<l.length)x(t,l,e,n);else{for(a="+"===t?["+"]:t.split("+"),s=0;s<a.length;++s)o=a[s],h[o]&&(o=h[o]),n&&"keypress"!=n&&u[o]&&(o=u[o],c.push("shift")),y(o)&&c.push(o);n=w(o,c,n),d[o]||(d[o]=[]),v(o,c,{type:n},!i,t),d[o][i?"unshift":"push"]({callback:e,modifiers:c,action:n,seq:i,level:r,combo:t})}}e(document,"keypress",s),e(document,"keydown",s),e(document,"keyup",s);var o={bind:function(t,e,n){return function(t,e,n){for(var i=0;i<t.length;++i)_(t[i],e,n)}(t=t instanceof Array?t:[t],e,n),this},unbind:function(t,e){return o.bind(t,function(){},e)},trigger:function(t,e){return p[t+":"+e]&&p[t+":"+e]({},t),this},reset:function(){return d={},p={},this},stopCallback:function(t,e){return!(-1<(" "+e.className+" ").indexOf(" mousetrap "))&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.contentEditable&&"true"==e.contentEditable)},handleKey:function(t,e,n){var i,r=v(t,e,n),s={},o=0,a=!1;for(i=0;i<r.length;++i)r[i].seq?(a=!0,o=Math.max(o,r[i].level),s[r[i].seq]=1,b(r[i].callback,n,r[i].combo)):a||c||b(r[i].callback,n,r[i].combo);n.type!=c||y(t)||g(s,o)},pressed:{}};window.Mousetrap=o,"function"==typeof define&&define.amd&&define("libs/mousetrap",o)}(),define("strut/editor/GlobalEvents",["libs/mousetrap","libs/backbone"],function(t,e){"use strict";var n=_.extend({pressed:t.pressed},e.Events);return t.bind(["ctrl+x","command+x"],function(t){n.trigger("cut",t)}),t.bind(["ctrl+c","command+c"],function(t){n.trigger("copy",t)}),t.bind(["ctrl+v","command+v"],function(t){n.trigger("paste",t)}),t.bind(["del","command+backspace"],function(t){n.trigger("delete",t)}),t.bind(["ctrl+z","command+z"],function(t){n.trigger("undo",t)}),t.bind(["ctrl+y","command+y"],function(t){n.trigger("redo",t)}),$(window).blur(function(){Object.keys(n.pressed).forEach(function(t){delete n.pressed[t]})}),n}),define("strut/editor/main",["./GlobalEvents","lang"],function(n,i){"use strict";return{initialize:function(e){(-1!=navigator.appVersion.indexOf("Mac")?[["undo","+Z"],["redo","+Y"],["cut","+X"],["copy","+C"],["paste","+V"],["delete","+"]]:[["undo","Ctrl+Z"],["redo","Ctrl+Y"],["cut","Ctrl+X"],["copy","Ctrl+C"],["paste","Ctrl+V"],["delete","Del"]]).forEach(function(t){e.register({interfaces:"strut.editor.glob.action",meta:{title:i[t[0]],action:t[0],hotkey:t[1]}},function(){n.trigger(t[0])})})}}}),define("common/FileUtils",[],function(){var n;return n={baseName:function(t,e){var n;return"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),-1!==(n=t.lastIndexOf("/"))&&n+1<t.length&&(t=t.substring(n+1,t.length)),null!=e&&(n=t.lastIndexOf(e))+e.length===t.length&&(t=t.substring(0,n)),t},imageType:function(t){var e;return 0===t.indexOf("data:")?(e=t.indexOf(";"),t.substring(11,e).toUpperCase()):n.extension(t)},extension:function(t){var e,n;return-1!==(n=t.lastIndexOf("."))&&n+1<t.length?(-1!==(n=(e=t.substring(n+1,t.length)).lastIndexOf("?"))&&(e=e.substring(0,n)),e.toUpperCase()):""},type:function(t){switch(t){case"MP4":return"video/mp4";case"WEBM":return"video/webm";case"OGG":return"video/ogg";default:return""}},createDownloadAttrs:function(t,e,n){var i,r;return i=new Blob([e],{type:t}),{href:r=window.URL.createObjectURL(i),download:n,downloadurl:[t,n,r].join(":")}},toText:function(t,e){var n;if(console.log(t.type),null!=t)return(n=new FileReader).onload=function(t){return e(t.target.result)},n.readAsText(t)}}}),define("strut/exporter/json/View",["libs/backbone","common/FileUtils","lang"],function(e,i,t){"use strict";return e.View.extend({initialize:function(){this.name="JSON",this._rendered=!1,this._dlSupported=window.dlSupported,this.$el.html('<div class="alert alert-info">'+t.strut_exporter_json.explain+"</div>"),this._dlSupported&&this.$el.append('<div class="alert alert-success">'+t.strut_exporter_json.click_below+"</div>")},show:function(t,e){this._$modal=e;var n=this._$modal.find(".ok");this._dlSupported?(n.html('<i class="icon-download-alt icon-white"></i>'),this._makeDownloadable(n)):(n.html(""),window.hasFlash?this._populateDownloadify():this._populateTextArea()),t.append(this.$el)},_makeDownloadable:function(t){var e=i.createDownloadAttrs("application/json",JSON.stringify(this._exportable.export(),null,2),this._exportable.identifier()+".json"),n=t[0];n.download=e.download,n.href=e.href,n.dataset.downloadurl=e.downloadurl},_populateTextArea:function(){var t=this.$el.find("textarea");0==t.length&&(t=$('<textarea style="width: 500px; height: 200px;"></textarea>'),this.$el.append(t)),t.val(JSON.stringify(this._exportable.export()))},_populateDownloadify:function(){var t=this.$el.find("#downloadify");if(0==t.length){t=$('<p id="downloadify"></p>'),this.$el.append(t),console.log("Puplating downloadify");var e=this;setTimeout(function(){Downloadify.create(t[0],{filename:function(){return e._exportable.identifier()+".json"},data:function(){return JSON.stringify(e._exportable.export(),null,2)},onComplete:function(){},onCancel:function(){},onError:function(){alert("Error exporting")},swf:"preview_export/download_assist/downloadify.swf",downloadImage:"preview_export/download_assist/download.png",width:100,height:30,transparent:!1,append:!1})},0)}},hide:function(){this.$el.detach(),this.hidden()},hidden:function(){if(this._dlSupported){var t=this._$modal.find(".ok");window.URL.revokeObjectURL(t.attr("href"))}else this.$el.find("textarea").val("")},render:function(){},constructor:function(t){this._exportable=t,e.View.prototype.constructor.call(this)}})}),define("strut/exporter/json/main",["./View"],function(e){"use strict";var n={createView:function(t){return new e(t.exportable)}};return{initialize:function(t){t.register({interfaces:"strut.exporter"},n)}}}),define("libs/jszip",[],function(){var v=function(t,e){this.files={},this.root="",t&&this.load(t,e)};v.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},v.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},v.prototype=function(){var o=function(t,e,n){this.name=t,this.data=e,this.options=n};o.prototype={asText:function(){var t=this.data;return null==t?"":(this.options.base64&&(t=b.decode(t)),this.options.binary&&(t=v.prototype.utf8decode(t)),t)},asBinary:function(){var t=this.data;return null==t?"":(this.options.base64&&(t=b.decode(t)),this.options.binary||(t=v.prototype.utf8encode(t)),t)},asUint8Array:function(){return v.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return v.utils.string2Uint8Array(this.asBinary()).buffer}};var f=function(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},m=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},r=function(t,e,n){var i,r=a(t);if(r&&l.call(this,r),!0===(i=(i=n)||{}).base64&&null==i.binary&&(i.binary=!0),(i=m(i,v.defaults)).date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),(n=i).dir||null==e)n.base64=!1,n.binary=!1,e=null;else if(v.support.uint8array&&e instanceof Uint8Array)n.base64=!1,n.binary=!0,e=v.utils.uint8Array2String(e);else if(v.support.arraybuffer&&e instanceof ArrayBuffer){n.base64=!1,n.binary=!0;var s=new Uint8Array(e);e=v.utils.uint8Array2String(s)}else n.binary&&!n.base64&&(!0!==n.optimizedBinaryString&&(e=v.utils.string2binary(e)),delete n.optimizedBinaryString);return this.files[t]=new o(t,e,n)},a=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},l=function(t){if("/"!=t.slice(-1)&&(t+="/"),!this.files[t]){var e=a(t);e&&l.call(this,e),r.call(this,t,null,{dir:!0})}return this.files[t]},g=function(t,e,n){var i,r,s=e!==t.name,o=t.asBinary(),a=t.options;i=a.date.getHours(),i<<=6,i|=a.date.getMinutes(),i<<=5,i|=a.date.getSeconds()/2,r=a.date.getFullYear()-1980,r<<=4,r|=a.date.getMonth()+1,r<<=5,r|=a.date.getDate();var l=null!==o&&0!==o.length;if(n=a.compression||n,!v.compressions[n])throw n+" is not a valid compression method !";var c=v.compressions[n],u=l?c.compress(o):"",h="";return h+="\n\0",h+=s?"\0\b":"\0\0",h+=l?c.magic:v.compressions.STORE.magic,h+=f(i,2),h+=f(r,2),h+=l?f(this.crc32(o),4):"\0\0\0\0",h+=l?f(u.length,4):"\0\0\0\0",h+=l?f(o.length,4):"\0\0\0\0",h+=f(e.length,2),{header:h+="\0\0",compressedData:u}};return{load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,i,r,s=[];for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],r=new o(i.name,i.data,m(i.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,r)&&s.push(r));return s},file:function(n,t,e){if(1===arguments.length){if(n instanceof RegExp){var i=n;return this.filter(function(t,e){return!e.options.dir&&i.test(t)})}return this.filter(function(t,e){return!e.options.dir&&t===n})[0]||null}return n=this.root+n,r.call(this,n,t,e),this},folder:function(n){if(!n)return this;if(n instanceof RegExp)return this.filter(function(t,e){return e.options.dir&&n.test(t)});var t=this.root+n,e=l.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(n){n=this.root+n;var t=this.files[n];if(t||("/"!=n.slice(-1)&&(n+="/"),t=this.files[n]),t)if(t.options.dir)for(var e=this.filter(function(t,e){return e.name.slice(0,n.length)===n}),i=0;i<e.length;i++)delete this.files[e[i].name];else delete this.files[n];return this},generate:function(t){var e=(t=m(t||{},{base64:!0,compression:"STORE",type:"base64"})).compression.toUpperCase();if(!v.compressions[e])throw e+" is not a valid compression method !";var n=[],i=[],r=0;for(var s in this.files)if(this.files.hasOwnProperty(s)){var o,a,l=this.files[s],c=this.utf8encode(l.name),u=g.call(this,l,c,e);o=v.signature.LOCAL_FILE_HEADER+u.header+c+u.compressedData,a=v.signature.CENTRAL_FILE_HEADER+"\0"+u.header+"\0\0\0\0\0\0"+(!0===this.files[s].options.dir?"\0\0\0":"\0\0\0\0")+f(r,4)+c,r+=o.length,i.push(o),n.push(a)}var h=i.join(""),d=n.join(""),p=h+d+(v.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(i.length,2)+f(i.length,2)+f(d.length,4)+f(h.length,4)+"\0\0");switch(t.type.toLowerCase()){case"uint8array":return v.utils.string2Uint8Array(p);case"arraybuffer":return v.utils.string2Uint8Array(p).buffer;case"blob":return v.utils.string2Blob(p);case"base64":return t.base64?b.encode(p):p;default:return p}},crc32:function(t,e){if(""===t||void 0===t)return 0;var n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0===e&&(e=0);e^=-1;for(var i=0,r=t.length;i<r;i++)e=e>>>8^n[255&(e^t.charCodeAt(i))];return-1^e},clone:function(){var t=new v;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t},utf8encode:function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):(127<i&&i<2048?e+=String.fromCharCode(i>>6|192):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128)),e+=String.fromCharCode(63&i|128))}return e},utf8decode:function(t){for(var e="",n=0,i=0,r=0,s=0;n<t.length;)(i=t.charCodeAt(n))<128?(e+=String.fromCharCode(i),n++):191<i&&i<224?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),s=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&s),n+=3);return e}}}(),v.compressions={STORE:{magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t}}},v.support={arraybuffer:"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,uint8array:"undefined"!=typeof Uint8Array,blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var t=new ArrayBuffer(0);try{return 0===new Blob([t],{type:"application/zip"}).size}catch(t){}try{var e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return e.append(t),0===e.getBlob("application/zip").size}catch(t){}return!1}()},v.utils={string2binary:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},string2Uint8Array:function(t){if(!v.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n},uint8Array2String:function(t){if(!v.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},string2Blob:function(t){if(!v.support.blob)throw new Error("Blob is not supported by this browser");var e=v.utils.string2Uint8Array(t).buffer;try{return new Blob([e],{type:"application/zip"})}catch(t){}try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(e),n.getBlob("application/zip")}catch(t){}throw new Error("Bug : can't construct the Blob.")}};var h,b=(h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",{encode:function(t,e){for(var n,i,r,s,o,a,l,c="",u=0;u<t.length;)s=(n=t.charCodeAt(u++))>>2,o=(3&n)<<4|(i=t.charCodeAt(u++))>>4,a=(15&i)<<2|(r=t.charCodeAt(u++))>>6,l=63&r,isNaN(i)?a=l=64:isNaN(r)&&(l=64),c=c+h.charAt(s)+h.charAt(o)+h.charAt(a)+h.charAt(l);return c},decode:function(t,e){var n,i,r,s,o,a,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)n=h.indexOf(t.charAt(c++))<<2|(s=h.indexOf(t.charAt(c++)))>>4,i=(15&s)<<4|(o=h.indexOf(t.charAt(c++)))>>2,r=(3&o)<<6|(a=h.indexOf(t.charAt(c++))),l+=String.fromCharCode(n),64!=o&&(l+=String.fromCharCode(i)),64!=a&&(l+=String.fromCharCode(r));return l}});return v}),define("common/Calcium",["libs/backbone"],function(o){function a(t){return t instanceof o.Model||t instanceof o.Collection}return{Model:o.Model.extend({toJSON:function(n,i){if(n)return o.Model.prototype.toJSON.apply(this,arguments);var t={};for(var e in this.attributes){var r=this.attributes[e];if(a(r))t[e]=r.toJSON(n,i);else if(i&&r instanceof Array){var s=[];t[e]=s,r.forEach(function(t,e){a(t)?s.push(t.toJSON(n,i)):s.push(t)})}else t[e]=r}return t}}),Collection:o.Collection.extend({toJSON:function(n,i){if(n)return o.Collection.prototype.toJSON.apply(this,arguments);var r=[];return this.models.forEach(function(t,e){r.push(t.toJSON(n,i))}),r}})}}),define("common/Math2",{round:function(t,e){var n;return null!=e||(e=0),n=Math.pow(10,e),Math.round(t*n)/n},toDeg:function(t){return 180*t/Math.PI},toRads:function(t){return t*Math.PI/180},compare:function(t,e,n){return Math.abs(t-e)<n},rotatePt:function(t,e){return e<0?{x:t.x*Math.cos(e)+t.y*Math.sin(e),y:-1*t.x*Math.sin(e)+t.y*Math.cos(e)}:{x:t.x*Math.cos(e)-t.y*Math.sin(e),y:t.x*Math.sin(e)+t.y*Math.cos(e)}},rotatePtE:function(t,e){return e<0?{left:t.left*Math.cos(e)+t.top*Math.sin(e),top:-1*t.left*Math.sin(e)+t.top*Math.cos(e)}:{left:t.left*Math.cos(e)-t.top*Math.sin(e),top:t.left*Math.sin(e)+t.top*Math.cos(e)}}}),define("strut/deck/SpatialObject",["common/Calcium","common/Math2"],function(t,i){"use strict";return t.Model.extend({initialize:function(){},setInt:function(t,e){if("string"==typeof e)try{e=parseInt(e,10)}catch(t){return}this.set(t,Math.round(e))},setFloat:function(t,e,n){if("string"==typeof e)try{e=parseFloat(e)}catch(t){return}e=i.round(e,n||2),this.set(t,e)},constructor:function(){t.Model.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/ComponentFactory",[],function(){"use strict";function e(t){var e=t.get("strut.ComponentModel");this._modelCtors={},e.forEach(function(t){this._modelCtors[t.meta().type]=t.service()},this),this._viewCtors={},t.get("strut.ComponentView").forEach(function(t){this._viewCtors[t.meta().type]=t.service()},this),this._drawers={},t.get("strut.ComponentDrawer").forEach(function(t){this._drawers[t.meta().type]=t.service()},this)}return e.prototype={createView:function(t){var e=t.get("type"),n=this._viewCtors[e];if(n)return new n({model:t})},createModel:function(t,e){if("ImageModel"==t.type&&(t.type="Image"),"string"==typeof t)var n=t;else n=t.type;var i=this._modelCtors[n];if(i)return new i(t,e)},getDrawer:function(t){return this._drawers[t]}},{initialize:function(t){log("Initing"),this.instance||(this.instance=new e(t))}}}),define("strut/deck/ComponentCommands",[],function(){var t,e,n;function i(t,e,n,i){this.start=t,this.end=e.get(n)||0,this.component=e,this.name=i,this.attr=n}return i.prototype={do:function(){this.component.slide&&this.component.slide.set("active",!0),this.component.set(this.attr,this.end),this.component.set("selected",!0)},undo:function(){this.component.slide&&this.component.slide.set("active",!0),this.component.set(this.attr,this.start),this.component.set("selected",!0)}},(t=function(t,e){this.slide=t,this.components=e.slice(0)}).prototype={do:function(){this.slide.set("active",!0),this.slide.__doAdd(this.components)},undo:function(){this.slide.set("active",!0),this.slide.__doRemove(this.components)},name:"Add Comp"},(e=function(t,e){this.slide=t,this.components=e.slice(0)}).prototype={do:function(){this.slide.set("active",!0),this.slide.__doRemove(this.components)},undo:function(){this.slide.set("active",!0),this.slide.__doAdd(this.components)},name:"Remove Comp"},(n=function(t,e){return this.startLoc=t,this.component=e,this.endLoc={x:this.component.get("x"),y:this.component.get("y")},this}).prototype={do:function(){this.component.slide&&this.component.slide.set("active",!0),this.component.set(this.endLoc),this.component.set("selected",!0)},undo:function(){this.component.slide&&this.component.slide.set("active",!0),this.component.set(this.startLoc),this.component.set("selected",!0)},name:"Move"},{Add:t,Remove:e,Move:n,SkewX:function(t,e){return new i(t,e,"skewX","Skew X")},SkewY:function(t,e){return new i(t,e,"skewY","Skew Y")},Rotate:function(t,e){return new i(t,e,"rotate","Rotate")},Scale:function(t,e){return new i(t,e,"scale","Scale")},TextScale:function(t,e){return new i(t,e,"size","Scale")},Text:function(t,e){return new i(t,e,"text","Text")}}}),define("strut/deck/Slide",["libs/backbone","./SpatialObject","strut/slide_components/ComponentFactory","common/Math2","./ComponentCommands","tantaman/web/undo_support/CmdListFactory","strut/editor/GlobalEvents"],function(i,t,r,s,n,e,o){var a,l=e.managedInstance("editor");return a={z:0,impScale:3,rotateX:0,rotateY:0,rotateZ:0},t.extend({type:"slide",selected:[],initialize:function(){var t,n;void 0===(t=this.get("components"))?this.set("components",[]):(n=[],this.set("components",n),t.forEach(function(t){var e;return e=t instanceof i.Model?t.clone():r.instance.createModel(t),n.push(e),this._registerWithComponent(e)},this)),_.defaults(this.attributes,a),this.on("unrender",this.unrendered,this),this.on("change:markdown",this._contentsChanged,this),(t=this.get("components")).forEach(function(t){t.get("selected")&&this._selectionChanged(t,!0,{multiselect:!0})},this)},unrendered:function(){this.get("components").forEach(function(t){t.trigger("unrender",!0)})},_registerWithComponent:function(t){t.slide=this,t.on("dispose",this._selectionChanged,this),t.on("change:selected",this._selectionChanged,this),t.on("change",this._contentsChanged,this)},customClasses:function(){return""},getPositionData:function(){return{x:this.get("x"),y:this.get("y"),z:this.get("z"),impScale:this.get("impScale"),rotateX:this.get("rotateX"),rotateY:this.get("rotateY"),rotateZ:this.get("rotateZ")}},selectComponents:function(t){(t=_.isArray(t)?t:[t]).length&&(this.get("components").forEach(function(t){return t.set("selected",!1)}),t.forEach(function(t){t.set("selected",!0,{multiselect:!0})}))},unselectComponents:function(t){t=t||this.selected,(t=_.isArray(t)?t:[t]).forEach(function(t){t.set("selected",!1)})},_selectionChanged:function(e,t,n){var i=(n=n||{}).multiselect||o.pressed.ctrl||o.pressed.meta||o.pressed.shift;if(t)i||this.get("components").forEach(function(t){if(e!==t)return t.set("selected",!1)}),-1==this.selected.indexOf(e)&&this.selected.push(e),this.trigger("change:activeComponent",this,e,t);else{var r=this.selected.indexOf(e);-1!==r&&this.selected.splice(r,1),this.trigger("change:activeComponent",this,void 0)}},_contentsChanged:function(t,e){this.trigger("contentsChanged")},add:function(t){(t=_.isArray(t)?t.slice():[t]).forEach(function(t){this._placeComponent(t)},this);var e=new n.Add(this,t);e.do(),l.push(e)},__doAdd:function(t){t.forEach(function(t){this.get("components").push(t),this._registerWithComponent(t),this.trigger("contentsChanged"),this.trigger("change:components.add",this,t)},this),this.selectComponents(t)},_placeComponent:function(i){return this.get("components").forEach(function(t){var e,n;if(e=t.get("x"),n=t.get("y"),s.compare(e,i.get("x"),5)&&s.compare(n,i.get("y"),5))return i.set({x:e+20,y:n+20})})},remove:function(t){t=_.isArray(t)?t:[t],l.pushdo(new n.Remove(this,t))},__doRemove:function(t){t.forEach(function(t){var e;return-1!==(e=this.get("components").indexOf(t))?(this.get("components").splice(e,1),this.trigger("contentsChanged"),this.trigger("change:components.remove",this,t),this._selectionChanged(t,!1),t.trigger("unrender"),t.off(),t):void 0},this)},dispose:function(){this.set({active:!1,selected:!1}),this.trigger("dispose",this),this.off()},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/deck/SlideCollection",["common/Calcium","./Slide"],function(t,e){return t.Collection.extend({model:e,initialize:function(){this.on("add",this._updateIndexes,this),this.on("remove",this._updateIndexes,this)},_updateIndexes:function(){this.models.forEach(function(t,e){return t.set("index",e)})},slidesReorganized:function(n){var i=[];this.models.forEach(function(t,e){i.push(n[e].getPositionData())},this);var r={silent:!0};return i.forEach(function(t,e){this.models[e].set(t,r)},this),this.models.forEach(function(t,e){t.set("index",e)}),this},_swapTransitionPositions:function(t,e){var n,i;i=t.getPositionData(),n={silent:!0},t.set(e.getPositionData(),n),e.set(i,n)}})}),define("strut/deck/SlideCommands",["strut/deck/Slide"],function(t){var e,n,i;return(e=function(t,e,n){this.deck=t,this.selected=this.deck.selected.slice(0),this.activeSlide=this.deck.get("activeSlide"),this.slides=e?e.slice(0):null,this.index=n}).prototype={name:"Add Slide",do:function(){this.deck._doAdd(this.slides,{preserveIndexes:!1,at:this.index})},undo:function(){this.deck._doRemove(this.slides),this.deck.selectSlides(this.selected,this.activeSlide)}},(n=function(t,e){this.deck=t,this.slides=e.slice(0)}).prototype={name:"Remove Slide",do:function(){this.deck._doRemove(this.slides)},undo:function(){this.deck._doAdd(this.slides,{preserveIndexes:!0})}},(i=function(t,e,n){return this.deck=t,this.slides=e.slice(0),this.destination=n,this.selected=this.deck.selected.slice(0),this.activeSlide=this.deck.get("activeSlide"),this}).prototype={do:function(){var t=this.deck.get("slides");this.initial_slides_order=t.models.slice(0),this.initial_selection=this.deck.selected.slice(0),this.initial_active_slide=this.deck.get("activeSlide"),t.remove(this.slides,{silent:!0}),t.add(this.slides,{silent:!0,at:this.destination}),t.slidesReorganized(this.initial_slides_order),this.deck.unselectSlides(),this.deck.selectSlides(this.selected,this.activeSlide),this.deck.trigger("slideMoved")},undo:function(){var t=this.deck.get("slides").models.slice(0);this.deck.get("slides").models=this.initial_slides_order,this.deck.get("slides").slidesReorganized(t),this.deck.unselectSlides(),this.deck.selectSlides(this.initial_selection,this.initial_active_slide),this.deck.trigger("slideMoved")},name:"Move Slide"},{Add:e,Remove:n,Move:i}}),define("strut/deck/DeckUpgrade",[],function(){function e(t){t.background&&(t.background=void 0),t.surface&&(t.surface=void 0)}return{to1_0:function(t){"1.0"!=t.deckVersion&&(t.deckVersion="1.0",e(t),t.slides.forEach(function(t){e(t)}))}}}),define("strut/deck/CustomBackgrounds",["common/Calcium"],function(t){return t.Model.extend({initialize:function(){var t=this.get("bgs");t||(t=[],this.set("bgs",t)),this._bgIndex={},t.forEach(function(t){this._bgIndex[t]=!0},this),this._lastPrune=t.length},prune:function(t){var e=this.deck.get("slides"),n=this.deck.get("background"),i=this.deck.get("surface"),r={},s=this.get("bgs");if(0!=s.length){e.forEach(function(t){var e=t.get("background");e&&(r[e]=!0),(e=t.get("surface"))&&(r[e]=!0)}),n&&(r[n]=!0),i&&(r[i]=!0);for(var o=s.length-1;-1<o;--o){var a=s[o].klass;null==r[a]&&a!==t&&(s.splice(o,1),delete this._bgIndex[a])}this._lastPrune=s.length}},add:function(t){var e="bg-custom-"+t.replace("#",""),n=this._bgIndex[e];return 10<this.get("bgs").length-this._lastPrune&&this.prune(e),n?{existed:!0,klass:e}:(this.get("bgs").push({klass:e,style:t}),{existed:!(this._bgIndex[e]=!0),klass:e})},constructor:function(){t.Model.prototype.constructor.apply(this,arguments)}})}),define("strut/deck/Deck",["common/Calcium","./SlideCollection","./SlideCommands","tantaman/web/undo_support/CmdListFactory","strut/deck/Slide","strut/editor/GlobalEvents","./DeckUpgrade","./CustomBackgrounds"],function(i,e,s,n,o,a,r,l){return i.Model.extend({selected:[],initialize:function(){var t;this.undoHistory=n.managedInstance("editor"),this.set("slides",new e),(t=this.get("slides")).on("add",this._slideAdded,this),t.on("remove",this._slideRemoved,this),t.on("reset",this._slidesReset,this),this.set("background","bg-default")},set:function(t,e,n){return"activeSlide"===t&&this._activeSlideChanging(e,n),i.Model.prototype.set.apply(this,arguments)},moveSlides:function(n,i){n=_.isArray(n)?n:[n];var r=!1;n.forEach(function(t,e){n[e].get("index")!=i+e&&(r=!0)},this),r&&this.undoHistory.pushdo(new s.Move(this,n,i))},slideBackground:function(){return this.get("background")||"bg-transparent"},slideSurface:function(){return this.get("surface")||"bg-default"},addCustomBgClassFor:function(t){return this.get("customBackgrounds").add(t)},import:function(t){var e,n;r.to1_0(t),n=this.get("slides"),void 0!==(e=this.get("activeSlide"))&&e.unselectComponents(),this.set("activeSlide",void 0),this.set("background",t.background),this.set("fileName",t.fileName),this.set("surface",t.surface),this.set("customStylesheet",t.customStylesheet),this.set("deckVersion",t.deckVersion),this.set("cannedTransition",t.cannedTransition);var i=new l(t.customBackgrounds);this.set("customBackgrounds",i),this.undoHistory.clear(),n.reset(t.slides),i.deck=this,i.prune()},_activeSlideChanging:function(t,e){var n=this.get("activeSlide");t!==n&&(n&&(n.unselectComponents(),n.set({active:!1,selected:!1},e)),t&&t.set({selected:!0,active:!0},e))},_slideAdded:function(t,e,n){(n=n||{}).at=_.isNumber(n.at)?n.at:e.length,this.set("activeSlide",t,n),this.trigger("slideAdded",t,n),this._registerWithSlide(t)},_slideDisposed:function(t){t.off(null,null,this)},_slideRemoved:function(t,e,n){n=n||{},this.get("activeSlide")===t&&(n.index<e.length?this.set("activeSlide",e.at(n.index)):0<n.index?this.set("activeSlide",e.at(n.index-1)):this.set("activeSlide",void 0)),t.dispose()},_slidesReset:function(t,e){return(e=e||{}).previousModels.forEach(function(t){t.dispose()}),this.trigger("slidesReset",t),t.forEach(function(t){this._registerWithSlide(t),t.get("active")?(t.trigger("change:active",t,!0),t.trigger("change:selected",t,!0),this._selectionChanged(t,!0)):t.get("selected")&&t.set("selected",!1)},this)},_slideActivated:function(t,e,n){e&&this.set("activeSlide",t,n)},selectSlides:function(t,e){(t=_.isArray(t)?t:[t]).length&&(e=e||t[0],this.get("slides").forEach(function(t){return t.set("selected",!1)}),e.set("active",!0,{multiselect:!0}),t.forEach(function(t){t.set("selected",!0,{multiselect:!0})}))},unselectSlides:function(t,e){t=t||this.get("slides").models,(t=_.isArray(t)?t:[t]).forEach(function(t){!e&&t.get("active")||t.set("selected",!1)})},_selectionChanged:function(e,t,n){var i=(n=n||{}).multiselect||a.pressed.ctrl||a.pressed.meta||a.pressed.shift;if(t)i||this.get("slides").forEach(function(t){e!==t&&t.set("selected",!1)}),-1==this.selected.indexOf(e)&&(this.selected.push(e),this._sortSelectedSlides());else{var r=this.selected.indexOf(e);-1!==r&&(this.selected.splice(r,1),this._sortSelectedSlides())}},_sortSelectedSlides:function(){this.selected.sort(function(t,e){return t.get("index")-e.get("index")})},_registerWithSlide:function(t){t.on("change:active",this._slideActivated,this),t.on("change:selected",this._selectionChanged,this),t.on("dispose",this._slideDisposed,this)},create:function(t){this.undoHistory.pushdo(new s.Add(this,null,t))},add:function(t,e){this.undoHistory.pushdo(new s.Add(this,t,e))},_doAdd:function(t,e){var n=this.get("slides");if(t=t||[new o],t=_.isArray(t)?t:[t],!(e=e||{}).preserveIndexes&&this.selected.length)var i=n.indexOf(this.selected[this.selected.length-1]);for(var r=0;r<t.length;r++){var s=t[r];s.on("unrender",s.unrendered,s),e.at=_.isNumber(e.at)?e.at+r:(e.preserveIndexes?s.get("index"):i+1+r)||0,n.add(s,e)}this.selectSlides(t)},remove:function(t){t=_.isArray(t)?t:[t],this.undoHistory.pushdo(new s.Remove(this,t))},_doRemove:function(t,e){t=_.isArray(t)?t:[t];var n=this.get("slides");t.slice(0).reverse().forEach(function(t){n.remove(t,e),t.off(),t.dispose()})},undo:function(){this.undoHistory.undo()},redo:function(){this.undoHistory.redo()}})}),function(){var h={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:e,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:e,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:e,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};function l(t){this.tokens=[],this.tokens.links={},this.options=t||p.defaults,this.rules=h.normal,this.options.gfm&&(this.options.tables?this.rules=h.tables:this.rules=h.gfm)}h.bullet=/(?:[*+-]|\d+\.)/,h.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,h.item=t(h.item,"gm")(/bull/g,h.bullet)(),h.list=t(h.list)(/bull/g,h.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),h._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",h.html=t(h.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,h._tag)(),h.paragraph=t(h.paragraph)("hr",h.hr)("heading",h.heading)("lheading",h.lheading)("blockquote",h.blockquote)("tag","<"+h._tag)("def",h.def)(),h.normal=d({},h),h.gfm=d({},h.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),h.gfm.paragraph=t(h.paragraph)("(?!","(?!"+h.gfm.fences.source.replace("\\1","\\2")+"|"+h.list.source.replace("\\1","\\3")+"|")(),h.tables=d({},h.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),l.rules=h,l.lex=function(t,e){return new l(e).lex(t)},l.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},l.prototype.token=function(t,e){var n,i,r,s,o,a,l,c,u;for(t=t.replace(/^ +$/gm,"");t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),1<r[0].length&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t))t=t.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(e&&(r=this.rules.nptable.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},c=0;c<a.align.length;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].split(/ *\| */);this.tokens.push(a)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),s=r[2],this.tokens.push({type:"list_start",ordered:1<s.length}),n=!1,u=(r=r[0].match(this.rules.item)).length,c=0;c<u;c++)l=(a=r[c]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==u-1&&(s===(o=h.bullet.exec(r[c+1])[0])||1<s.length&&1<o.length||(t=r.slice(c+1).join("\n")+t,c=u-1)),i=n||/\n\n(?!\s*$)/.test(a),c!==u-1&&(n="\n"===a.charAt(a.length-1),i||(i=n)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]};else if(e&&(r=this.rules.table.exec(t))){for(t=t.substring(r[0].length),a={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<a.align.length;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:e,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:e,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};function i(t,e){if(this.options=e||p.defaults,this.links=t,this.rules=n.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function c(t){this.tokens=[],this.token=null,this.options=t||p.defaults}function u(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function t(i,r){return i=i.source,r=r||"",function t(e,n){return e?(n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),i=i.replace(e,n),t):new RegExp(i,r)}}function e(){}function d(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function p(t,n,i){if(i||"function"==typeof n){i||(i=n,n=null);var r,s,o=(n=d({},p.defaults,n||{})).highlight,e=0;try{r=l.lex(t,n)}catch(t){return i(t)}s=r.length;var a=function(){var t,e;try{t=c.parse(r,n)}catch(t){e=t}return n.highlight=o,e?i(e):i(null,t)};if(!o||o.length<3)return a();if(delete n.highlight,!s)return a();for(;e<r.length;e++)!function(n){"code"!==n.type?--s||a():o(n.text,n.lang,function(t,e){if(null==e||e===n.text)return--s||a();n.text=e,n.escaped=!0,--s||a()})}(r[e])}else try{return n&&(n=d({},p.defaults,n)),c.parse(l.lex(t,n),n)}catch(t){if(t.message+="\nPlease report this to https://github.com/chjj/marked.",(n||p.defaults).silent)return"<p>An error occured:</p><pre>"+u(t.message+"",!0)+"</pre>";throw t}}n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=t(n.link)("inside",n._inside)("href",n._href)(),n.reflink=t(n.reflink)("inside",n._inside)(),n.normal=d({},n),n.pedantic=d({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=d({},n.normal,{escape:t(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:t(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=d({},n.gfm,{br:t(n.br)("{2,}","*")(),text:t(n.gfm.text)("{2,}","*")()}),i.rules=n,i.output=function(t,e,n){return new i(e,n).output(t)},i.prototype.output=function(t){for(var e,n,i,r,s="";t;)if(r=this.rules.escape.exec(t))t=t.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(t))t=t.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):i=n=u(r[1]),s+='<a href="'+i+'">'+n+"</a>";else if(r=this.rules.url.exec(t))t=t.substring(r[0].length),s+='<a href="'+(i=n=u(r[1]))+'">'+n+"</a>";else if(r=this.rules.tag.exec(t))t=t.substring(r[0].length),s+=this.options.sanitize?u(r[0]):r[0];else if(r=this.rules.link.exec(t))t=t.substring(r[0].length),s+=this.outputLink(r,{href:r[2],title:r[3]});else if((r=this.rules.reflink.exec(t))||(r=this.rules.nolink.exec(t))){if(t=t.substring(r[0].length),e=(r[2]||r[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){s+=r[0].charAt(0),t=r[0].substring(1)+t;continue}s+=this.outputLink(r,e)}else if(r=this.rules.strong.exec(t))t=t.substring(r[0].length),s+="<strong>"+this.output(r[2]||r[1])+"</strong>";else if(r=this.rules.em.exec(t))t=t.substring(r[0].length),s+="<em>"+this.output(r[2]||r[1])+"</em>";else if(r=this.rules.code.exec(t))t=t.substring(r[0].length),s+="<code>"+u(r[2],!0)+"</code>";else if(r=this.rules.br.exec(t))t=t.substring(r[0].length),s+="<br>";else if(r=this.rules.del.exec(t))t=t.substring(r[0].length),s+="<del>"+this.output(r[1])+"</del>";else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),s+=u(this.smartypants(r[0]));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return s},i.prototype.outputLink=function(t,e){return"!"!==t[0].charAt(0)?'<a href="'+u(e.href)+'"'+(e.title?' title="'+u(e.title)+'"':"")+">"+this.output(t[1])+"</a>":'<img src="'+u(e.href)+'" alt="'+u(t[1])+'"'+(e.title?' title="'+u(e.title)+'"':"")+">"},i.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t},i.prototype.mangle=function(t){for(var e,n="",i=t.length,r=0;r<i;r++)e=t.charCodeAt(r),.5<Math.random()&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},c.parse=function(t,e){return new c(e).parse(t)},c.prototype.parse=function(t){this.inline=new i(t.links,this.options),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+' id="'+this.token.text.toLowerCase().replace(/[^\w]+/g,"-")+'">'+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var t=this.options.highlight(this.token.text,this.token.lang);null!=t&&t!==this.token.text&&(this.token.escaped=!0,this.token.text=t)}return this.token.escaped||(this.token.text=u(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var e,n,i,r,s,o="";for(o+="<thead>\n<tr>\n",n=0;n<this.token.header.length;n++)e=this.inline.output(this.token.header[n]),o+="<th",this.token.align[n]&&(o+=' style="text-align:'+this.token.align[n]+'"'),o+=">"+e+"</th>\n";for(o+="</tr>\n</thead>\n",o+="<tbody>\n",n=0;n<this.token.cells.length;n++){for(i=this.token.cells[n],o+="<tr>\n",s=0;s<i.length;s++)r=this.inline.output(i[s]),o+="<td",this.token.align[s]&&(o+=' style="text-align:'+this.token.align[s]+'"'),o+=">"+r+"</td>\n";o+="</tr>\n"}return"<table>\n"+(o+="</tbody>\n")+"</table>\n";case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return"<blockquote>\n"+o+"</blockquote>\n";case"list_start":var a=this.token.ordered?"ol":"ul";for(o="";"list_end"!==this.next().type;)o+=this.tok();return"<"+a+">\n"+o+"</"+a+">\n";case"list_item_start":for(o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return"<li>"+o+"</li>\n";case"loose_item_start":for(o="";"list_item_end"!==this.next().type;)o+=this.tok();return"<li>"+o+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},e.exec=e,p.options=p.setOptions=function(t){return d(p.defaults,t),p},p.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1},p.Parser=c,p.parser=c.parse,p.Lexer=l,p.lexer=l.lex,p.InlineLexer=i,p.inlineLexer=i.output,p.parse=p,"object"==typeof exports?module.exports=p:"function"==typeof define&&define.amd?define("marked",[],function(){return p}):this.marked=p}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("strut/presentation_generator/impress/ImpressGenerator",["handlebars","common/Math2","marked","strut/deck/Utils"],function(r,e,s,o){var a=window.config.slide;return new(function(){function t(){var i=this;r.registerHelper("renderComponent",function(t,e){var n;if(n="",e&&"string"==typeof e&&-1!=(e=e.split(" ")).indexOf(t.get("type")))return n;switch(t.get("type")){case"Image":n="SVG"===t.get("imageType")?JST["strut.presentation_generator.impress/SVGImage"](t.attributes):JST["strut.presentation_generator.impress/Image"](t.attributes);break;case"TextBox":n=JST["strut.presentation_generator.impress/TextBox"](i.convertTextBoxData(t.attributes));break;case"Video":n="html5"===t.get("videoType")?JST["strut.presentation_generator.impress/Video"](t.attributes):JST["strut.presentation_generator.impress/Youtube"](t.attributes);break;case"WebFrame":n=JST["strut.presentation_generator.impress/WebFrame"](t.attributes);break;case"Shape":n=JST["strut.presentation_generator.impress/Shape"](t.attributes)}return new r.SafeString(n)}),r.registerHelper("scaleX",function(t){return t*a.size.width/a.overviewSize.width}),r.registerHelper("scaleY",function(t){return t*a.size.height/a.overviewSize.height}),r.registerHelper("toDeg",function(t){return 180*t/Math.PI}),r.registerHelper("negate",function(t){return-1*t}),r.registerHelper("round",function(t){return e.round(t,2)}),r.registerHelper("extractBG",function(t){var e,n,i,r,s;if(null!=t&&0<t.length){for(n="",i=t[0],r=0,s=(e=["-moz-","-webkit-","-o-","-ms-",""]).length;r<s;r++)n+="background-image: "+e[r]+i+"; ";return n}return""}),r.registerHelper("or",function(t,e){return t||e}),r.registerHelper("determineBG",function(t,e){var n=o.slideBackground(t,e,{surfaceForDefault:!0,transparentForSurface:!0});return n&&0==n.indexOf("img:")?"":n}),r.registerHelper("determineSurface",function(t,e){var n=o.slideSurface(t,e);return n&&"bg-default"!=n&&-1==n.indexOf("img:")?" "+n+" ":""}),r.registerHelper("slideBGImg",function(t){var e=t.get("background");return e&&0==e.indexOf("img:")?"background-image: url("+e.substring(4)+");":""}),r.registerHelper("marked",function(t){return t?new r.SafeString(s(t)):""}),r.registerHelper("shapeSvg",function(){var t="",e="";return this.markup&&(this.fill&&(t+=' fill="'+this.fill+'" '),this.scale&&(t+=' height="'+this.scale.height+'" ',t+=' width="'+this.scale.width+'" '),e=new r.SafeString(this.markup.replace("<svg ","<svg "+t))),e}),r.registerHelper("isBGImg",function(t,e){return t&&0==t.indexOf("img:")?e.fn(this):e.inverse(this)}),r.registerHelper("isBGClass",function(t,e){return t&&0==t.indexOf("img:")?e.inverse(this):e.fn(this)}),r.registerHelper("getBGImgStyle",function(t){return"background-image: url("+t.substring(4)+");"});var n={};r.registerHelper("counter_set",function(t,e){n[t]=e}),r.registerHelper("counter_incAndGet",function(t){return n[t]=n[t]+1}),r.registerPartial("ComponentContainer",JST["strut.presentation_generator.impress/ComponentContainer"]),r.registerPartial("TransformContainer",JST["strut.presentation_generator.impress/TransformContainer"]),r.registerPartial("SVGContainer",JST["strut.presentation_generator.impress/SVGContainer"]),r.registerPartial("PerSlideSurfaceStylesheet",JST["strut.presentation_generator/PerSlideSurfaceStylesheet"]),r.registerPartial("CustomBgStylesheet",JST["strut.presentation_generator/CustomBgStylesheet"])}return t.prototype.render=function(t){var n,e,i,r,s,o,a=t.attributes;return e=a.slides,6,n=0,e.each(function(t){var e;return e=t.get("x"),y=t.get("y"),null==e&&(t.set("x",280*n+180),t.set("y",280*(n/6|0)+180)),(null==i||e<i)&&(i=e),(null==r||y<r)&&(r=y),(null==s||s<e)&&(s=e),(null==o||y>o)&&(o=y),++n}),a.overviewX=(s+i)/2,a.overviewY=(o+r)/2,JST["strut.presentation_generator.impress/ImpressTemplate"](t)},t.prototype.getStartPreviewFn=function(t,e,n){return function(){console.log("Loaded!"),window.location.hash="#/step-"+(t.activeSlideIndex()+1),e.previewWind.document.open(),e.previewWind.document.write(n),e.previewWind.document.close()}},t.prototype.convertTextBoxData=function(t){var e;return(e=_.extend({},t)).text=new r.SafeString(t.text),e},t}())}),define("strut/exporter/zip/browser/Archiver",["libs/jszip","strut/deck/Deck","strut/presentation_generator/impress/ImpressGenerator","common/FileUtils"],function(r,i,s,o){var n;return n={includeImages:!0,includeFonts:!0},function(){function t(t,e){this.presentation=t,this.options=e,this.options||(this.options={}),this.canvas=$("<canvas></canvas>")[0],this._archivedImages={},this._imageIdx=0,_.defaults(this.options,n)}return t.prototype.create=function(){var t,e,n=this;return this.archive=new r,this.previewExportDir=this.archive.folder("preview_export"),this.imagesDir=this.previewExportDir.folder("images"),this.scriptsDir=this.previewExportDir.folder("scripts"),this.fontsDir=this.previewExportDir.folder("fonts"),this.cssDir=this.previewExportDir.folder("css"),(t=new i).import(this.presentation.toJSON(!1,!0)),t.get("slides").each(function(t){return n.processComponents(t.get("components"))}),e="<!doctype html><html>"+s.render(t.attributes)+"</html>",this._archiveIndexHtml(e),this._archiveScripts(),this._archiveFonts(),this._archiveCss(),this._archivedImages={},this.archive.generate()},t.prototype.createSimple=function(t,e){var n,i=this;return this.archive=new r,this.previewExportDir=this.archive.folder("preview_export"),this.scriptsDir=this.previewExportDir.folder("scripts"),this.cssDir=this.previewExportDir.folder("css"),n="<!doctype html><html>"+s.render(this.presentation.attributes)+"</html>",this._archiveIndexHtml(n),this._archiveScripts(function(){return i._archiveCss(function(){return t(i.archive.generate(e))})})},t.prototype.processComponents=function(t){var e=this;return t.forEach(function(t){return e.processComponent(t)})},t.prototype.processComponent=function(t){if("ImageModel"===t.get("type")&&this.options.includeImages)return this._archiveImage(t)},t.prototype._archiveIndexHtml=function(t){return this.archive.file("index.html",t)},t.prototype._archiveScripts=function(e){var n=this;return $.get("preview_export/scripts/impress.js",function(t){return n.scriptsDir.file("impress.js",t),e()})},t.prototype._archiveFonts=function(){},t.prototype._archiveCss=function(e){var n=this;return $.get("zip/main.css",function(t){return n.cssDir.file("main.css",t),e()})},t.prototype._archiveImage=function(t){var e,n;if(!this._archivedImages[t.get("src")])return this._archivedImages[t.get("src")]=!0,n=t.cachedImage,this.canvas.width=n.naturalWidth,this.canvas.height=n.naturalHeight,this.canvas.getContext("2d").drawImage(n,0,0),e=this._imageIdx+o.baseName(t.get("src")),this.imagesDir.file(e,this.canvas.toDataURL().replace(/^data:image\/(png|jpg);base64,/,""),{base64:!0}),t.set("src","preview_export/images/"+e)},t}()}),define("strut/exporter/zip/browser/View",["libs/backbone","./Archiver","lang"],function(e,r,t){return e.View.extend({name:"Zip",initialize:function(){this.$el.html('<div class="alert alert-info">The most effective way to archive your rendered presentation is to:<p><ol><li>Click the <div class="btn-group iconBtns"><button class="btn btn-success disabled"><i class="icon-play icon-white"></i>Present</button></div> button</li><li>Press <code>Ctrl+S</code>(windows) or <code>+S</code>(Mac) to save the entire presentation to disk.</li></ol></p>')},show:function(t,e){this._$modal=e,this._$modal.find(".ok").html(""),t.append(this.$el)},_makeDownloadable:function(n){var t=new r(this._exportable.adapted.deck()),i=this;t.createSimple(function(t){var e=n[0];e.href=window.URL.createObjectURL(t),e.download=i._exportable.identifier()+".zip",e.dataset.downloadurl=["application/json",e.download,e.href].join(":")},{type:"blob"})},hide:function(){this.$el.detach(),this.hidden()},hidden:function(){this._$modal.find(".ok")},render:function(){return this.$el.html("Zipping while running Strut from file:// URLs is currently not supported due to browser security restrictions.  The best way zip your presentation in this case is to:<br/><ol><li>Click Preview, then</li><li>Use your browser's <code>Save Page As</code> functionality<br/>to save the entire presentation to disk.</li></ol>"),this},constructor:function(t){this._exportable=t,e.View.prototype.constructor.call(this)}})}),define("strut/exporter/zip/browser/main",["./View"],function(e){"use strict";var n={createView:function(t){return new e(t.exportable)}};return{initialize:function(t){t.register({interfaces:"strut.exporter"},n)}}}),define("strut/importer/json/main",["common/FileUtils"],function(i){"use strict";var e={import:function(t,e,n){"text/json"==t.type||""==t.type||"application/json"==t.type?i.toText(t,function(t){e.importPresentation(JSON.parse(t))}):n()}};return{initialize:function(t){t.register({interfaces:"strut.importer"},e)}}}),define("tantaman/web/widgets/HiddenOpen",["libs/backbone"],function(t){return t.View.extend({className:"dispNone",events:{"change input[type='file']":"_fileChosen"},initialize:function(t,e){if(this._cb=e,null!=t)return t.on("click",this.trigger.bind(this))},trigger:function(t){return null!=t&&(this._cb=t),this.$input.click()},_fileChosen:function(t){var e;return e=t.target.files[0],this._cb(e)},render:function(){return this.$input=$('<input type="file"></input>'),this.$el.html(this.$input),this}})}),define("framework/Iterator",[],function(){function e(t){this._val=t,this._crsr=0}function n(t){this._object=t,this._iter=new e(Object.keys(t))}return e.prototype={next:function(){return this._val[this._crsr++]},hasNext:function(){return this._crsr<this._val.length}},n.prototype={next:function(){return this._object[this._iter.next()]},hasNext:function(){return this._iter.hasNext()}},function(t){return Array.isArray(t)||t instanceof Array?new e(t):new n(t)}}),define("strut/importer/main",["tantaman/web/widgets/MenuItem","framework/ServiceCollection","tantaman/web/widgets/HiddenOpen","framework/Iterator","lang"],function(e,n,t,s,i){"use strict";var o=null,a=new t;function r(r){a.trigger(function(t){var e,n,i;e=t,n=r,i=new s(o),function t(){i.hasNext()&&i.next().import(e,n,t)}()})}$("body").append(a.render().$el);var l={createMenuItems:function(t){return new e({title:i.import,handler:r,model:t})}};return{initialize:function(t){o=new n(t,"strut.importer",n.toServiceConverter),t.register({interfaces:"strut.LogoMenuItemProvider"},l)}}}),define("tantaman/web/widgets/TabbedModal",["libs/backbone"],function(e){return e.View.extend({events:{hidden:"_hidden"},className:"tabbedModal modal hide",initialize:function(){},__template:function(){return JST["tantaman.web.widgets/TabbedModal"]},_providerSelected:function(t,e){if(e){var n=$(e.currentTarget);if(this.$lastProviderTab&&this.$lastProviderTab[0]==n[0])return}this.$lastProviderTab&&this.$lastProviderTab.removeClass("active"),this.$lastProviderTab=n,this.$lastProviderTab.addClass("active"),this.__currentProvider&&this.__currentProvider.hide(),this.__currentProvider=this.__tabCollection[t],this.__providerSelected(this.__currentProvider,e),this.__currentProvider.show(this.$tabContent,this.$el)},__providerSelected:function(t,e){},_hidden:function(){this.__currentProvider&&this.__currentProvider.hidden()},show:function(t,e){this.__cb=t,this.__$title.text(e),this.__currentProvider&&this.__currentProvider.show(this.$tabContent,this.$el),this.$el.modal("show")},render:function(){this.$el.html(this.__template()(this.__tabCollection)),this.__$ok=this.$el.find(".ok"),this.__$title=this.$el.find(".title"),this.$tabContent=this.$el.find(".tabContent");var n=this,t=this.$el.find(".providerTab");return t.each(function(e){$(this).click(function(t){n._providerSelected(e,t)})}),0<this.__tabCollection.length&&n._providerSelected(0,{currentTarget:t[0]}),this},constructor:function(t){this.__tabCollection=t,e.View.prototype.constructor.call(this)}})}),define("strut/exporter/ExportImportModal",["tantaman/web/widgets/TabbedModal"],function(i){return i.extend({intialize:function(){},constructor:function(e,t){var n=[];t.forEach(function(t){n.push(t.createView(e))}),i.prototype.constructor.call(this,n)}})}),define("strut/exporter/main",["tantaman/web/widgets/MenuItem","framework/ServiceCollection","./ExportImportModal","lang"],function(e,n,i,r){"use strict";var s=$("#modals"),o=null,a=null,l={createMenuItems:function(t){return null==o&&((o=new i(t,a)).render(),s.append(o.$el)),[new e({title:r.export,modal:o})]}};return{initialize:function(t){a=new n(t,"strut.exporter",n.toServiceConverter),t.register({interfaces:["strut.LogoMenuItemProvider"]},l),t.register({interfaces:"strut.exporter.Collection"},a)}}}),define("strut/presentation_generator/impress/main",["./ImpressGenerator"],function(e){"use strict";var n={displayName:"Impress",id:"impress",capabilities:{freeformStepping:!0},generate:function(t){return e.render(t)},getSlideHash:function(t){return"#/step-"+(t.activeSlideIndex()+1)}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},n)}}}),define("strut/presentation_generator/bespoke/BespokeGenerator",[],function(){return{render:function(t){return JST["strut.presentation_generator.bespoke/BespokeTemplate"](t)},getStartPreviewFn:function(t,e,n){return function(){var t=e.previewWind;t.document.open(),t.document.write(n),t.document.close()}},getSlideHash:function(){return""}}}),define("strut/presentation_generator/bespoke/main",["./BespokeGenerator"],function(e){"use strict";var n={displayName:"Bespoke",id:"bespoke",capabilities:{cannedTransitions:!0},generate:function(t){return e.render(t)},getStartPreviewFn:function(){return e.getStartPreviewFn.apply(e,arguments)},getSlideHash:function(t){return"#"+(t.activeSlideIndex()+1)}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},n)}}}),define("strut/presentation_generator/handouts/main",[],function(){"use strict";var e={displayName:"Handouts",id:"handouts",generate:function(t){return JST["strut.presentation_generator.handouts/HandoutsTemplate"](t)},getSlideHash:function(){return""}};return{initialize:function(t){t.register({interfaces:"strut.presentation_generator"},e)}}}),define("strut/presentation_generator/main",["framework/ServiceCollection"],function(n){return{initialize:function(t){var e=new n(t,"strut.presentation_generator",function(t){return t.service()});t.register("strut.presentation_generator.GeneratorCollection",e)}}}),define("tantaman/web/saver/Saver",[],function(){"use strict";function t(t,e){this.storageInterface=e,Array.isArray(t)?this.exportables=t:this.exportables=[t]}return t.prototype={__save:function(){this.exportables.forEach(function(t){var e=t.export(),n=t.identifier();this.storageInterface.store(n,e)},this)},save:function(){this.__save()}},t}),define("tantaman/web/saver/ExitSaver",["./Saver"],function(n){"use strict";function t(t,e){n.apply(this,arguments),this._unloaded=this._unloaded.bind(this),$(window).unload(this._unloaded)}var e=t.prototype=Object.create(n.prototype);return e._unloaded=function(){this.__save()},e.dispose=function(){$(window).off("unload",this._unloaded)},t}),define("tantaman/web/saver/TimedSaver",["./Saver"],function(i){"use strict";function t(t,e,n){i.call(this,t,n),this._intervalH=setInterval(this.__save.bind(this),e)}return(t.prototype=Object.create(i.prototype)).dispose=function(){clearInterval(this._intervalH)},t}),define("tantaman/web/saver/main",["./ExitSaver","./TimedSaver","./Saver"],function(n,i){var e={timedSaver:function(t,e,n){return new i(t,e,n)},exitSaver:function(t,e){return new n(t,e)},manualSaver:function(t,e){return new Saver(t,e)}};return{initialize:function(t){t.register({interfaces:"tantaman.web.saver.AutoSavers"},e)}}}),define("strut/slide_editor/model/SlideEditorModel",["libs/backbone"],function(e){return e.Model.extend({initialize:function(){this._editorModel.on("launch:preview",this._triggerSave,this),this._editorModel.on("change:modeId",this._triggerSave,this)},deck:function(){return this._editorModel.deck()},activeSlide:function(){return this._editorModel.deck().get("activeSlide")},isMarkdownMode:function(){return"markdown"==this.get("mode")},toggleMarkdown:function(){this.isMarkdownMode()?this.set("mode","preview"):this.set("mode","markdown")},dispose:function(){this._editorModel.off(null,null,this),this.off()},_triggerSave:function(){this.trigger("saveEdits",null)},constructor:function(t){this._editorModel=t.editorModel,e.Model.prototype.constructor.call(this)}})}),function(a,t){var i,e,n=0,r=/^ui-id-\d+$/;function s(t,e){var n,i,r,s=t.nodeName.toLowerCase();return"area"===s?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(r=a("img[usemap=#"+i+"]")[0])&&o(r))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||e)&&o(t)}function o(t){return a.expr.filters.visible(t)&&!a(t).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:(i=a.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){a(t).focus(),n&&n.call(t)},e)}):i.apply(this,arguments)}),scrollParent:function(){var t;return t=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?a(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,n,i=a(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(e){return function(t){return!!a.data(t,e)}}):function(t,e,n){return!!a.data(t,n[3])},focusable:function(t){return s(t,!isNaN(a.attr(t,"tabindex")))},tabbable:function(t){var e=a.attr(t,"tabindex"),n=isNaN(e);return(n||0<=e)&&s(t,!n)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(t,n){var r="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function o(t,e,n,i){return a.each(r,function(){e-=parseFloat(a.css(t,"padding"+this))||0,n&&(e-=parseFloat(a.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(a.css(t,"margin"+this))||0)}),e}a.fn["inner"+n]=function(t){return void 0===t?s["inner"+n].call(this):this.each(function(){a(this).css(i,o(this,t)+"px")})},a.fn["outer"+n]=function(t,e){return"number"!=typeof t?s["outer"+n].call(this,t):this.each(function(){a(this).css(i,o(this,t,!0,e)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=(e=a.fn.removeData,function(t){return arguments.length?e.call(this,a.camelCase(t)):e.call(this)})),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(t,e,n){var i,r=a.ui[t].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([e,n[i]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(t,e){if("hidden"===a(t).css("overflow"))return!1;var n,i=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)}})}(jQuery),u=jQuery,i=0,l=Array.prototype.slice,r=u.cleanData,u.cleanData=function(t){for(var e,n=0;null!=(e=t[n]);n++)try{u(e).triggerHandler("remove")}catch(t){}r(t)},u.widget=function(t,n,e){var i,r,s,o,a={},l=t.split(".")[0];t=t.split(".")[1],i=l+"-"+t,e||(e=n,n=u.Widget),u.expr[":"][i.toLowerCase()]=function(t){return!!u.data(t,i)},u[l]=u[l]||{},r=u[l][t],s=u[l][t]=function(t,e){if(!this._createWidget)return new s(t,e);arguments.length&&this._createWidget(t,e)},u.extend(s,r,{version:e.version,_proto:u.extend({},e),_childConstructors:[]}),(o=new n).options=u.widget.extend({},o.options),u.each(e,function(e,i){var r,s;u.isFunction(i)?a[e]=(r=function(){return n.prototype[e].apply(this,arguments)},s=function(t){return n.prototype[e].apply(this,t)},function(){var t,e=this._super,n=this._superApply;return this._super=r,this._superApply=s,t=i.apply(this,arguments),this._super=e,this._superApply=n,t}):a[e]=i}),s.prototype=u.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix:t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:i}),r?(u.each(r._childConstructors,function(t,e){var n=e.prototype;u.widget(n.namespace+"."+n.widgetName,s,e._proto)}),delete r._childConstructors):n._childConstructors.push(s),u.widget.bridge(t,s)},u.widget.extend=function(t){for(var e,n,i=l.call(arguments,1),r=0,s=i.length;r<s;r++)for(e in i[r])n=i[r][e],i[r].hasOwnProperty(e)&&n!==a&&(u.isPlainObject(n)?t[e]=u.isPlainObject(t[e])?u.widget.extend({},t[e],n):u.widget.extend({},n):t[e]=n);return t},u.widget.bridge=function(s,e){var o=e.prototype.widgetFullName||s;u.fn[s]=function(n){var t="string"==typeof n,i=l.call(arguments,1),r=this;return n=!t&&i.length?u.widget.extend.apply(null,[n].concat(i)):n,t?this.each(function(){var t,e=u.data(this,o);return e?u.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&t!==a?(r=t&&t.jquery?r.pushStack(t.get()):t,!1):void 0:u.error("no such method '"+n+"' for "+s+" widget instance"):u.error("cannot call methods on "+s+" prior to initialization; attempted to call method '"+n+"'")}):this.each(function(){var t=u.data(this,o);t?t.option(n||{})._init():u.data(this,o,new e(n,this))}),r}},u.Widget=function(){},u.Widget._childConstructors=[],u.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=u(e||this.defaultElement||this)[0],this.element=u(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=u.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=u(),this.hoverable=u(),this.focusable=u(),e!==this&&(u.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=u(e.style?e.ownerDocument:e.document||e),this.window=u(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:u.noop,_getCreateEventData:u.noop,_create:u.noop,_init:u.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(u.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:u.noop,widget:function(){return this.element},option:function(t,e){var n,i,r,s=t;if(0===arguments.length)return u.widget.extend({},this.options);if("string"==typeof t)if(s={},t=(n=t.split(".")).shift(),n.length){for(i=s[t]=u.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(t=n.pop(),e===a)return i[t]===a?null:i[t];i[t]=e}else{if(e===a)return this.options[t]===a?null:this.options[t];s[t]=e}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(o,a,t){var l,c=this;"boolean"!=typeof o&&(t=a,a=o,o=!1),t?(a=l=u(a),this.bindings=this.bindings.add(a)):(t=a,a=this.element,l=this.widget()),u.each(t,function(t,e){function n(){if(o||!0!==c.options.disabled&&!u(this).hasClass("ui-state-disabled"))return("string"==typeof e?c[e]:e).apply(c,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||u.guid++);var i=t.match(/^(\w+)\s*(.*)$/),r=i[1]+c.eventNamespace,s=i[2];s?l.delegate(s,r,n):a.bind(r,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){u(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){u(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){u(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){u(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var i,r,s=this.options[t];if(n=n||{},(e=u.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],r=e.originalEvent)for(i in r)i in e||(e[i]=r[i]);return this.element.trigger(e,n),!(u.isFunction(s)&&!1===s.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},u.each({show:"fadeIn",hide:"fadeOut"},function(s,o){u.Widget.prototype["_"+s]=function(e,t,n){"string"==typeof t&&(t={effect:t});var i,r=t?!0===t||"number"==typeof t?o:t.effect||o:s;"number"==typeof(t=t||{})&&(t={duration:t}),i=!u.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&u.effects&&u.effects.effect[r]?e[s](t):r!==s&&e[r]?e[r](t.duration,t.easing,n):e.queue(function(t){u(this)[s](),n&&n.call(e[0]),t()})}}),s=jQuery,o=!1,s(document).mouseup(function(){o=!1}),s.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===s.data(t.target,e.widgetName+".preventClickEvent"))return s.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&s(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&s(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===s.data(t.target,this.widgetName+".preventClickEvent")&&s.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},s(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0))}},_mouseMove:function(t){return s.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return s(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&s.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),(c=jQuery).widget("ui.selectable",c.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=c(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=c(this),e=t.offset();c.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=c("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=c(t.filter,this.element[0]),this._trigger("start",n),c(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=c.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),c(n.target).parents().addBack().each(function(){var t,e=c.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,i=this,r=this.options,s=this.opos[0],o=this.opos[1],a=n.pageX,l=n.pageY;return a<s&&(t=a,a=s,s=t),l<o&&(t=l,l=o,o=t),this.helper.css({left:s,top:o,width:a-s,height:l-o}),this.selectees.each(function(){var t=c.data(this,"selectable-item"),e=!1;t&&t.element!==i.element[0]&&("touch"===r.tolerance?e=!(t.left>a||t.right<s||t.top>l||t.bottom<o):"fit"===r.tolerance&&(e=t.left>s&&t.right<a&&t.top>o&&t.bottom<l),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,i._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),i._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,c(".ui-unselecting",this.element[0]).each(function(){var t=c.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),c(".ui-selecting",this.element[0]).each(function(){var t=c.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),function(p,t){function f(t,e,n){return e<t&&t<e+n}function m(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}p.widget("ui.sortable",p.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||m(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,e){"disabled"===t?(this.options[t]=e,this.widget().toggleClass("ui-sortable-disabled",!!e)):p.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,e){var n=null,i=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),p(t.target).parents().each(function(){if(p.data(this,r.widgetName+"-item")===r)return n=p(this),!1}),p.data(t.target,r.widgetName+"-item")===r&&(n=p(t.target)),!!n&&(!(this.options.handle&&!e&&(p(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,r,s=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},p.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=p("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return p.ui.ddmanager&&(p.ui.ddmanager.current=this),p.ui.ddmanager&&!s.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,r,s=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-p(document).scrollTop()<s.scrollSensitivity?o=p(document).scrollTop(p(document).scrollTop()-s.scrollSpeed):p(window).height()-(t.pageY-p(document).scrollTop())<s.scrollSensitivity&&(o=p(document).scrollTop(p(document).scrollTop()+s.scrollSpeed)),t.pageX-p(document).scrollLeft()<s.scrollSensitivity?o=p(document).scrollLeft(p(document).scrollLeft()-s.scrollSpeed):p(window).width()-(t.pageX-p(document).scrollLeft())<s.scrollSensitivity&&(o=p(document).scrollLeft(p(document).scrollLeft()+s.scrollSpeed))),!1!==o&&p.ui.ddmanager&&!s.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===i||p.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&p.contains(this.element[0],i))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),p.ui.ddmanager&&p.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(p.ui.ddmanager&&!this.options.dropBehaviour&&p.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,p(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),p.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?p(this.domPosition.prev).after(this.currentItem):p(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},p(t).each(function(){var t=(p(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(p(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,s=t.left,o=s+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||a<i+c&&i+c<l,d="y"===this.options.axis||s<e+u&&e+u<o,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:s<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||f(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||f(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!i&&(this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1))},_intersectsWithSides:function(t){var e=f(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=f(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,n,i,r,s=[],o=[],a=this._connectWith();if(a&&t)for(e=a.length-1;0<=e;e--)for(n=(i=p(a[e])).length-1;0<=n;n--)(r=p.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&o.push([p.isFunction(r.options.items)?r.options.items.call(r.element):p(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(o.push([p.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):p(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=o.length-1;0<=e;e--)o[e][0].each(function(){s.push(this)});return p(s)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=p.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,r,s,o,a,l,c=this.items,u=[[p.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):p(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=p(h[e])).length-1;0<=n;n--)(r=p.data(i[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(u.push([p.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):p(r.options.items,r.element),r]),this.containers.push(r));for(e=u.length-1;0<=e;e--)for(s=u[e][1],n=0,l=(o=u[e][0]).length;n<l;n++)(a=p(o[n])).data(this.widgetName+"-item",s),c.push({item:a,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,r;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?p(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),r=i.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)r=this.containers[e].element.offset(),this.containers[e].containerCache.left=r.left,this.containers[e].containerCache.top=r.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,r=(n=n||this).options;r.placeholder&&r.placeholder.constructor!==String||(i=r.placeholder,r.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=p("<"+t+">",n.document[0]).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===t?n.currentItem.children().each(function(){p("<td>&#160;</td>",n.document[0]).attr("colspan",p(this).attr("colspan")||1).appendTo(e)}):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!r.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=p(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var e,n,i,r,s,o,a,l,c,u,h=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!p.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&p.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(i=1e4,r=null,s=(u=h.floating||m(this.currentItem))?"left":"top",o=u?"width":"height",a=this.positionAbs[s]+this.offset.click[s],n=this.items.length-1;0<=n;n--)p.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(u&&!f(this.positionAbs.top+this.offset.click.top,this.items[n].top,this.items[n].height)||(l=this.items[n].item.offset()[s],c=!1,Math.abs(l-a)>Math.abs(l+this.items[n][o]-a)&&(c=!0,l+=this.items[n][o]),Math.abs(l-a)<i&&(i=Math.abs(l-a),r=this.items[n],this.direction=c?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return;r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=p.isFunction(e.helper)?p(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||p("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),p.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&p.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&p.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,p("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(p("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=p(i.containment)[0],e=p(i.containment).offset(),n="hidden"!==p(t).css("overflow"),this.containment=[e.left+(parseInt(p(t).css("borderLeftWidth"),10)||0)+(parseInt(p(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(p(t).css("borderTopWidth"),10)||0)+(parseInt(p(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(p(t).css("borderLeftWidth"),10)||0)-(parseInt(p(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(p(t).css("borderTopWidth"),10)||0)-(parseInt(p(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&p.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,r=t.pageX,s=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&p.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1],s=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:o.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===p.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||p([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}(jQuery),define("jqueryui",["jquery"],function(){}),(h=jQuery).fn.multiselectable=function(a){function e(t){var e,n=h(this),i=n.parent(),r=n.index(),s=i.find(".multiselectable-previous"),o=(s=s.length?s:h(i.find("."+a.selectedClass)[0]).addClass("multiselectable-previous")).index();(t.ctrlKey||t.metaKey)&&(n.hasClass(a.selectedClass)?(n.removeClass(a.selectedClass).removeClass("multiselectable-previous"),n.not(".child").length&&n.nextUntil(":not(.child)").removeClass(a.selectedClass)):(i.find(".multiselectable-previous").removeClass("multiselectable-previous"),n.addClass(a.selectedClass).addClass("multiselectable-previous"),n.not(".child").length&&n.nextUntil(":not(.child)").addClass(a.selectedClass))),t.shiftKey?(i.find(".multiselectable-shift").removeClass(a.selectedClass).removeClass("multiselectable-shift"),o<r?e=n.prevUntil(".multiselectable-previous").add(s).add(n):r<o&&(e=n.nextUntil(".multiselectable-previous").add(s).add(n)),e.addClass(a.selectedClass).addClass("multiselectable-shift")):i.find(".multiselectable-shift").removeClass("multiselectable-shift"),t.ctrlKey||t.metaKey||t.shiftKey||(i.find(".multiselectable-previous").removeClass("multiselectable-previous"),n.hasClass(a.selectedClass)||(i.find("."+a.selectedClass).removeClass(a.selectedClass),n.addClass(a.selectedClass).addClass("multiselectable-previous"),n.not(".child").length&&n.nextUntil(":not(.child)").addClass(a.selectedClass))),a.mousedown(t,n)}function n(t){if(!h(this).is(".ui-draggable-dragging")){var e=h(this),n=e.parent();t.ctrlKey||t.metaKey||t.shiftKey||(n.find(".multiselectable-previous").removeClass("multiselectable-previous"),n.find("."+a.selectedClass).removeClass(a.selectedClass),e.addClass(a.selectedClass).addClass("multiselectable-previous"),e.not(".child").length&&e.nextUntil(":not(.child)").addClass(a.selectedClass)),a.click(t,e)}}return a||(a={}),a=h.extend({},h.fn.multiselectable.defaults,a),this.each(function(){var t=h(this);t.data("multiselectable")||t.data("multiselectable",!0).delegate(a.items,"mousedown",e).delegate(a.items,"click",n).disableSelection()})},h.fn.multiselectable.defaults={click:function(t,e){},mousedown:function(){},selectedClass:"ui-selected",items:"li"},h.fn.multisortable=function(e){e||(e={});var a=h.extend({},h.fn.multisortable.defaults,e);function n(t,e){if(0<e.find("."+a.selectedClass).length){var n=t.data("i"),i=e.find("."+a.selectedClass).filter(function(){return h(this).data("i")<n}).css({position:"",width:"",left:"",top:"",zIndex:""});t.before(i);var r=e.find("."+a.selectedClass).filter(function(){return h(this).data("i")>n}).css({position:"",width:"",left:"",top:"",zIndex:""});t.after(r),setTimeout(function(){r.add(i).addClass(a.selectedClass)},0)}}return this.each(function(){var t=h(this);t.multiselectable({selectedClass:a.selectedClass,click:a.click,items:a.items,mousedown:a.mousedown}),e.cancel=a.items+":not(."+a.selectedClass+")",e.placeholder=a.placeholder,e.start=function(t,e){if(e.item.hasClass(a.selectedClass)){var n=e.item.parent();n.find("."+a.selectedClass).each(function(t){h(this).data("i",t)});var i=n.find("."+a.selectedClass).length*e.item.outerHeight();e.placeholder.height(i)}a.start(t,e)},e.stop=function(t,e){n(e.item,e.item.parent()),a.stop(t,e)},e.sort=function(t,e){var n=e.item.parent(),i=e.item.data("i"),r=parseInt(e.item.css("top").replace("px","")),s=parseInt(e.item.css("left").replace("px",""));h.fn.reverse=void 0===[]._reverse?Array.prototype.reverse:Array.prototype._reverse;var o=0;h("."+a.selectedClass,n).filter(function(){return h(this).data("i")<i}).reverse().each(function(){o+=h(this).outerHeight(),h(this).css({left:s,top:r-o,position:"absolute",zIndex:1e3,width:e.item.width()})}),o=e.item.outerHeight(),h("."+a.selectedClass,n).filter(function(){return h(this).data("i")>i}).each(function(){var t=h(this);t.css({left:s,top:r+o,position:"absolute",zIndex:1e3,width:e.item.width()}),o+=t.outerHeight()}),a.sort(t,e)},e.receive=function(t,e){n(e.item,e.sender),a.receive(t,e)},t.sortable(e).disableSelection()})},h.fn.multisortable.defaults={start:function(t,e){},stop:function(t,e){},sort:function(t,e){},receive:function(t,e){},click:function(t,e){},selectedClass:"ui-selected",placeholder:"placeholder",items:"li"},define("jquery.multisortable",["jquery","jqueryui"],function(){}),define("strut/slide_snapshot/SlideDrawer",["strut/deck/Utils"],function(i){"use strict";function t(t,e,n){this.$el=e,this.model=t,this.$el.css(config.slide.size),this._template=JST["strut.slide_snapshot/SlideDrawer"],this.setSize(n),this.render=this.render.bind(this),this.render=_.debounce(this.render,250),this.model.on("contentsChanged",this.render,this)}return t.prototype={render:function(){return this.$el.html(this._template(this.model.attributes)),this},rescale:function(){this.$el.css(window.browserPrefix+"transform","scale("+this.scale.x+","+this.scale.y+")")},applyBackground:function(t,e,n){i.applyBackground(this.$el,t,e,n)},dispose:function(){this.model.off(null,null,this)},setSize:function(t){t&&(this.size=t,this.scale={x:this.size.width/config.slide.size.width,y:this.size.height/config.slide.size.height},this.rescale())}},t}),define("strut/slide_snapshot/SlideSnapshot",["libs/backbone","./SlideDrawer","css!styles/slide_snapshot/slideSnapshot.css","strut/deck/Utils","strut/editor/GlobalEvents"],function(e,n,t,i,r){"use strict";return e.View.extend({className:"slideSnapshot",events:{select:"_selected","click .removeBtn":"_removeClicked","mousedown .removeBtn":"_removePressed",destroyed:"dispose"},initialize:function(){this.model.on("change:selected",this._selectedChanged,this),this.model.on("change:active",this._activeChanged,this),this.model.on("dispose",this.dispose,this),this.model.on("change:background",this._bgChanged,this),this.model.on("change:surface",this._bgChanged,this),this.options.deck.on("change:background",this._bgChanged,this),this.options.deck.on("change:surface",this._bgChanged,this),this._template=JST["strut.slide_snapshot/SlideSnapshot"]},_selected:function(t,e){e.selected?e.active?this.model.set("active",!0,e):this.model.set("selected",!0,e):this.model.set("selected",!1,e)},_selectedChanged:function(t,e){e?this.$el.addClass("ui-selected"):this.$el.removeClass("ui-selected")},_activeChanged:function(t,e){e?this.$el.addClass("active"):this.$el.removeClass("active")},_bgChanged:function(){this._slideDrawer.applyBackground(this.model,this.options.deck,{surfaceForDefault:!0})},render:function(){this._slideDrawer&&this._slideDrawer.dispose(),this.$el.html(this._template(this.model.attributes));var t=this.$el.find(".slideDrawer");this._slideDrawer=new n(this.model,t,{width:120,height:90});return this._slideDrawer.render(),this.model.get("selected")&&this.$el.addClass("ui-selected"),this.model.get("active")&&this.$el.addClass("active"),this._bgChanged(),this},_removeClicked:function(t){this.remove(!0),t.stopPropagation()},_removePressed:function(t){t.stopPropagation()},remove:function(t){this._slideDrawer.dispose(),this.off(),this.$el.data("jsView",null),this.model.off(null,null,this),this.options.deck.off(null,null,this),e.View.prototype.remove.apply(this,arguments),t&&this.options.deck.remove(this.model)},dispose:function(){this.disposed||(this.disposed=!0,this.remove())},constructor:function(){e.View.prototype.constructor.apply(this,arguments)}})}),define("common/Queue",[],function(){function t(){this._queue=[]}return t.prototype={take:function(){return 0!=this._queue.length?this._queue.shift():null},enqueue:function(t){this._queue.push(t)}},{create:function(){return new t}}}),define("common/Throttler",["common/Queue"],function(n){function t(t,e){this._handle=null,this._delay=t,this._queue=n.create(),this._context=e}return t.prototype={submit:function(t,e){this._handle?e&&this._handleFailedSubmit(t,e):this._internalSubmit(t,e)},cancel:function(){this._queue=n.create(),(this._runLast=null)!=this._handle&&(clearTimeout(this._handle),this._handle=null)},_internalSubmit:function(t,e){var n=this;this._handle=setTimeout(function(){e&&e.arguments?t.apply(n._context,e.arguments):t.call(n._context),n._internalCB()},this._delay)},_internalCB:function(){var t=this._queue.take();if(t)this._handle=this._internalSubmit(t);else if(this._runLast){var e=this._runLast;this._runLast=null,this._internalSubmit(e[0],e[1])}else this._handle=null},_handleFailedSubmit:function(t,e){switch(e.rejectionPolicy){case"queue":this._queue.enqueue(t);break;case"runLast":this._runLast=[t,e]}}},t}),define("strut/slide_editor/model/WellContextMenuModel",["libs/backbone"],function(e){"use strict";return e.Model.extend({initialize:function(){this.subs=[],this._registry=this.editorModel.registry,this._createButtons(),this.subs.push(this._registry.on("registered:strut.WellContextButtonProvider",this._buttonRegistered,this)),this._slideIndex=0},_createButtons:function(){var t=this._registry.get("strut.WellContextButtonProvider"),e=[];t.forEach(function(t){e=e.concat(t.service().createButtons(this.editorModel,this))},this),this.set("contextButtons",e)},slideIndex:function(t){if(null==t)return this._slideIndex;this._slideIndex=t},dispose:function(){console.log("DISPOSING CONTEXT MENU!"),this.subs.forEach(function(t){t.dispose()})},_buttonRegistered:function(t){var e=t.service().createButtons(this.editorModel,this),n=this.get("contextButtons");e.forEach(function(t){n.push(t),this.trigger("change:contextButtons.push",n,t)},this)},constructor:function(t){this.editorModel=t,e.Model.prototype.constructor.call(this)}})}),define("strut/slide_editor/view/WellContextMenu",["libs/backbone","../model/WellContextMenuModel","css!styles/slide_editor/wellContextMenu.css"],function(e,t){"use strict";return e.View.extend({className:"wellContextMenu absolute",initialize:function(){this.model=new t(this._editorModel),this._template=JST["strut.slide_editor/WellContextMenu"],this._currentPos=-1},reposition:function(t){t.y!=this._currentPos.y&&(this.$el.css("top",t.y),this.$el.css("left",t.x),this._currentPos=t)},slideIndex:function(t){this.model.slideIndex(t)},dispose:function(){this.model.dispose()},render:function(){this.$el.html(""),this.model.get("contextButtons").forEach(function(t){this.$el.append(t.render().$el)},this)},constructor:function(t){this._editorModel=t,e.View.prototype.constructor.call(this)}})}),define("strut/slide_editor/view/SlideWell",["libs/backbone","jquery.multisortable","strut/slide_snapshot/SlideSnapshot","common/Throttler","./WellContextMenu","strut/editor/GlobalEvents","css!styles/slide_editor/slideWell.css","tantaman/web/undo_support/CmdListFactory"],function(e,t,s,n,i,r,o,a){"use strict";a.managedInstance("editor");return e.View.extend({events:{mousemove:"_showContextMenu",destroyed:"dispose",mousedown:"_focused"},className:"slideWell",initialize:function(){this._deck.on("slideAdded",this._slideAdded,this),this._deck.on("slideMoved",this._slideMoved,this),this._deck.on("slidesReset",this._slidesReset,this),this._doShowContextMenu=this._doShowContextMenu.bind(this),this._throttler=new n(100),this._contextMenu=new i(this._editorModel),this._contextMenu.render(),this.$slides=$('<div class="'+this.className+'List">'),this.$slides.multisortable({items:"div.slideSnapshot",placeholder:"slidePlaceholder",stop:this._dragStopped.bind(this),mousedown:this._mousedown.bind(this),click:this._clicked.bind(this),axis:"y"}),r.on("cut",this._cut,this),r.on("copy",this._copy,this),r.on("paste",this._paste,this),r.on("delete",this._delete,this),this._clipboard=this._editorModel.clipboard},_focused:function(t){this._editorModel.set("scope","slideWell")},_cut:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._clipboard.setItems(t),this._deck.remove(t)}},_copy:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._clipboard.setItems(t)}},_paste:function(){var t=this._clipboard.getItems();null!=t&&t.length&&null!=t[0].type&&"slide"==t[0].type&&this._deck.add(t)},_delete:function(){if("slideWell"==this._editorModel.get("scope")){var t=this._deck.selected;this._deck.remove(t)}},_clicked:function(t,e){var n=t.ctrlKey||t.metaKey||t.shiftKey;e.trigger("select",{selected:!0,active:!n,multiselect:n})},_mousedown:function(t,e){var n=t.ctrlKey||t.metaKey||t.shiftKey;this.$slides.find("> .ui-selected").trigger("select",{selected:!0,multiselect:n}),this.$slides.find(".active").is(".ui-selected")||n||e.trigger("select",{selected:!0,active:!n,multiselect:n})},_dragStopped:function(t,e){var n=this.$slides.children().index(this.$slides.find(".ui-selected")[0]),i=this._deck.selected;this._initiatedMove=!0,this._deck.moveSlides(i,n),this._initiatedMove=!1},_showContextMenu:function(t){this._throttler.submit(this._doShowContextMenu,{rejectionPolicy:"runLast",arguments:[t]})},_doShowContextMenu:function(t){var e=114*((t.pageY-this.$slides.position().top+40)/114|0)-5;this._contextMenu.reposition({x:this.$slides.width()/2-this._contextMenu.$el.outerWidth()/2,y:e}),this._contextMenu.slideIndex(Math.ceil(e/114))},_slidesReset:function(t){var e=0,n={at:0};t.forEach(function(t){n.at=e,this._slideAdded(t,n),e+=1},this)},_slideAdded:function(t,e){var n=e.at,i=new s({model:t,deck:this._deck,registry:this._registry});if(0==n)this.$slides.prepend(i.render().$el);else{var r=$(".slideSnapshot");n>=r.length?this.$slides.append(i.render().$el):$(r[n]).before(i.render().$el)}},_slideMoved:function(t,e){this._initiatedMove||(this.$slides.empty(),this._slidesReset(this._deck.get("slides").models))},render:function(){this.$slides.html(""),this.$el.html(this.$slides),this._deck.get("slides").forEach(function(t){var e=new s({model:t,deck:this._deck,registry:this._registry});this.$slides.append(e.render().$el)},this),this.$el.append(this._contextMenu.$el);var t=this;return setTimeout(function(){t._doShowContextMenu({pageY:100})},0),this},dispose:function(){this._deck.off(null,null,this),this._contextMenu.dispose(),r.off(null,null,this)},constructor:function(t){this._deck=t.deck(),this._registry=t.registry,this._editorModel=t,e.View.prototype.constructor.call(this)}})}),define("strut/deck/Component",["./SpatialObject"],function(t){var e,n;return n={x:config.slide.size.width/3,y:config.slide.size.height/3},e={x:1,y:1},t.extend({initialize:function(){if(_.defaults(this.attributes,n),void 0===this.attributes.scale)return this.attributes.scale={},_.defaults(this.attributes.scale,e)},customClasses:function(t){if(null==t)return this.get("customClasses");this.set("customClasses",t)},dispose:function(){this.trigger("dispose",this),this.off()},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_editor/view/Utils",{computeSlideDimensions:function(t){var e=t.width(),n=t.height();n<300&&(n=300);var i=config.slide.size,r=e/i.width,s=(n-20)/i.height;if(n<i.height*r)var o=s;else o=r;var a=o*i.width;return{scale:o,remainingWidth:e-a,scaledWidth:a}}}),define("strut/slide_editor/view/OperatingTable",["libs/backbone","css!styles/slide_editor/operatingTable.css","strut/slide_components/ComponentFactory","strut/editor/GlobalEvents","strut/deck/Component","strut/deck/Utils","./Utils","marked"],function(n,t,r,e,i,s,o,a){"use strict";return n.View.extend({className:"operatingTable strut-surface",events:{click:"_clicked",focused:"_focus",destroyed:"dispose"},initialize:function(){this._resize=this._resize.bind(this),$(window).resize(this._resize),this._deck.on("change:activeSlide",function(t,e){this.setModel(e)},this),this._deck.on("change:background",this._updateBg,this),this._deck.on("change:surface",this._updateSurface,this),this.setModel(this._deck.get("activeSlide")),e.on("cut",this._cut,this),e.on("copy",this._copy,this),e.on("paste",this._paste,this),e.on("delete",this._delete,this),this._clipboard=this._editorModel.clipboard},render:function(){this._$slideContainer=$('<div class="slideContainer"></div>'),this.$el.html(this._$slideContainer),this._$slideContainer.css(config.slide.size),s.applyBackground(this._$slideContainer,this.model,this._deck,{transparentForSurface:!0,surfaceForDefault:!0,transparentForDeckSurface:!0}),this._$markdownContent=$('<div class="markdownArea themedArea"></div>'),this._$slideContainer.append(this._$markdownContent),this._$slideContainer.selectable({filter:".component",selected:function(t,e){$(e.selected).trigger("select",e)},unselected:function(t,e){$(e.unselected).trigger("unselect",e)}});var t=this;return setTimeout(function(){t._rendered=!0,t._resize(),t._renderContents()},0),this.$el.addClass(this._deck.get("surface")||"bg-default"),this},_updateBg:function(t,e){this._$slideContainer&&(this._$slideContainer.removeClass(),this._$slideContainer.addClass("slideContainer ui-selectable"),s.applyBackground(this._$slideContainer,this.model,this._deck,{transparentForSurface:!0,surfaceForDefault:!0}))},_updateSurface:function(t,e){(e=s.slideSurface(t,this._deck))&&(s.isImg(e)?this.$el.css("background-image",s.getImgUrl(e)):(this.$el.css("background-image",""),this.$el.removeClass(),this.$el.addClass("operatingTable strut-surface "+e)))},_cut:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&(this._clipboard.setItems(t),this.model.remove(t))}},_copy:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&this._clipboard.setItems(t)}},_paste:function(){var t=this._clipboard.getItems();null!=t&&t.length&&t[0]instanceof i&&this.model.add(t)},_delete:function(){if("operatingTable"==this._editorModel.get("scope")){var t=this.model.selected;t.length&&this.model.remove(t)}},_clicked:function(){this._focus(),this.model.get("components").forEach(function(t){t.get("selected")&&t.set("selected",!1)}),this.$el.find(".editable").removeClass("editable").attr("contenteditable",!1).trigger("editComplete"),this._focus()},_focus:function(){this._editorModel.set("scope","operatingTable")},_dragover:function(t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"},_drop:function(t){t.stopPropagation(),t.preventDefault();var e=t.originalEvent.dataTransfer.files[0];if(e.type.match("image.*")){var n=new FileReader,i=this;n.onload=function(t){i.model.add(r.instance.createModel({type:"Image",src:t.target.result}))},n.readAsDataURL(e)}},_componentAdded:function(t,e){var n=r.instance.createView(e);this._$slideContainer.append(n.render())},setModel:function(t){var e=this.model;if(this.model!==t)return null!=this.model&&this.model.off(null,null,this),this.model=t,null!=this.model&&(this.model.on("change:components.add",this._componentAdded,this),this.model.on("change:background",this._updateBg,this),this.model.on("change:markdown",this._renderMarkdown,this),this.model.on("change:surface",this._updateSurface,this),this._updateBg(),this._updateSurface(this.model,this.model.get("surface"))),this._renderContents(e),this},dispose:function(){$(window).off("resize",this._resize),this._deck.off(null,null,this),this.model&&this.model.off(null,null,this),e.off(null,null,this)},_renderContents:function(t){(null!=t&&t.trigger("unrender",!0),this._rendered)&&(null!=this.model&&(this.model.get("components").forEach(function(t){var e=r.instance.createView(t);this._$slideContainer.append(e.render())},this),this._renderMarkdown()))},_renderMarkdown:function(){this.model.get("markdown")?this._$markdownContent.html(a(this.model.get("markdown"))):this._$markdownContent.html("")},_resize:function(){var t=o.computeSlideDimensions(this.$el);this._$slideContainer.css({"margin-left":t.remainingWidth/2,"margin-right":t.remainingWidth/2}),this._$slideContainer.css(window.browserPrefix+"transform","scale("+t.scale+")")},constructor:function(t,e){this._deck=t.deck(),this._registry=t.registry,this._editorModel=t,this._slideEditorModel=e,n.View.prototype.constructor.call(this)}})}),CodeMirror.defineMode("xml",function(t,e){var o,a,l,i,r,s=t.indentUnit,c=e.multilineTagIndentFactor||1,u=e.multilineTagIndentPastTag||!0,h=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},d=e.alignCDATA;function p(e,n){function t(t){return(n.tokenize=t)(e,n)}var i=e.next();if("<"==i){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?t(m("atom","]]>")):null:e.match("--")?t(m("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),t(function i(r){return function(t,e){for(var n;null!=(n=t.next());){if("<"==n)return e.tokenize=i(r+1),e.tokenize(t,e);if(">"==n){if(1==r){e.tokenize=p;break}return e.tokenize=i(r-1),e.tokenize(t,e)}}return"meta"}}(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),n.tokenize=m("meta","?>"),"meta";var r,s=e.eat("/");for(o="";r=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)o+=r;return o?(a=s?"closeTag":"openTag",n.tokenize=f,"tag"):"tag error"}return"&"==i?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function f(t,e){var n,i,r=t.next();if(">"==r||"/"==r&&t.eat(">"))return e.tokenize=p,a=">"==r?"endTag":"selfcloseTag","tag";if("="==r)return a="equals",null;if("<"==r){e.tokenize=p;var s=e.tokenize(t,e);return s?s+" error":"error"}return/[\'\"]/.test(r)?(e.tokenize=(n=r,(i=function(t,e){for(;!t.eol();)if(t.next()==n){e.tokenize=f;break}return"string"}).isInAttribute=!0,i),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function m(n,i){return function(t,e){for(;!t.eol();){if(t.match(i)){e.tokenize=p;break}t.next()}return n}}function n(){for(var t=arguments.length-1;0<=t;t--)l.cc.push(arguments[t])}function g(){return n.apply(null,arguments),!0}function v(){l.context&&(l.context=l.context.prev)}function b(t){if("openTag"==t)return l.tagName=o,l.tagStart=i.column(),g(w,(s=l.startOfLine,function(t){var e,n,i,r=l.tagName;return l.tagName=l.tagStart=null,"selfcloseTag"==t||"endTag"==t&&h.autoSelfClosers.hasOwnProperty(r.toLowerCase())?y(r.toLowerCase()):"endTag"==t&&(y(r.toLowerCase()),e=r,n=s,i=h.doNotIndent.hasOwnProperty(e)||l.context&&l.context.noIndent,l.context={prev:l.context,tagName:e,indent:l.indented,startOfLine:n,noIndent:i}),g()}));if("closeTag"==t){var e=!1;return l.context?l.context.tagName!=o&&(h.implicitlyClosed.hasOwnProperty(l.context.tagName.toLowerCase())&&v(),e=!l.context||l.context.tagName!=o):e=!0,e&&(r="error"),g((n=e,function(t){return n&&(r="error"),"endTag"==t?(v(),g()):(r="error",g(arguments.callee))}))}var n,s;return g()}function y(t){for(var e;;){if(!l.context)return;if(e=l.context.tagName.toLowerCase(),!h.contextGrabbers.hasOwnProperty(e)||!h.contextGrabbers[e].hasOwnProperty(t))return;v()}}function w(t){return"word"==t?(r="attribute",g(x,w)):"endTag"==t||"selfcloseTag"==t?n():(r="error",g(w))}function x(t){if("equals"==t)return g(_,w);if(h.allowMissing){if("word"==t)return r="attribute",g(x,w)}else r="error";return"endTag"==t||"selfcloseTag"==t?n():g()}function _(t){return"string"==t?g(k):"word"==t&&h.allowUnquoted?(r="string",g()):(r="error","endTag"==t||"selfCloseTag"==t?n():g())}function k(t){return"string"==t?g(k):n()}return{startState:function(){return{tokenize:p,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;r=a=o=null;var n=e.tokenize(t,e);if(e.type=a,(n||a)&&"comment"!=n)for(l=e,i=t;;){if((e.cc.pop()||b)(a||n))break}return e.startOfLine=!1,r&&(n="error"==r?n+" error":r),n},indent:function(t,e,n){var i=t.context;if(t.tokenize.isInAttribute)return t.stringStartCol+1;if(t.tokenize!=f&&t.tokenize!=p||i&&i.noIndent)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return u?t.tagStart+t.tagName.length+2:t.tagStart+s*c;if(d&&/<!\[CDATA\[/.test(e))return 0;for(i&&/^<\//.test(e)&&(i=i.prev);i&&!i.startOfLine;)i=i.prev;return i?i.indent+s:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),define("codemirror/modes/xml",function(){}),define("codemirror/ManagedEditors",["codemirror/codemirror","codemirror/modes/xml"],function(o,t){var a={};return{getEditor:function(t,e,n){return a[t]||(a[t]=(i=n,r={},s=o(function(t){r.el=t,i&&i(t)},e),r.mirror=s,r));var i,r,s}}}),CodeMirror.defineMode("markdown",function(a,f){var i=CodeMirror.modes.hasOwnProperty("xml"),r=CodeMirror.getMode(a,i?{name:"xml",htmlMode:!0}:"text/plain"),l={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},s=function(){var t,e={},n={},i=[];for(var r in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(r)&&i.push(r);for(t=0;t<i.length;t++)e[i[t]]=i[t];var s=[];for(var r in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(r)&&s.push({mime:r,mode:CodeMirror.mimeModes[r]});for(t=0;t<s.length;t++)n[s[t].mime]=s[t].mime;for(var o in l)(l[o]in e||l[o]in n)&&(e[o]=l[o]);return function(t){return e[t]?CodeMirror.getMode(a,e[t]):null}}();void 0===f.underscoresBreakWords&&(f.underscoresBreakWords=!0),void 0===f.fencedCodeBlocks&&(f.fencedCodeBlocks=!1),void 0===f.taskLists&&(f.taskLists=!1);var m=0,o="header",c="comment",u="atom",h="number",d="variable-2",p="variable-3",g="keyword",v="hr",b="tag",y="link",w="link",x="link",_="string",k="em",C="strong",S=/^([*\-=_])(?:\s*\1){2,}\s*$/,M=/^[*\-+]\s+/,T=/^[0-9]+\.\s+/,$=/^\[(x| )\](?=\s)/,P=/^(?:\={1,}|-{1,})$/,n=/^[^!\[\]*_\\<>` "'(]+/;function E(t,e,n){return e.f=e.inline=n,n(t,e)}function L(t,e,n){return e.f=e.block=n,n(t,e)}function I(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.quote=0,i||t.f!=D||(t.f=B,t.block=A),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.thisLineHasContent=!1,null}function A(t,e){var n=!1!==e.list;if(!1!==e.list&&0<=e.indentationDiff?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):!1!==e.list&&0<e.indentation?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):!1!==e.list&&(e.list=!1,e.listDepth=0),4<=e.indentationDiff)return e.indentation-=4,t.skipToEnd(),c;if(t.eatSpace())return null;if("#"===t.peek()||e.prevLineHasContent&&t.match(P))e.header=!0;else if(t.eat(">"))for(e.indentation++,e.quote=1,t.eatSpace();t.eat(">");)t.eatSpace(),e.quote++;else{if("["===t.peek())return E(t,e,z);if(t.match(S,!0))return v;if(e.prevLineHasContent&&!n||!t.match(M,!0)&&!t.match(T,!0)){if(f.fencedCodeBlocks&&t.match(/^```([\w+#]*)/,!0))return e.localMode=s(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),L(t,e,N),c}else e.indentation+=4,e.list=!0,e.listDepth++,f.taskLists&&t.match($,!1)&&(e.taskList=!0)}return E(t,e,e.inline)}function D(t,e){var n=r.token(t,e.htmlState);return i&&"tag"===n&&"openTag"!==e.htmlState.type&&!e.htmlState.context&&(e.f=B,e.block=A),e.md_inside&&-1!=t.current().indexOf(">")&&(e.f=B,e.block=A,e.htmlState.context=void 0),n}function N(t,e){return t.sol()&&t.match(/^```/,!0)?(e.localMode=e.localState=null,e.f=B,e.block=A,c):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),c)}function O(t){var e=[];if(t.taskOpen)return"meta";if(t.taskClosed)return"property";if(t.strong&&e.push(C),t.em&&e.push(k),t.linkText&&e.push(x),t.code&&e.push(c),t.header&&e.push(o),t.quote&&e.push(t.quote%2?u:h),!1!==t.list){var n=(t.listDepth-1)%3;n?1===n?e.push(p):e.push(g):e.push(d)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function t(t,e){if(t.match(n,!0))return O(e)}function B(t,e){var n=e.text(t,e);if(void 0!==n)return n;if(e.list)return e.list=null,O(e);if(e.taskList)return"x"!==t.match($,!0)[1]?e.taskOpen=!0:e.taskClosed=!0,e.taskList=!1,O(e);e.taskOpen=!1,e.taskClosed=!1;var i=t.next();if("\\"===i)return t.next(),O(e);if(e.linkTitle){e.linkTitle=!1;var r=i;"("===i&&(r=")");var s="^\\s*(?:[^"+(r=(r+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+r;if(t.match(new RegExp(s),!0))return _}if("`"===i){var o=O(e),a=t.pos;t.eatWhile("`");var l=1+t.pos-a;return e.code?l===m?(e.code=!1,o):O(e):(m=l,e.code=!0,O(e))}if(e.code)return O(e);if("!"===i&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),e.inline=e.f=H,b;if("["===i&&t.match(/.*\](\(| ?\[)/,!1))return e.linkText=!0,O(e);if("]"===i&&e.linkText){var c=O(e);return e.linkText=!1,e.inline=e.f=H,c}if("<"===i&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return E(t,e,F(y,">"));if("<"===i&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return E(t,e,F(w,">"));if("<"===i&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var u=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(u)&&(e.md_inside=!0)}return t.backUp(1),L(t,e,D)}if("<"===i&&t.match(/^\/\w*?>/))return e.md_inside=!1,"tag";var h=!1;if(!f.underscoresBreakWords&&"_"===i&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var d=t.pos-2;if(0<=d){var p=t.string.charAt(d);"_"!==p&&p.match(/(\w)/,!1)&&(h=!0)}}o=O(e);if("*"===i||"_"===i&&!h){if(e.strong===i&&t.eat(i))return e.strong=!1,o;if(!e.strong&&t.eat(i))return e.strong=i,O(e);if(e.em===i)return e.em=!1,o;if(!e.em)return e.em=i,O(e)}else if(" "===i&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return O(e);t.backUp(1)}return" "===i&&(t.match(/ +$/,!1)?e.trailingSpace++:e.trailingSpace&&(e.trailingSpaceNewLine=!0)),O(e)}function H(t,e){if(t.eatSpace())return null;var n=t.next();return"("===n||"["===n?E(t,e,F(_,"("===n?")":"]")):"error"}function z(t,e){return t.match(/^[^\]]*\]:/,!0)?(e.f=j,x):E(t,e,B)}function j(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=B,_)}var R=[];function F(i,r,s){return s=s||B,function(t,e){var n;return t.match((R[n=r]||(n=(n+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),R[n]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+n+")")),R[n])),e.inline=e.f=s,i}}return{startState:function(){return{f:A,prevLineHasContent:!1,thisLineHasContent:!1,block:A,htmlState:CodeMirror.startState(r),indentation:0,inline:B,text:t,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:CodeMirror.copyState(r,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?CodeMirror.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(t,e){if(t.sol()){if(t.match(/^\s*$/,!0))return e.prevLineHasContent=!1,I(e);e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.header=!1,e.taskList=!1,e.code=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var n=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((n-e.indentation)/4);4<i&&(i=4);var r=e.indentation+i;if(e.indentationDiff=r-e.indentation,e.indentation=r,0<n)return null}return e.f(t,e)},blankLine:I,getType:O}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),define("codemirror/modes/markdown",["codemirror/codemirror"],function(){}),define("strut/slide_editor/view/MarkdownEditor",["codemirror/ManagedEditors","codemirror/modes/markdown","./Utils"],function(t,e,n){var i="# Markdown!\n",r={Enter:"newlineAndIndentContinueMarkdownList"},s=t.getEditor("optableeditor",{mode:"markdown",lineNumbers:!0,theme:"default",extraKeys:r});function o(t){this._opts=t,this.$el=$(s.el),this._resize=this._resize.bind(this)}return o.prototype={show:function(t){s.mirror.setOption("mode","markdown"),s.mirror.setOption("extraKeys",r),this._resize(),this._bindResize(),this._opts.$target.append(this.$el),this.setValue(t)},setValue:function(t){t=t||i,s.mirror.setValue(t),s.mirror.getDoc().clearHistory()},getValue:function(){var t=s.mirror.getValue();return t==i?"":t},hide:function(){s.mirror.setValue(""),this._unbindResize(),this.$el.detach()},_bindResize:function(){$(window).on("resize",this._resize)},_resize:function(){var t=n.computeSlideDimensions(this._opts.$target);s.mirror.setSize(t.scaledWidth,this._opts.$target.height()-20),this.$el.css({"margin-left":t.remainingWidth/2,"margin-right":t.remainingWidth/2})},_unbindResize:function(){$(window).off("resize",this._resize)}},o}),define("strut/slide_editor/view/SlideEditorView",["libs/backbone","./SlideWell","./OperatingTable","./MarkdownEditor"],function(t,e,n,i){"use stict";return t.View.extend({className:"slideEditor",initialize:function(){this._well=new e(this.model._editorModel),this._opTable=new n(this.model._editorModel,this.model),this._markdownEditor=new i({$target:this._opTable.$el}),this._prevSlide=this.model.activeSlide(),this.model.on("change:mode",this._modeChanged,this),this.model.deck().on("change:activeSlide",this._activeSlideChanged,this),this.model.on("saveEdits",this._saveCurrentEdits,this)},remove:function(){t.View.prototype.remove.call(this),this.model.dispose(),this._opTable.dispose(),this.model.deck().off(null,null,this)},render:function(){return this.$el.html(),this.$el.append(this._well.render().$el),this.$el.append(this._opTable.render().$el),this},_activeSlideChanged:function(t,e){this._saveCurrentEdits(),this._prevSlide=e,this._markdownEditor.setValue(e&&e.get("markdown"))},_modeChanged:function(t,e){if("markdown"==e)this._markdownEditor.show(this.model.activeSlide().get("markdown"));else{if("preview"!=e)throw"Illegal mode";this.model.activeSlide().set("markdown",this._markdownEditor.getValue()),this._markdownEditor.hide()}},_saveCurrentEdits:function(){this._prevSlide&&this.model.isMarkdownMode()&&this._prevSlide.set("markdown",this._markdownEditor.getValue())},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/widgets/ModeButton",[],function(){function t(t,e,n){this.$el=$(n()),this.modeId=e,this.clicked=this.clicked.bind(this),this.modeChanged=this.modeChanged.bind(this),this.$el.click(this.clicked),this.el=this.$el[0],(this.editorModel=t).on("change:activeMode",this.modeChanged,this)}return t.prototype.render=function(){return this},t.prototype.clicked=function(){this.editorModel.changeActiveMode(this.modeId)},t.prototype.generatorChanged=function(t,e){},t.prototype.modeChanged=function(t,e){t.get("modeId")==this.modeId?this.$el.addClass("dispNone"):this.$el.removeClass("dispNone")},t}),define("strut/slide_editor/main",["./model/SlideEditorModel","./view/SlideEditorView","tantaman/web/widgets/ModeButton","tantaman/web/widgets/Button"],function(i,r,e,n){var s={getMode:function(t,e){var n=new i({editorModel:t});return{view:new r({model:n,registry:e}),model:n,id:"slide-editor",close:function(){this.view.remove()}}},createButton:function(t){return new e(t,"slide-editor",JST["strut.slide_editor/Button"])}};function o(t){this._slideEditorModel=t.get("activeMode").model,this._button=new n({icon:"icon-markdown-white",cb:this._toggleMarkdown.bind(this),name:"MDown"}),this._button.$el.addClass("iconBtns"),this._slideEditorModel.on("change:mode",this._modeChanged,this)}o.prototype={view:function(){return this._button},_toggleMarkdown:function(){this._slideEditorModel.toggleMarkdown()},_modeChanged:function(t,e){"markdown"==e?this._button.$el.addClass("active"):this._button.$el.removeClass("active")},dispose:function(){this._slideEditorModel.off(null,null,this)}};var a={create:function(t){return new o(t)}};return{initialize:function(t){t.register({interfaces:"strut.EditMode",meta:{id:"slide-editor"}},s),t.register({interfaces:"strut.ThemeProvider",meta:{modes:{"slide-editor":!0},overflow:!0}},a)}}}),define("tantaman/web/Utils",[],function(){return{dispose:function(t){null!=t.dispose?t.dispose():null!=t.forEach&&t.forEach(function(t){t.dispose()})},stopProp:function(t){t.stopPropagation()}}}),define("strut/transition_editor/model/OverviewModel",["tantaman/web/Utils","libs/backbone"],function(t,n){return n.Model.extend({initialize:function(){this._editorModel.on("change:generator",this._generatorChanged,this),this._generatorChanged(this._editorModel,this._editorModel.get("generator"))},_generatorChanged:function(t,e){var n=this._registry.get({interfaces:"strut.TransitionEditor",meta:{capabilities:e.capabilities}});this.transitionEditors=[],n.forEach(function(t){var e=t.service();this.transitionEditors.push(new e({model:this._editorModel}))},this),this.trigger("change:transitionEditors",this,this.transitionEditors)},dispose:function(){t.dispose(this.transitionEditors),this.off(),this._editorModel.off(null,null,this)},constructor:function(t,e){this._editorModel=t,this._registry=e,n.Model.prototype.constructor.call(this)}})}),define("strut/transition_editor/view/Overview",["libs/backbone","tantaman/web/Utils","css!styles/transition_editor/overview.css"],function(t,e,n){return t.View.extend({initialize:function(){this.model.on("change:transitionEditors",this.render,this),this._currentEditors=[]},remove:function(){this.dispose()},dispose:function(){t.View.prototype.remove.call(this),this.model.dispose(),e.dispose(this._currentEditors)},render:function(){return this.$el.html(""),e.dispose(this._currentEditors),this._currentEditors=[],this.model.transitionEditors.forEach(function(t){this._currentEditors.push(t),t.render(),this.$el.append(t.$el)},this),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("tantaman/web/interactions/TouchBridge",[],function(){var o="ontouchend"in document;function a(e){return function(t){!function(t){var e=t.originalEvent.changedTouches[0];for(var n in e)t[n]=e[n];t.which=1}(t),e(t)}}return{on:{dblclick:function(t,e){var n,i,r,s;return o?(n="touchstart",i=a(i=e),e=function(t){var e=!1;r&&t.originalEvent.changedTouches[0].identifier==r.identifier&&Date.now()-s<250?(i(t),r=null):e=!0,e&&(r=t.originalEvent.changedTouches[0],s=Date.now())}):n="dblclick",t.on(n,e),function(){t.off(n,e)}},mousedown:function(t,e){var n;return o?(n="touchstart",e=a(e)):n="mousedown",t.on(n,e),function(){t.off(n,e)}},mouseup:function(t,e){var n;return o?(n="touchend",e=a(e)):n="mouseup",t.on(n,e),function(){t.off(n,e)}},mousemove:function(t,e){var n;return o?(n="touchmove",e=a(e)):n="mousemove",t.on(n,e),function(){t.off(n,e)}}},off:{mousedown:function(t,e){o?t.off("touchstart",e):t.off("mousedown",e)},mouseup:function(t,e){o?t.off("touchend",e):t.off("mouseup",e)},mousemove:function(t,e){o?t.off("touchmove",e):t.off("mousemove",e)}}}}),define("tantaman/web/widgets/DeltaDragControl",["tantaman/web/interactions/TouchBridge"],function(n){return["mousedown","mousemove","mouseup"],function(){function t(t,e){this.$el=t,this.stopProp=e,this.dragging=!1,this._mousemove=this.mousemove.bind(this),this._mouseup=this.mouseup.bind(this),this._mouseout=this._mouseup,this._toDispose=[],this._toDispose.push(n.on.mousemove($(document),this._mousemove)),this._toDispose.push(n.on.mouseup($(document),this._mouseup)),n.on.mousedown(this.$el,this.mousedown.bind(this)),n.on.mouseup(this.$el,this._mouseup)}return t.prototype.dispose=function(){this._toDispose.forEach(function(t){t()})},t.prototype.mousedown=function(t){if(t.preventDefault(),this.dragging=!0,this._startPos={x:t.pageX,y:t.pageY},this.$el.trigger("deltadragStart",{x:t.pageX,y:t.pageY}),this.stopProp)return t.stopPropagation()},t.prototype.mousemove=function(t){var e,n;if(this.dragging&&(e=t.pageX-this._startPos.x,n=t.pageY-this._startPos.y,this.$el.trigger("deltadrag",[{dx:e,dy:n,x:t.pageX,y:t.pageY}]),this.stopProp))return t.stopPropagation()},t.prototype.mouseup=function(t){return this.dragging&&(this.dragging=!1,this.$el.trigger("deltadragStop")),!0},t}()}),define("strut/slide_components/view/ComponentView",["libs/backbone","tantaman/web/widgets/DeltaDragControl","common/Math2","css!styles/slide_components/ComponentView.css","strut/editor/GlobalEvents","strut/deck/ComponentCommands","tantaman/web/undo_support/CmdListFactory","tantaman/web/interactions/TouchBridge"],function(i,r,t,e,o,a,n,s){var l=n.managedInstance("editor");return i.View.extend({transforms:["skewX","skewY"],className:"component",events:function(){return{select:"_selected",unselect:"_unselected",click:"clicked","click .removeBtn":"removeClicked","change input[data-option='x']":"manualMoveX","change input[data-option='y']":"manualMoveY","deltadragStart span[data-delta='skewX']":"skewXStart","deltadrag span[data-delta='skewX']":"skewX","deltadragStop span[data-delta='skewX']":"skewXStop","deltadragStart span[data-delta='skewY']":"skewYStart","deltadrag span[data-delta='skewY']":"skewY","deltadragStop span[data-delta='skewY']":"skewYStop","deltadragStart span[data-delta='rotate']":"rotateStart","deltadrag span[data-delta='rotate']":"rotate","deltadragStop span[data-delta='rotate']":"rotateStop","deltadragStart span[data-delta='scale']":"scaleStart","deltadrag span[data-delta='scale']":"scale","deltadragStop span[data-delta='scale']":"scaleStop",destroyed:"remove","click .align":"center"}},initialize:function(){this._dragging=!1,this.allowDragging=!0,this.model.on("change:selected",this._selectionChanged,this),this.model.on("change:color",this._colorChanged,this),this.model.on("unrender",this._unrender,this),this._mouseup=this.mouseup.bind(this),this._mousemove=this.mousemove.bind(this),this.mousedown=this.mousedown.bind(this),this._deltaDrags=[],this.model.on("rerender",this._setUpdatedTransform,this),this.model.on("change:x",this._xChanged,this),this.model.on("change:y",this._yChanged,this),this.model.on("change:skewX",this._setUpdatedTransform,this),this.model.on("change:skewY",this._setUpdatedTransform,this),this.model.on("change:rotate",this._setUpdatedTransform,this),this.model.on("change:scale",this._setUpdatedTransform,this),this.model.on("change:customClasses",this._updateCustomClasses,this),this.model.on("dragStart",this.dragStart,this),this.model.on("drag",this.drag,this),this.model.on("dragStop",this.dragStop,this),this.$el.css("z-index",zTracker.next()),this._lastDeltas={dx:0,dy:0},this._toDispose=[];var t=$(document);this._toDispose.push(s.on.mouseup(t,this._mouseup)),this._toDispose.push(s.on.mousemove(t,this._mousemove)),s.on.mousedown(this.$el,this.mousedown)},_colorChanged:function(t,e){this.$el.css("color","#"+e)},clicked:function(t){return this.$el.css("z-index",zTracker.next()),this.$el.trigger("focused"),t.stopPropagation(),!1},removeClicked:function(t){t.stopPropagation(),this.model.slide&&this.model.slide.remove([this.model])},remove:function(t){var e,n;for(e in i.View.prototype.remove.call(this),n=this._deltaDrags)n[e].dispose();t&&this.model.dispose(),this.model.off(null,null,this),this._toDispose.forEach(function(t){t()})},mousedown:function(e){this.$el.parents(".ui-selectable").selectable("disable"),1===e.which&&(e.preventDefault(),this._selectComponent(e),this.$el.css("zIndex",zTracker.next()),this.model.slide?this.model.slide.selected.forEach(function(t){t.trigger("dragStart",e)}):this.options.deck.selected.forEach(function(t){t.trigger("dragStart",e)}))},_selectComponent:function(t){(o.pressed.ctrl||o.pressed.meta||o.pressed.shift)&&this.model.get("selected")?this.model.set("selected",!1):this.model.set("selected",!0)},_selected:function(t){this.model.set("selected",!0,{multiselect:!0})},_unselected:function(t){this.model.set("selected",!1)},_selectionChanged:function(t,e){e?this.$el.addClass("ui-selected"):this.$el.removeClass("ui-selected")},mousemove:function(e){this.model.slide?this.model.slide.selected.forEach(function(t){t.trigger("drag",e)}):this.options.deck.selected.forEach(function(t){t.trigger("drag",e)})},mouseup:function(e){this.$el.parents(".ui-selectable").selectable("enable");var t=this;this.model.slide?l.record(function(){t.model.slide.selected.forEach(function(t){t.trigger("dragStop",e)})},"Move Components"):l.record(function(){t.options.deck.selected.forEach(function(t){t.trigger("dragStop",e)})},"Move Slide Transition")},dragStart:function(t){this.dragScale=this.$el.parent().css(window.browserPrefix+"transform"),this.dragScale=parseFloat(this.dragScale.substring(7,this.dragScale.indexOf(",")))||1,this._dragging=!0,this.$el.addClass("dragged"),this._prevPos={x:this.model.get("x"),y:this.model.get("y")},this._prevMousePos={x:t.pageX,y:t.pageY}},drag:function(t){var e,n,i,r,s;this._dragging&&this.allowDragging&&(s=o.pressed.shift,e=t.pageX-this._prevMousePos.x,n=t.pageY-this._prevMousePos.y,i=this._prevPos.x+e/this.dragScale,r=this._prevPos.y+n/this.dragScale,s&&(i=20*Math.floor(i/20),r=20*Math.floor(r/20)),this.model.setInt("x",i),this.model.setInt("y",r),this.dragStartLoc||(this.dragStartLoc={x:i,y:r}))},dragStop:function(t){this._dragging&&(this._dragging=!1,this.$el.removeClass("dragged"),null!=this.dragStartLoc&&this.dragStartLoc.x!==this.model.get("x")&&this.dragStartLoc.y!==this.model.get("y")&&l.pushdo(new a.Move(this.dragStartLoc,this.model)),this.dragStartLoc=null)},_xChanged:function(t,e){this.$el.css("left",e),this.$xInput.val(e)},_yChanged:function(t,e){this.$el.css("top",e),this.$yInput.val(e)},manualMoveX:function(t){return this.model.setInt("x",t.target.value)},manualMoveY:function(t){return this.model.setInt("y",t.target.value)},center:function(t){var e=t.target.getAttribute("data-option");getAxis=function(t,e){return"x"==t?e.width():e.height()};var n=getAxis(e,this.$el.parent(".slideContainer")),i=getAxis(e,this.$el),r={x:this.model.get("x"),y:this.model.get("y")};this.model.setInt(e,n/2-i/2);var s=new a.Move(r,this.model);l.push(s)},skewXStart:function(){return this._initialSkewX=this.model.get("skewX")||0},skewX:function(t,e){this.model.setFloat("skewX",this._initialSkewX+Math.atan2(e.dx,22))},skewXStop:function(){var t=new a.SkewX(this._initialSkewX,this.model);l.push(t)},skewYStart:function(){return this._initialSkewY=this.model.get("skewY")||0},skewY:function(t,e){this.model.setFloat("skewY",this._initialSkewY+Math.atan2(e.dy,22))},skewYStop:function(){var t=new a.SkewY(this._initialSkewY,this.model);l.push(t)},rotateStart:function(t,e){this.updateOrigin(),this._rotOffset=this._calcRot(e),this._initialRotate=this.model.get("rotate")||0},updateOrigin:function(){var t;t=this.$el.offset(),this._origin={x:this.$el.width()/2+t.left,y:this.$el.height()/2+t.top}},_calcRot:function(t){return Math.atan2(t.y-this._origin.y,t.x-this._origin.x)},rotate:function(t,e){var n,i;i=this._calcRot(e),n=this._initialRotate+i-this._rotOffset,o.pressed.shift&&(n=Math.floor(n/Math.PI*8)/8*Math.PI),n%=2*Math.PI,this.model.setFloat("rotate",n)},rotateStop:function(){var t=new a.Rotate(this._initialRotate,this.model);l.push(t)},scaleStart:function(t){var e;this.dragScale=this.$el.parent().css(window.browserPrefix+"transform"),this.dragScale=parseFloat(this.dragScale.substring(7,this.dragScale.indexOf(",")))||1,this._initialScale=this.model.get("scale"),this.$el.offset(),this.$el.width(),this._initialScale.x,this.$el.height(),this._initialScale.y,e=this.model.get("rotate")||0,null==this.origSize&&(this.origSize={width:this.$el.width(),height:this.$el.height()}),this._scaleDim={width:this._initialScale.x*this.origSize.width,height:this._initialScale.y*this.origSize.height,theta:e}},scale:function(t,e){var n,i;n=o.pressed.shift;var r=(1*e.dx+this._scaleDim.width)/this._scaleDim.width,s=(1*e.dy+this._scaleDim.height)/this._scaleDim.height;(i={x:this._initialScale.x*r,y:this._initialScale.y*(n?s:r)}).width=i.x*this.origSize.width,i.height=i.y*this.origSize.height,this.model.set("scale",i)},scaleStop:function(){var t=new a.Scale(this._initialScale,this.model);l.push(t)},render:function(){var t,i=this;return this.$el.html(this.__getTemplate()(this.model.attributes)),this.$el.find("span[data-delta]").each(function(t,e){var n;return n=new r($(e),!0),i._deltaDrags.push(n)}),this.$content=this.$el.find(".content"),this.$content.addClass(this.model.customClasses()),this.$contentScale=this.$el.find(".content-scale"),this._selectionChanged(this.model,this.model.get("selected")),this.$xInput=this.$el.find("[data-option='x']"),this.$yInput=this.$el.find("[data-option='y']"),this.$el.css({top:this.model.get("y"),left:this.model.get("x")}),0<(t={width:this.$el.width(),height:this.$el.height()}).width&&0<t.height&&(this.origSize=t),this._setUpdatedTransform(),this.$el},_setUpdatedTransform:function(){var t,e,n,i,r;(n={transform:r=this._buildTransformString()})[window.browserPrefix+"transform"]=r,this.$content.css(n),i=this.model.get("scale"),null!=this.origSize&&(e=i.width||this.origSize.width,t=i.height||this.origSize.height,this.$el.css({width:e,height:t})),null!=i&&this.$contentScale.css(window.browserPrefix+"transform","scale("+i.x+","+i.y+")"),this.$el.css(window.browserPrefix+"transform","rotate("+this.model.get("rotate")+"rad)")},_buildTransformString:function(){var n="";return this.transforms.forEach(function(t){var e;if(e=this.model.get(t))return n+=t+"("+e+"rad) "},this),n},_updateCustomClasses:function(t,e){this.$content.attr("class","content "+e)},__getTemplate:function(){return JST["strut.slide_components/Component"]},_unrender:function(){return this.remove(!1)},constructor:function(){i.View.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/ThreeDRotatableComponentView",["./ComponentView","common/Math2"],function(e,n){var i=2*Math.PI;return e.extend({transforms:["rotateX","rotateY","rotateZ","scale"],events:function(){var t;return t=e.prototype.events(),_.extend(t,{"mousedown .form-inline":"stopProp","deltadragStart span[data-delta='rotateX']":"rotateXStart","deltadrag span[data-delta='rotateX']":"rotateX","deltadragStart span[data-delta='rotateZ']":"rotateZStart","deltadrag span[data-delta='rotateY']":"rotateY","deltadragStart span[data-delta='rotateY']":"rotateYStart","deltadrag span[data-delta='rotateZ']":"rotateZ","change input[data-option='z']":"manualMoveZ","change input[data-option='scale']":"manualMoveScale","change input[data-option='rotateX']":"manualRotX","change input[data-option='rotateY']":"manualRotY","change input[data-option='rotateZ']":"manualRotZ"})},initialize:function(){return e.prototype.initialize.apply(this,arguments),this.model.on("change:rotateX",this._rotXChanged,this),this.model.on("change:rotateY",this._rotYChanged,this),this.model.on("change:rotateZ",this._rotZChanged,this)},stopProp:function(t){t.stopPropagation()},dispose:function(){this.model.off(null,null,this)},manualMoveScale:function(t){return this.model.setFloat("impScale",t.target.value)},manualMoveZ:function(t){return this.model.setInt("z",t.target.value)},manualRotX:function(t){return this.model.setFloat("rotateX",n.toRads(t.target.value))},manualRotY:function(t){return this.model.setFloat("rotateY",n.toRads(t.target.value))},manualRotZ:function(t){return this.model.setFloat("rotateZ",n.toRads(t.target.value))},rotateXStart:function(t,e){return this.updateOrigin(),this._rotXOffset=this._calcRot(e),this._initialRotX=this.model.get("rotateX")||0},rotateX:function(t,e){var n;return n=.02*e.dy%i,this.model.setFloat("rotateX",this._initialRotX+n)},_rotXChanged:function(t,e){return this.$rotXInput.val(n.round(n.toDeg(e),2)),this._setUpdatedTransform()},rotateYStart:function(t,e){return this.updateOrigin(),this._rotYOffset=this._calcRot(e),this._initialRotY=this.model.get("rotateY")||0},rotateY:function(t,e){var n;return n=.02*e.dx%i,this.model.setFloat("rotateY",this._initialRotY+n)},_rotYChanged:function(t,e){return this.$rotYInput.val(n.round(n.toDeg(e),2)),this._setUpdatedTransform()},rotateZStart:function(t,e){return this.updateOrigin(),this._rotZOffset=this._calcRot(e),this._initialRotZ=this.model.get("rotateZ")||0},rotateZ:function(t,e){var n;return n=this._calcRot(e),this.model.setFloat("rotateZ",this._initialRotZ+n-this._rotZOffset)},_rotZChanged:function(t,e){return this.$rotZInput.val(n.round(n.toDeg(e),2)),this._setUpdatedTransform()},render:function(){return e.prototype.render.apply(this,arguments),this.$rotXInput=this.$el.find("[data-option='rotateX']"),this.$rotYInput=this.$el.find("[data-option='rotateY']"),this.$rotZInput=this.$el.find("[data-option='rotateZ']"),this},__getTemplate:function(){return null},constructor:function(){e.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_snapshot/TransitionSlideSnapshot",["strut/slide_components/view/ThreeDRotatableComponentView","./SlideDrawer","css!styles/transition_editor/TransitionSlideSnapshot.css","strut/deck/Utils"],function(e,n,t,i){var r=window.config.slide.overviewSize;return e.extend({className:"component transitionSlideSnapshot",events:function(){var t;return t=e.prototype.events(),_.extend(t,{mousedown:"mousedown"})},initialize:function(){e.prototype.initialize.apply(this,arguments),this.model.on("change:impScale",this._impScaleChanged,this),this.model.on("change:background",this._backgroundChanged,this),this.model.on("change:surface",this._backgroundChanged,this),this.options.deck.on("change:background",this._backgroundChanged,this),this.options.deck.on("change:surface",this._backgroundChanged,this)},remove:function(){this.dispose(),e.prototype.remove.call(this,!1),this.model.set("selected",!1)},dispose:function(){null!=this.slideDrawer&&this.slideDrawer.dispose(),e.prototype.dispose.call(this),this.model.off(null,null,this),this.options.deck.off(null,null,this)},mousedown:function(t){t.ctrlKey||t.metaKey||t.shiftKey||this.model.get("selected")||this.model.set("active",!0),e.prototype.mousedown.apply(this,arguments)},_impScaleChanged:function(){var t=0|this.model.get("impScale"),e=this.$el.find(".content"),n={width:r.width*t,height:r.height*t};e.css(n),this.slideDrawer.setSize(n)},_backgroundChanged:function(t,e){this._$content.removeClass(),this._$content.addClass("content"),this.slideDrawer.applyBackground(this.model,this.options.deck,{transparentForDeckSurface:!0,surfaceForDefault:!0})},render:function(){e.prototype.render.apply(this,arguments),null!=this.slideDrawer&&this.slideDrawer.dispose(),this.$el.css({left:this.model.get("x"),top:this.model.get("y")}),this._$content=this.$el.find(".content");var t=this.$el.find(".slideDrawer");return this.slideDrawer=new n(this.model,t),this.slideDrawer.applyBackground(this.model,this.options.deck,{transparentForDeckSurface:!0,surfaceForDefault:!0}),this._impScaleChanged(),this.slideDrawer.render(),this},__getTemplate:function(){return JST["strut.slide_snapshot/TransitionSlideSnapshot"]},constructor:function(){e.prototype.constructor.apply(this,arguments)}})}),define("strut/transition_editor/view/FreeFormTransitionEditorView",["libs/backbone","strut/slide_snapshot/TransitionSlideSnapshot","strut/deck/Utils"],function(t,r,n){"use strict";return t.View.extend({className:"slideTable strut-surface",events:{click:"_clicked"},initialize:function(){this._snapshots=[],this.model.deck().on("change:surface",this._surfaceChanged,this)},_surfaceChanged:function(t,e){n.isImg(e)?this.$el.css("background-image",n.getImgUrl(e)):(this.$el.css("background-image",""),this.$el.removeClass(),this.$el.addClass("slideTable strut-surface ui-selectable "+e))},_clicked:function(t){this.model.deck().unselectSlides(null,!0)},remove:function(){this.dispose()},dispose:function(){t.View.prototype.remove.call(this),this.model.deck().off(null,null,this)},render:function(){this.$el.selectable({filter:".component",selected:function(t,e){$(e.selected).trigger("select",e)},unselected:function(t,e){$(e.unselected).trigger("unselect",e)}}),this.$el.html("");var n=this.model.deck();this._surfaceChanged(n,n.get("surface"));var i=0;return n.get("slides").forEach(function(t){null==t.get("x")&&(t.set("x",280*i+180),t.set("y",280*(i/6|0)+180)),++i;var e=new r({model:t,registry:this.model.registry,deck:n});this._snapshots.push(e),this.$el.append(e.render().$el)},this),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/transition_editor/view/CannedTransitionsView",["libs/backbone"],function(t){function e(){return"styles/img/"+this.name+".png"}var n=[{name:"carousel",img:e,style:"height: 126px;"},{name:"classic",img:e},{name:"concave",img:e,style:"height: 126px;"},{name:"coverflow",img:e},{name:"cube",img:e},{name:"cubeb",img:e},{name:"cards",img:e},{name:"none",img:"styles/strut.themes/img/nobg.png"}];return t.View.extend({events:{"click .thumbnail":"_transitionSelected"},className:"cannedTransitionsView",initialize:function(){var e=this.model.cannedTransition()||"none";n.some(function(t){t.name==e?t.active=!0:t.active=!1})},_transitionSelected:function(t){this.$el.find(".active").removeClass("active");var e=t.currentTarget.dataset.name;this.model.cannedTransition(e),$(t.currentTarget).addClass("active")},render:function(){return this.$el.html(JST["strut.transition_editor/CannedTransitions"](n)),this},dispose:function(){},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/transition_editor/main",["tantaman/web/widgets/ModeButton","./model/OverviewModel","./view/Overview","./view/FreeFormTransitionEditorView","./view/CannedTransitionsView"],function(e,i,r,n,s){var o={getMode:function(t,e){var n=new i(t,e);return{view:new r({model:n}),model:n,id:"overview",close:function(){this.view.remove()}}},createButton:function(t){return new e(t,"overview",JST["strut.transition_editor/Button"])}};return{initialize:function(t){t.register({interfaces:"strut.EditMode",meta:{id:"overview"}},o),t.register({interfaces:"strut.TransitionEditor",meta:{capabilities:{freeformStepping:!0}}},n),t.register({interfaces:"strut.TransitionEditor",meta:{capabilities:{cannedTransitions:!0}}},s)}}}),define("strut/slide_components/view/ComponentButton",["libs/backbone"],function(t){"use strict";return t.View.extend({className:"btn btn-plast",tagName:"a",events:{click:"_clicked"},initialize:function(){this.$el.attr("data-compType",this.options.componentType)},_clicked:function(){this.options.editorModel.addComponent(this.options.componentType)},render:function(){return this.$el.html('<i class="'+this.options.icon+' icon-white"></i>'+this.options.name),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/ImportingComponentButton",["./ComponentButton","tantaman/web/widgets/ItemImportModal"],function(t,e){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this._modal=e.get(this.options),this._itemImported=this._itemImported.bind(this)},_clicked:function(){this._modal.show(this._itemImported)},_itemImported:function(t){this.options.editorModel.addComponent({src:t,type:this.options.componentType})},constructor:function(){t.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/model/Image",["strut/deck/Component","common/FileUtils"],function(e,n){"use strict";return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.set("type","Image");var t=this.get("src");this.set("imageType",n.imageType(t))},_updateCache:function(){},toBase64:function(){},constructor:function(t){e.prototype.constructor.call(this,t)}})}),define("strut/slide_components/model/TextBox",["strut/deck/Component"],function(n){"use strict";return n.extend({initialize:function(){if(n.prototype.initialize.apply(this,arguments),this.set("type","TextBox"),!this.get("text")){var t=function(t){if(t){var e="<font";for(var n in t)"size"!=n&&(e+=" ",e+=n+'="'+t[n]+'"');return e+">Text</font>"}return"Text"}(this._opts&&this._opts.fontStyles);this._opts&&this._opts.fontStyles.size&&this.set("size",this._opts.fontStyles.size),delete this._opts,this.set("text",t),this.get("size")||this.set("size",72)}},constructor:function(t,e){this._opts=e,n.prototype.constructor.call(this,t)}})}),define("strut/slide_components/model/WebFrame",["strut/deck/Component","common/FileUtils"],function(e,t){"use strict";return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.set("type","WebFrame")},constructor:function(t){e.prototype.constructor.call(this,t)}})}),define("strut/slide_components/model/Video",["strut/deck/Component","common/FileUtils"],function(r,e){"use strict";var s=[{type:"youtube",reg:/youtube\.com\/.*v=(.*?)(&|$)/,srcType:function(){return"yt"}},{type:"html5",reg:/(.*)/,srcType:function(t){return e.type(e.extension(t))}}];return r.extend({initialize:function(){var t,e,n,i;for(r.prototype.initialize.apply(this,arguments),this.set("type","Video"),n=0,i=s.length;n<i;n++)if(null!=(e=(t=s[n]).reg.exec(this.get("src")))){this.set("shortSrc",e[1]),this.set("videoType",t.type),this.set("srcType",t.srcType(e[1]));break}return this},constructor:function(t){r.prototype.constructor.call(this,t)}})}),define("strut/slide_components/view/Mixers",[],function(){return{scaleByResize:function(t,e){var n,i,r;return i=this.$el.offset(),r=(e.x-i.left)/this.dragScale,n=(e.y-i.top)/this.dragScale,this.model.set("scale",{width:r,height:n})},scaleChangeByResize:function(t,e){if(this.origSize){var n=e.width/this.origSize.width;e.height=this.origSize.height*n}this.$el.css(e)},scaleObjectEmbed:function(t,e){var n,i;return n=this.$el.offset(),i={width:(e.x-n.left)/this.dragScale,height:(e.y-n.top)/this.dragScale},this.model.set("scale",i)},scaleChangeObjectEmbed:function(t,e){this.$object.attr(e),this.$embed.attr(e),this.$el.css(e)},scaleChangeInlineSvg:function(t,e){this.$object.attr(e),this.$el.css(e)}}}),define("strut/slide_components/view/ImageView",["./ComponentView","./Mixers"],function(n,t){return n.extend({className:"component imageView",tagName:"div",initialize:function(){n.prototype.initialize.apply(this,arguments),"SVG"===this.model.get("imageType")&&(this.scale=t.scaleByResize,this.model.off("change:scale",this._setUpdatedTransform,this),this.model.on("change:scale",t.scaleChangeByResize,this))},render:function(){var t,e=this;return n.prototype.render.call(this),(t=$("<img src="+this.model.get("src")+"></img>")).load(function(){return e._finishRender($(this))}),t.error(function(){return e.remove()}),this.$el},_finishRender:function(t){var e,n,i,r,s;if(i=t[0].naturalWidth,n=t[0].naturalHeight,"SVG"===this.model.get("imageType")?(t.css({width:"100%",height:"100%"}),(r=this.model.get("scale"))&&r.width?this.$el.css({width:r.width,height:r.height}):(s=Math.max(i,50),e=Math.max(n,50),this.model.set("scale",{width:s,height:e}))):(this.origSize={width:i,height:n},t[0].width=i,t[0].height=n,this._setUpdatedTransform()),t.bind("dragstart",function(t){return t.preventDefault(),!1}),this.$content.append(t),"SVG"===this.model.get("imageType"))return t.parent().addClass("svg"),t.parent().parent().addClass("svg")}})}),define("strut/slide_components/view/TextBoxView",["./ComponentView","libs/etch","strut/deck/ComponentCommands","tantaman/web/undo_support/CmdListFactory","tantaman/web/interactions/TouchBridge"],function(i,e,n,t,r){"use strict";var s,o=t.managedInstance("editor");return s=["family","size","weight","style","color","decoration","align"],i.extend({className:"component textBox",tagName:"div",events:function(){var t,e;return e=i.prototype.events(),t={editComplete:"editCompleted",mouseup:"mouseup"},_.extend(e,t)},initialize:function(){var t,e,n;for(i.prototype.initialize.apply(this,arguments),e=0,n=s.length;e<n;e++)t=s[e],this.model.on("change:"+t,this._styleChanged,this);this.model.on("change:text",this._textChanged,this),this._lastDx=0,this.keydown=this.keydown.bind(this),this.dblclicked=this.dblclicked.bind(this),r.on.dblclick(this.$el,this.dblclicked),this.model.on("edit",this.edit,this)},scaleStart:function(){this._initialSize=this.model.get("size")},scale:function(t,e){var n,i;return n=this.model.get("size"),i=0<e.dx-this._lastDx?1:-1,this.model.set("size",n+Math.round(i*Math.sqrt(Math.abs(e.dx-this._lastDx)))),this._lastDx=e.dx},scaleStop:function(){var t=n.TextScale(this._initialSize,this.model);o.push(t)},remove:function(t){i.prototype.remove.apply(this,arguments)},dblclicked:function(t){if(this.$el.addClass("editable"),this.$textEl.attr("contenteditable",!0),null!=t&&(this._initialText=this.$textEl.html(),e.editableInit.call(this,t,this.model.get("y")*this.dragScale+35),!this.editing)){this.$textEl.get(0).focus();try{document.execCommand("selectAll",!1,null),e.triggerCaret()}catch(t){}}this.allowDragging=!1,this.editing=!0},mousedown:function(t){return this.editing?(t.stopPropagation(),e.editableInit.call(this,t,this.model.get("y")*this.dragScale+35)):i.prototype.mousedown.apply(this,arguments),!0},mouseup:function(t){this.editing&&e.triggerCaret(),i.prototype.mouseup.apply(this,arguments)},keydown:function(t){this.model.get("selected")&&!this.editing&&(t.ctrlKey||t.altKey||t.metaKey||!String.fromCharCode(t.which).match(/[\w]/)||this.edit())},edit:function(){var t;this.model.set("selected",!0),t=$.Event("click",{pageX:this.model.get("x")}),this.dblclicked(t),this.$textEl.selectText()},editCompleted:function(){var t;if(t=this.$textEl.html(),this.editing=!1,""===t)return this.remove();var e=n.Text(this._initialText,this.model);o.push(e),this.model.set("text",t),window.getSelection().removeAllRanges(),this.$textEl.attr("contenteditable",!1),this.$el.removeClass("editable"),this.allowDragging=!0},_selectionChanged:function(t,e){i.prototype._selectionChanged.apply(this,arguments),!e&&this.editing&&this.editCompleted()},_styleChanged:function(t,e,n){var i,r;if(r=n.changes)for(var s=0;s<r.length;++s)i=r[s],t.get(i)&&("decoration"===i||"align"===i?i="text"+i.substring(0,1).toUpperCase()+i.substr(1):"color"!==i&&(i="font"+i.substr(0,1).toUpperCase()+i.substr(1)),this.$el.css(i,e))},_textChanged:function(t,e){this.$textEl.html(e)},_handlePaste:function(t,e){e=e.originalEvent,document.execCommand("insertText",!1,e.clipboardData.getData("text/plain")),e.preventDefault()},render:function(){i.prototype.render.call(this),this.$textEl=this.$el.find(".content");var e=this;return this.$textEl.bind("paste",function(t){e._handlePaste(this,t)}),this.$textEl.html(this.model.get("text")),this.$el.css({fontSize:this.model.get("size"),top:this.model.get("y"),left:this.model.get("x")}),this.$el},constructor:function(){i.prototype.constructor.apply(this,arguments)}})}),define("strut/slide_components/view/WebFrameView",["./ComponentView"],function(n){return n.extend({className:"component webFrameView",initialize:function(){return n.prototype.initialize.apply(this,arguments)},render:function(){var t,e;return n.prototype.render.call(this),t=$("<iframe width='960' height='768' src="+this.model.get("src")+"></iframe>"),this.$el.find(".content").append(t),this.$el.append('<div class="overlay"></div>'),e=this.model.get("scale"),this.$el.css({width:960*e.x,height:768*e.y}),this.$el}})}),define("strut/slide_components/view/VideoView",["./ComponentView","./Mixers"],function(n,t){var e,i,r;return e=n.extend({className:"component videoView",initialize:function(){return n.prototype.initialize.apply(this,arguments)},render:function(){var t,e=this;return n.prototype.render.call(this),(t=$("<video controls></video>")).append("<source preload='metadata' src='"+this.model.get("src")+"' type='"+this.model.get("srcType")+"' />"),t.bind("loadedmetadata",function(){e._finishRender($(this))}),this.$el.find(".content").append(t),this.$el},_finishRender:function(t){this.origSize={width:t[0].videoWidth,height:t[0].videoHeight},this._setUpdatedTransform()}}),i=n.extend({className:"component videoView",initialize:function(){n.prototype.initialize.apply(this,arguments),this.scale=t.scaleObjectEmbed,this.model.off("change:scale",this._setUpdatedTransform,this),this.model.on("change:scale",t.scaleChangeObjectEmbed,this)},render:function(){var t,e;return n.prototype.render.call(this),t='<object width="425" height="344"><param name="movie" value="http://www.youtube.com/v/'+this.model.get("shortSrc")+'&hl=en&fs=1"><param name="allowFullScreen" value="true"><embed src="http://www.youtube.com/v/'+this.model.get("shortSrc")+'&hl=en&fs=1" type="application/x-shockwave-flash" allowfullscreen="true" width="425" height="344"></object>',this.$object=$(t),this.$embed=this.$object.find("embed"),(e=this.model.get("scale"))&&e.width?(this.$object.attr(e),this.$embed.attr(e)):this.model.attributes.scale={width:425,height:344},this.$el.find(".content").append(this.$object),this.$el}}),r={html5:e,youtube:i},function(t){return new(r[t.model.get("videoType")])(t)}}),define("tantaman/web/widgets/Utils",[],function(){return{fitSizeToScale:function(t,e){for(var n=t.length,i=0;i<n;++i){var r=$(t[i]),s=r.outerWidth(),o=r.outerHeight(),a=r.parent();a.width(s*e),a.height(o*e)}}}}),define("strut/slide_components/view/ShapesDropdown",["tantaman/web/widgets/Dropdown","tantaman/web/widgets/Utils"],function(i,t){function e(t,e,n){i.apply(this,arguments),this._editorModel=n.editorModel,this._shapes=t.shapes,this.$el.on("click",".shape",this._selected.bind(this))}return f(e,i),e.prototype._selected=function(t){this._editorModel.addComponent({markup:this._shapes[t.currentTarget.dataset.index].markup,type:"Shape"})},e}),define("strut/slide_components/ShapeCollection",[],function(){function a(t,e,n,i){if(!(this instanceof a))return new a(t,e,n,i);this.name=t;var r,s=window.location.href,o=s.indexOf("#");-1!=o&&(s=s.substring(0,o)),-1!=(r=s.lastIndexOf("/"))&&(s=s.substring(0,r)),this.src=s+"/preview_export/shapes/"+e,this.markup=n,this.aspect=i}function t(){this.title="shapes",this.shapes=[a("square","square.svg",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 50 50" preserveAspectRatio="none"><rect width="50" height="50"/></svg>',1),a("triangle","triangle.svg",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 50 50" preserveAspectRatio="none"><polygon points="25,0 50,50 0,50"/></svg>',1),a("circle","circle.svg",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="none" viewBox="0 0 80 80"><circle cx="40" cy="40" r="40" /></svg>',1),a("hexagon","hexagon.svg",'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 726 726" preserveAspectRatio="none"><polygon points="723,314 543,625.769145 183,625.769145 3,314 183,2.230855 543,2.230855 723,314"/></svg>',1),a("pentagon","pentagon.svg",'<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" version="1.1" preserveAspectRatio="none"><polygon points="156.427384220077,186.832815729997 43.5726157799226,186.832815729997 8.69857443566525,79.5015528100076 100,13.1671842700025 191.301425564335,79.5015528100076" /></svg>',1),a("star","star.svg",'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 180 180" preserveAspectRatio="none"><polygon points="90,0 30,170 180,50 0,50 150,170"/></svg>',1),a("pacman","pacman.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 571.11 571.11" preserveAspectRatio="none"><path d="M535.441,412.339A280.868,280.868 0 1,1 536.186,161.733L284.493,286.29Z"/></svg>',1),a("heart","heart.svg",'<svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.0" viewBox="0 0 645 585" preserveAspectRatio="none"><defs id="defs4" /><g id="layer1"><path d="M 297.29747,550.86823 C 283.52243,535.43191 249.1268,505.33855 220.86277,483.99412 C 137.11867,420.75228 125.72108,411.5999 91.719238,380.29088 C 29.03471,322.57071 2.413622,264.58086 2.5048478,185.95124 C 2.5493594,147.56739 5.1656152,132.77929 15.914734,110.15398 C 34.151433,71.768267 61.014996,43.244667 95.360052,25.799457 C 119.68545,13.443675 131.6827,7.9542046 172.30448,7.7296236 C 214.79777,7.4947896 223.74311,12.449347 248.73919,26.181459 C 279.1637,42.895777 310.47909,78.617167 316.95242,103.99205 L 320.95052,119.66445 L 330.81015,98.079942 C 386.52632,-23.892986 564.40851,-22.06811 626.31244,101.11153 C 645.95011,140.18758 648.10608,223.6247 630.69256,270.6244 C 607.97729,331.93377 565.31255,378.67493 466.68622,450.30098 C 402.0054,497.27462 328.80148,568.34684 323.70555,578.32901 C 317.79007,589.91654 323.42339,580.14491 297.29747,550.86823 z" id="path2417"/><g transform="translate(129.28571,-64.285714)" id="g2221"/></g></svg>',1),a("infinity","infinity.svg",'<svg viewBox="0 0 640 480" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"><g><path stroke-width="1px" d="m349.597595,238.17981c15.849091,14.657486 34.60968,25.733734 56.281982,33.228851c21.671265,7.495331 46.092407,11.24292 73.263641,11.242828c32.668762,0.000092 59.354279,-5.579712 80.056244,-16.739349c20.700806,-11.325974 31.051331,-25.733459 31.052124,-43.222443c-0.000793,-16.822479 -9.542786,-30.813492 -28.62616,-41.973221c-19.084778,-11.159363 -43.020752,-16.73912 -71.808075,-16.739334c-26.5242,0.000214 -50.622009,5.663269 -72.293213,16.989166c-21.348907,11.159744 -43.991089,30.230896 -67.926544,57.213501m-59.193085,-26.732941c-15.849976,-14.657166 -34.61055,-25.650101 -56.282013,-32.978958c-21.348709,-7.328445 -45.769836,-10.992783 -73.263657,-10.992981c-32.993088,0.000198 -59.84024,5.496704 -80.541473,16.489441c-20.378067,10.993195 -30.567028,25.317368 -30.566898,42.97261c-0.00013,16.822723 9.541882,30.813782 28.626179,41.973267c19.083969,11.159607 43.019958,16.739441 71.80806,16.739319c26.523346,0.000122 50.62114,-5.662964 72.293213,-16.989166c21.671478,-11.325958 44.313583,-30.397125 67.92659,-57.213531m34.448425,45.720856c-22.642609,22.485779 -46.740234,39.058563 -72.293289,49.718323c-25.230194,10.493347 -53.047653,15.740021 -83.45253,15.73996c-43.990807,0.000061 -81.026909,-9.244049 -111.108456,-27.73233c-30.081831,-18.654663 -45.122731,-41.806549 -45.122602,-69.455734c-0.00013,-29.147934 13.423501,-52.716156 40.270741,-70.70491c27.170368,-17.988297 62.427532,-26.982544 105.77132,-26.982796c30.728348,0.000252 58.384155,5.246895 82.967438,15.739967c24.905945,10.493515 49.003754,27.232849 72.293213,50.217957c21.994659,-22.985107 45.768982,-39.890991 71.322876,-50.717636c25.552734,-10.992752 54.017242,-16.489243 85.393311,-16.489471c43.343018,0.000229 80.217407,9.410889 110.62323,28.231979c30.404541,18.654984 45.606995,41.890076 45.607788,69.705536c-0.000793,29.148254 -13.585999,52.633209 -40.755859,70.455109c-26.8479,17.822021 -61.943237,26.733032 -105.286163,26.732941c-30.405701,0.000092 -57.738037,-4.913483 -81.99704,-14.74057c-23.936401,-9.993561 -48.681091,-26.566345 -74.233978,-49.718323" id="text1306"/></g></svg>',1),a("yin yang","yinyang.svg",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 466 466" preserveAspectRatio="none"><circle cx="233" cy="233" r="231"/><path d="M 233,459 a 226 226 0 0 1 0,-452 a 113 113 0 0 1 0,226 z" fill="#fff"/><circle cx="233" cy="346" r="113"/><circle cx="233" cy="120" r="30"/><circle cx="233" cy="346" r="30" fill="#fff"/></svg>',1)]}return t.prototype={on:function(){}},t}),define("tantaman/web/widgets/ManagedColorChooser",["libs/backbone","tantaman/web/Utils"],function(i,n){"use strict";var r={},s={color:"#000",showSelectionPalette:!0,localStorageKey:"strut.colorChooser",showPalette:!0,showInitial:!0,showInput:!0,palette:[],clickoutFiresChange:!0,flat:!1,position:"absolute"};function o(t){t=t||{},_.defaults(t,s),this.$el=$('<div class="dispNone"></div>'),this.$el.on("mousedown",n.stopProp),this.$el.append('<input class="color-chooser colorpicker" />'),this._$colorChooser=this.$el.find(".color-chooser");var e=this;t.move=function(t){e._colorUpdated(t)},t.position&&this.$el.css("position",t.position),this._$colorChooser.spectrum(t)}return o.prototype={_colorUpdated:function(t){this.trigger("update:color",t)},show:function(t){this.$el.removeClass("dispNone"),t&&null!=t.top&&null!=t.left&&this.$el.css({top:t.top,left:t.left}),t&&t.move&&this.on("update:color",t.move),t&&t.appendTo&&0==this.$el.parent(t.appendTo).length&&this.$el.appendTo(t.appendTo)},move:function(t){this.$el.css(t)},hide:function(t){this.$el.addClass("dispNone"),this._$colorChooser.spectrum("hide"),t&&t.move&&this.off("update:color",t.move)}},{get:function(t,e){var n;return(n=r[t])||(n=new o(e),_.extend(n,i.Events),r[t]=n),n}}}),define("strut/slide_components/view/ShapeView",["./ComponentView","./Mixers","tantaman/web/widgets/ManagedColorChooser"],function(r,t,e){"use strict";var n=e.get("floatingChooser");return r.extend({className:"component shapeView",initialize:function(){r.prototype.initialize.apply(this,arguments),this.scale=t.scaleObjectEmbed,this.model.off("change:scale",this._setUpdatedTransform,this),this.model.on("change:scale",t.scaleChangeInlineSvg,this),this.model.on("change:fill",this._fillChanged,this),this._updateFill=this._updateFill.bind(this)},render:function(){r.prototype.render.call(this);var t=this.model.get("markup");this.$object=$(t);var e=this.model.get("scale"),n=this.$el.find(".content");n.append(this.$object),n.append($('<div class="overlay"></div>')),this._$colorPreview=this.$el.find(".sp-preview-inner"),e&&e.width||(e={width:100,height:100},this.model.attributes.scale=e),this.$object.attr(e);var i=this.model.get("fill");return i&&this.$object.attr("fill",i),this.$el},_xChanged:function(t,e){r.prototype._xChanged.apply(this,arguments),n.move({left:e+this.model.get("scale").width})},_yChanged:function(t,e){r.prototype._yChanged.apply(this,arguments),n.move({top:e-5})},remove:function(){r.prototype.remove.apply(this,arguments),n.hide({move:this._updateFill})},_selectionChanged:function(t,e){e?n.show({left:this.model.get("x")+this.model.get("scale").width,top:this.model.get("y")-5,move:this._updateFill,appendTo:".operatingTable > .slideContainer"}):n.hide({move:this._updateFill}),r.prototype._selectionChanged.apply(this,arguments)},_fillChanged:function(t,e){this._$colorPreview.css("background-color",e),this.$object.attr("fill",e)},_updateFill:function(t){this.model.set("fill",t.toHexString())}})}),define("strut/slide_components/model/Shape",["strut/deck/Component"],function(e){"use strict";return e.extend({initialize:function(){e.prototype.initialize.apply(this,arguments),this.set("type","Shape")},constructor:function(t){e.prototype.constructor.call(this,t)}})}),define("strut/slide_components/main",["./view/ComponentButton","./view/ImportingComponentButton","./model/Image","./model/TextBox","./model/WebFrame","./model/Video","./view/ImageView","./view/TextBoxView","./view/WebFrameView","./view/VideoView","./ComponentFactory","lang","./view/ShapesDropdown","./ShapeCollection","./view/ShapeView","./model/Shape"],function(n,i,e,r,s,o,a,l,c,u,h,d,p,t,f,m){var g=new t,v={createButtons:function(t){var e=[];return e.push(new n({componentType:"TextBox",icon:"icon-text-width",name:d.text,editorModel:t})),e.push(new i({componentType:"Image",icon:"icon-picture",name:d.image,tag:"img",title:d.insert_image,editorModel:t,browsable:!0})),e.push(new i({componentType:"Video",icon:"icon-film",name:d.video,tag:"video",title:d.insert_video,editorModel:t,ignoreErrors:!0})),e.push(new i({componentType:"WebFrame",icon:"icon-globe",name:d.website,tag:"iframe",title:d.insert_website,editorModel:t})),e.push(new p(g,JST["strut.slide_components/ShapesDropdown"],{class:"group-dropdown",editorModel:t})),e}};return{initialize:function(t){t.register({interfaces:"strut.ComponentButtonProvider"},v),t.register({interfaces:"strut.ComponentModel",meta:{type:"Image"}},e),t.register({interfaces:"strut.ComponentModel",meta:{type:"TextBox"}},r),t.register({interfaces:"strut.ComponentModel",meta:{type:"WebFrame"}},s),t.register({interfaces:"strut.ComponentModel",meta:{type:"Video"}},o),t.register({interfaces:"strut.ComponentModel",meta:{type:"Shape"}},m),t.register({interfaces:"strut.ComponentView",meta:{type:"Image"}},a),t.register({interfaces:"strut.ComponentView",meta:{type:"TextBox"}},l),t.register({interfaces:"strut.ComponentView",meta:{type:"WebFrame"}},c),t.register({interfaces:"strut.ComponentView",meta:{type:"Video"}},u),t.register({interfaces:"strut.ComponentView",meta:{type:"Shape"}},f),h.initialize(t)}}}),define("strut/well_context_buttons/AddSlideButton",["libs/backbone"],function(n){return n.View.extend({className:"addBtn btn btn-success",events:{click:"_addSlide"},_addSlide:function(){this._editorModel.addSlide(this._wellMenuModel.slideIndex())},render:function(){return this.$el.html('<center><i class="icon-plus icon-white"></i></center>'),this},constructor:function(t,e){this._editorModel=t,this._wellMenuModel=e,n.View.prototype.constructor.call(this)}})}),define("strut/well_context_buttons/main",["./AddSlideButton","lang"],function(i,t){"use strict";var e={createButtons:function(t,e){var n=[];return n.push(new i(t,e)),n}};return{initialize:function(t){t.register({interfaces:["strut.WellContextButtonProvider"]},e)}}}),define("tantaman/web/local_storage/LocalStorageProvider",[],function(){var a="strut-";function t(){this.impl=localStorage,this.name="Local Storage",this.id="localstorage"}var i=!1;return t.prototype={ready:function(){return!0},bg:function(){},ls:function(t,e,n){for(var i=this.impl.length,r=[],s=0;s<i;++s){var o=this.impl.key(s);0!=o.indexOf(a)||null!=e&&null==e.exec(o)||r.push(o.substring(a.length))}return n(r),this},rm:function(t,e){return this.impl.removeItem(a+t),e&&e(!0),this},getContents:function(t,e){var n=this.impl.getItem(a+t);if(null!=n)try{e(JSON.parse(n))}catch(t){e(null,t)}return this},setContents:function(t,e,n){try{this.impl.setItem(a+t,JSON.stringify(e))}catch(t){i||(i=!0,alert("Strut currently uses your browser's LocalStorage to save presentations which is limited to between 2.5 and 5mb.\n\nYou are currently over this limit so your presentation will not be saved.  You may continue editing, however.\n\nTry removing any images you dragged in and link to them instead.\n\nWe're working on improving the storage capacity!  5mb should be good if you link to your images (e.g., file://path/to/image or http://url/of/image).\n\nSorry for the inconvenience that this may cause.  We are working to resolve the issue!"))}return n&&n(!0),this}},t}),define("tantaman/web/local_storage/main",["./LocalStorageProvider"],function(t){var e=new t;return{initialize:function(t){t.register({interfaces:"tantaman.web.StorageProvider"},e)}}}),define("strut/logo_button/LogoModel",["libs/backbone","framework/ServiceCollection"],function(e,t){return e.Model.extend({initialize:function(){this.items=new t(this._editorModel.registry,"strut.LogoMenuItemProvider",this._convertServiceEntry.bind(this))},_convertServiceEntry:function(t){return t.service().createMenuItems(this._editorModel)},constructor:function(t){this._editorModel=t,e.Model.prototype.constructor.call(this)}})}),define("strut/logo_button/LogoView",["libs/backbone","./LogoModel","css!styles/logo_button/logo.css"],function(t,e){"use strict";return t.View.extend({className:"logo-group btn-group",initialize:function(){this._template=JST["strut.logo_button/Logo"],this.model=new e(this.options.editorModel),delete this.options.editorModel},render:function(){this.$el.html(this._template());var e=this.$el.find(".dropdown-menu");return this.model.items.forEach(function(t){e.append(t.render().$el)},this),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/presentation_generator/PreviewLauncher",[],function(){"use strict";function t(t){this._editorModel=t}return t.prototype={launch:function(t){window.previewWind&&window.previewWind.close(),this._editorModel.trigger("launch:preview",null);var e=t.generate(this._editorModel.deck());localStorage.setItem("preview-string",e),localStorage.setItem("preview-config",JSON.stringify({surface:this._editorModel.deck().get("surface")})),window.previewWind=window.open("preview_export/"+t.id+".html"+t.getSlideHash(this._editorModel),window.location.href);window}},t}),define("strut/presentation_generator/view/PreviewButton",["libs/backbone","../PreviewLauncher"],function(t,e){return t.View.extend({className:"btn-group iconBtns",events:{"click .act":"_launch"},initialize:function(){this._editorModel=this.options.editorModel,this._previewLauncher=new e(this._editorModel),this._generators=this._editorModel.registry.getBest("strut.presentation_generator.GeneratorCollection"),delete this.options.editorModel,this._index=Math.min(window.sessionMeta.generator_index||0,this._generators.length-1),this._generatorChanged(),this._template=JST["strut.presentation_generator/Button"]},_launch:function(){this._previewLauncher.launch(this._generators[this._index])},_bind:function(){var i=this;this.$el.find("li").each(function(e){var n=$(this);n.click(function(t){i.$el.find(".check").css("visibility","hidden"),n.find(".check").css("visibility",""),i._index=e,window.sessionMeta.generator_index=e,i._generatorChanged(),i.$el.find(".dropdown-toggle").dropdown("toggle"),t.stopPropagation()})})},_generatorChanged:function(){this._editorModel.set("generator",this._generators[this._index]),this._$readout&&this._$readout.text(this._generators[this._index].displayName)},render:function(){return this.$el.html(this._template({generators:this._generators,chosen:this._generators[this._index]})),this._bind(),this._$readout=this.$el.find(".chosen"),$(this.$el.find(".check")[this._index]).css("visibility",""),this}})}),define("strut/header/model/ThemeProviderCollection",["libs/backbone","framework/ServiceCollection"],function(t,n){function e(t,e){this._editorModel=t,this._activeProviders=[],this._editorModel.on("change:activeMode",this._modeChanged,this),this._themeProviders=new n(t.registry,{interfaces:"strut.ThemeProvider",meta:e}),this._modeChanged(null,this._editorModel.get("activeMode")),this._themeProviders.on("registered",function(t,e){this._addProvider(e)},this)}return e.prototype={_modeChanged:function(t,e){this._disposePrevious(),this._themeProviders.forEach(function(t){e.id in t.meta().modes&&this._addProvider(t)},this),this.trigger("change:activeProviders",this._activeProviders)},_addProvider:function(t){var e=t.service().create(this._editorModel);Array.isArray(e)?this._activeProviders=this._activeProviders.concat(e):this._activeProviders.push(e)},_disposePrevious:function(){this._activeProviders.forEach(function(t){t.dispose()},this),this._activeProviders=[]},activeProviders:function(){return this._activeProviders}},_.extend(e.prototype,t.Events),e}),define("strut/header/view/ThemeProviderView",["libs/backbone","../model/ThemeProviderCollection"],function(e,n){return e.View.extend({className:"themeProviders",initialize:function(t){this._providerCollection=new n(t,{overflow:!1}),this._providerCollection.on("change:activeProviders",this.render,this)},render:function(){return this.$el.empty(),this._providerCollection.activeProviders().forEach(function(t){this.$el.append(t.view().render().$el)},this),this},constructor:function(t){e.View.prototype.constructor.call(this,t)}})}),define("tantaman/web/widgets/Tablets",[],function(){function t(t){this._currentItems=[],this.$el=$('<div class="tablets hiding">'),this.template=t.template;var e=this;this.$el.on("click",".tablets-toggle",function(t){e.toggle()})}return t.prototype={render:function(){return this.$el.html(this.template()),this.$content=this.$el.find(".tablets-content"),this._currentItems.forEach(function(t){this.$content.append(t.render().$el)},this),this},add:function(t){Array.isArray(t)||(t=[t]);var e=[];t.forEach(function(t){-1==this._currentItems.indexOf(t)&&e.push(t)},this),e.forEach(function(t){this._currentItems.push(t),this.$content&&this.$content.append(t.render().$el)},this)},empty:function(){this.$content&&this.$content.html(""),this._currentItems=[]},dispose:function(){},toggle:function(){this.$el.is(".hiding")?(this.$el.removeClass("hiding"),this.$el.addClass("showing")):this.hide()},hide:function(){this.$el.removeClass("showing"),this.$el.addClass("hiding")}},t}),define("strut/header/view/Tablets",["tantaman/web/widgets/Tablets","../model/ThemeProviderCollection"],function(e,n){function t(t){this._providers=new n(t,{overflow:!0}),this._providers.on("change:activeProviders",this._providersChanged,this),this._tablets=new e({template:JST["strut.slide_editor/Tablets"]}),this.$el=this._tablets.$el,this._providersChanged()}return t.prototype={dispose:function(){this._tablets.dispose(),this._providers.dispose()},_providersChanged:function(){var e=[];this._providers.activeProviders().forEach(function(t){e.push(t.view())},this),this._tablets.hide(),this._tablets.empty(),this._tablets.add(e)},render:function(){return this._tablets.render(),this}},t}),define("strut/header/view/HeaderView",["libs/backbone","strut/logo_button/LogoView","strut/presentation_generator/view/PreviewButton","./ThemeProviderView","./Tablets","css!styles/header/header.css"],function(t,e,n,i,r,s){return t.View.extend({className:"row-fluid header",initialize:function(){this._template=JST["strut.header/Header"],this._logoButton=new e({editorModel:this.model.editorModel()}),this._previewButton=new n({editorModel:this.model.editorModel()}),this._themeProviderView=new i(this.model.editorModel()),this.model.editorModel().on("change:activeMode",this._modeChanged,this),this._tablets=new r(this.model.editorModel())},_modeChanged:function(t,e){"overview"==e.id?this.$el.find(".create-comp-buttons").addClass("hidden"):this.$el.find(".create-comp-buttons").removeClass("hidden")},render:function(){this.$el.html(this._template()),this.$el.find(".logo-holder").append(this._logoButton.render().$el);var e=this.$el.find(".mode-buttons");this.model.get("modeButtons").forEach(function(t){e.append(t.render().el)},this);var n=this.$el.find(".create-comp-buttons > div");return this.model.get("createCompButtons").forEach(function(t){n.append(t.render().el)},this),e.append(this._previewButton.render().$el),this.$el.find(".theme-buttons").append(this._themeProviderView.render().$el),this._tablets.render(),this.$el.append(this._tablets.$el),this},constructor:function(){t.View.prototype.constructor.apply(this,arguments)}})}),define("strut/editor/CustomBgStylesheet",["tantaman/web/css_manip/CssManip"],function(t){var n=t.getStyleElem({id:"customBackgrounds",create:!0});function e(t){(this.model=t).on("change:customBackgrounds",this.render,this)}return e.prototype={render:function(t,e){e&&(n.innerHTML=JST["strut.presentation_generator/CustomBgStylesheet"](e.get("bgs")))},dispose:function(){this.model.off(null,null,this)}},e}),define("strut/editor/EditorView",["libs/backbone","strut/header/view/HeaderView","./CustomBgStylesheet"],function(t,e,n){return t.View.extend({className:"container-fluid",initialize:function(){this._header=new e({model:this.model.get("header")}),this.model.on("change:activeMode",this._modeChanged,this),this._customBgSheet=new n(this.model)},render:function(){this.$el.empty(),this.$el.append(this._header.render().$el);var t=this.model.get("activeMode");return t?this.$el.append(t.view.render().$el):this._renderNoMode(),this},_modeChanged:function(t,e){this.$el.append(e.view.render().$el)},_renderNoMode:function(){this.$el.append('<div class="alert alert-error">No modes available.  Did some plugins fail to load?</div>')}})}),define("strut/header/model/HeaderModel",["libs/backbone"],function(n){return n.Model.extend({initialize:function(){this._createModeButtons(),this._createCreateCompButtons(),this.registry.on("registered:strut.ComponentButtonProvider",this._compBtnProviderRegistered,this),this.registry.on("registered:strut.EditMode",this._modeRegistered,this)},editorModel:function(){return this._editorModel},_createModeButtons:function(){this._disposeObjects(this.get("modeButtons"));var t=this.registry.get("strut.EditMode"),e=[];t.forEach(function(t){e.push(t.service().createButton(this._editorModel))},this),this.set("modeButtons",e)},_createCreateCompButtons:function(){this._disposeObjects(this.get("createCompButtons"));var t=this.registry.get("strut.ComponentButtonProvider"),n=[];t.forEach(function(t){var e=t.service().createButtons(this._editorModel);n=n.concat(e)},this),this.set("createCompButtons",n)},_modeRegistered:function(t){var e=t.service().createButton(this._editorModel);this.get("modeButtons").push(e),this.trigger("change:modeButtons.push",this.get("modeButtons"),e)},_compBtnProviderRegistered:function(t){var e=t.createButtons();this.set("createCompButtons",this.get("createCompButtons").concat(e)),this.trigger("change:createCompButtons.concat",this.get("createCompButtons"),e)},_disposeObjects:function(t){t&&t.forEach(function(t){t.dispose()})},constructor:function(t,e){this.registry=t,this._editorModel=e,n.Model.prototype.constructor.call(this)}})}),define("common/Adapter",[],function(){return function(n,i){Object.keys(i).forEach(function(t){var e=i[t];this[t]=function(){return n[e].apply(n,arguments)}},this)}}),define("tantaman/web/interactions/Clipboard",[],function(){function t(){this.items=[]}return t.prototype.setItems=function(t){t.length&&(this.items=t.slice(0))},t.prototype.getItems=function(){return $.map(this.items,function(t){return t.clone()})},t}),define("strut/editor/EditorModel",["libs/backbone","strut/header/model/HeaderModel","strut/deck/Deck","strut/slide_components/ComponentFactory","common/Adapter","tantaman/web/interactions/Clipboard","./GlobalEvents","tantaman/web/undo_support/CmdListFactory"],function(n,i,r,s,o,a,l,c){"use strict";return n.Model.extend({initialize:function(){(window.uiTestAcc=this)._fontState=window.sessionMeta.fontState||{},this._deck=new r,this._deck.on("change:customBackgrounds",function(t,e){this.trigger("change:customBackgrounds",this,e)},this),this.addSlide(),this.set("header",new i(this.registry,this)),this.set("modeId","slide-editor"),this.exportable=new o(this,{export:"exportPresentation",identifier:"fileName"});var t=(this.exportable.adapted=this).registry.getBest("tantaman.web.saver.AutoSavers");if(t){var e=null;e=this.registry.getBest("strut.StorageInterface");e=new o(e,{store:"savePresentation"}),this._exitSaver=t.exitSaver(this.exportable,e),this._timedSaver=t.timedSaver(this.exportable,2e4,e)}this.clipboard=new a,this._createMode(),this._cmdList=c.managedInstance("editor"),l.on("undo",this._cmdList.undo,this._cmdList),l.on("redo",this._cmdList.redo,this._cmdList),n.on("etch:state",this._fontStateChanged,this)},changeActiveMode:function(t){t!=this.get("modeId")&&(this.set("modeId",t),this._createMode())},customStylesheet:function(t){if(null==t)return this._deck.get("customStylesheet");this._deck.set("customStylesheet",t)},dispose:function(){throw"EditorModel can not be disposed yet"},newPresentation:function(){var t=window.sessionMeta.num||0;t+=1,window.sessionMeta.num=t,this.importPresentation({fileName:"presentation-"+t,slides:[]}),this._deck.create()},addCustomBgClassFor:function(t){var e=this._deck.addCustomBgClassFor(t);return e.existed||this.trigger("change:customBackgrounds",this,this._deck.get("customBackgrounds")),e},customBackgrounds:function(){return this._deck.get("customBackgrounds")},importPresentation:function(t){console.log("New file name: "+t.fileName),this._deck.import(t)},exportPresentation:function(t){return t&&this._deck.set("fileName",t),this._deck.toJSON(!1,!0)},fileName:function(){var t=this._deck.get("fileName");return null==t&&(t="presentation-unnamed",this._deck.set("fileName",t)),t},deck:function(){return this._deck},cannedTransition:function(t){if(null==t)return this._deck.get("cannedTransition");this._deck.set("cannedTransition",t)},slides:function(){return this._deck.get("slides")},addSlide:function(t){this._deck.create(t)},activeSlide:function(){return this._deck.get("activeSlide")},activeSlideIndex:function(){return this._deck.get("slides").indexOf(this._deck.get("activeSlide"))},addComponent:function(t){var e=this._deck.get("activeSlide");if(e){var n=s.instance.createModel(t,{fontStyles:this._fontState});e.add(n)}},_fontStateChanged:function(t){_.extend(this._fontState,t),window.sessionMeta.fontState=this._fontState},_createMode:function(){var t=this.get("modeId"),e=this.registry.getBest({interfaces:"strut.EditMode",meta:{id:t}});if(e){var n=this.get("activeMode");n&&n.close(),this.set("activeMode",e.getMode(this,this.registry))}},constructor:function(t){this.registry=t,n.Model.prototype.constructor.call(this)}})}),define("strut/startup/main",["strut/editor/EditorView","strut/editor/EditorModel"],function(e,i){var r=null,n={run:function(){var n=new i(r),t=new e({model:n,registry:r});(t.render(),$("body").append(t.$el),null!=sessionMeta.lastPresentation)&&r.getBest("strut.StorageInterface").load(sessionMeta.lastPresentation,function(t,e){e?(console.log(e),console.log(e.stack)):n.importPresentation(t)})}},s={run:function(){}};return{initialize:function(t){(r=t).register({interfaces:"strut.StartupTask"},n),r.register({interfaces:"strut.StartupTask"},s)}}}),define("features",["framework/ServiceRegistry","strut/etch_extension/main","strut/storage/main","strut/logo_button/main","strut/themes/main","strut/editor/main","strut/exporter/json/main","strut/exporter/zip/browser/main","strut/importer/json/main","strut/importer/main","strut/exporter/main","strut/presentation_generator/impress/main","strut/presentation_generator/bespoke/main","strut/presentation_generator/handouts/main","strut/presentation_generator/main","tantaman/web/saver/main","strut/slide_editor/main","strut/transition_editor/main","strut/slide_components/main","strut/well_context_buttons/main","tantaman/web/local_storage/main","strut/startup/main"],function(t){var e=new t,n=Array.prototype.slice.call(arguments,0),i=0;for(i=1;i<n.length;++i)n[i].initialize(e);return e}),define("common/Concurrent",[],function(){function t(t,e,n){this.num=t,this.stepCb=n,this.completionCb=e,this.decrement=this.decrement.bind(this)}return t.prototype={decrement:function(){if(--this.num,this.num<0)throw"Countdown less than zero";this.stepCb.apply(null,arguments),0==this.num&&this.completionCb.apply(null,arguments)}},{countdown:t}}),define("StrutLoader",["common/Concurrent"],function(s){return{start:function(t,e,n){var i=t.get("strut.StartupTask"),r=new s.countdown(i.length,e,n);i.forEach(function(t){t.service().run(r.decrement)})}}}),function(e){"use strict";e(function(){var t;e.support.transition=(t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}())&&{end:t}})}(window.jQuery),function(s){"use strict";var e='[data-dismiss="alert"]',i=function(t){s(t).on("click",e,this.close)};i.prototype.close=function(t){var e,n=s(this),i=n.attr("data-target");function r(){e.trigger("closed").remove()}i||(i=(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),e=s(i),t&&t.preventDefault(),e.length||(e=n.hasClass("alert")?n:n.parent()),e.trigger(t=s.Event("close")),t.isDefaultPrevented()||(e.removeClass("in"),s.support.transition&&e.hasClass("fade")?e.on(s.support.transition.end,r):r())};var t=s.fn.alert;s.fn.alert=function(n){return this.each(function(){var t=s(this),e=t.data("alert");e||t.data("alert",e=new i(this)),"string"==typeof n&&e[n].call(t)})},s.fn.alert.Constructor=i,s.fn.alert.noConflict=function(){return s.fn.alert=t,this},s(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery),function(r){"use strict";var s=function(t,e){this.$element=r(t),this.options=r.extend({},r.fn.button.defaults,e)};s.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),r=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[r]()),n[r](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},s.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var t=r.fn.button;r.fn.button=function(i){return this.each(function(){var t=r(this),e=t.data("button"),n="object"==typeof i&&i;e||t.data("button",e=new s(this,n)),"toggle"==i?e.toggle():i&&e.setState(i)})},r.fn.button.defaults={loadingText:"loading..."},r.fn.button.Constructor=s,r.fn.button.noConflict=function(){return r.fn.button=t,this},r(document).on("click.button.data-api","[data-toggle^=button]",function(t){var e=r(t.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})}(window.jQuery),function(c){"use strict";var s=function(t,e){this.$element=c(t),this.options=e,"hover"==this.options.pause&&this.$element.on("mouseenter",c.proxy(this.pause,this)).on("mouseleave",c.proxy(this.cycle,this))};s.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},to:function(t){var e=this.$element.find(".item.active"),n=e.parent().children(),i=n.index(e),r=this;if(!(t>n.length-1||t<0))return this.sliding?this.$element.one("slid",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",c(n[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition.end&&(this.$element.trigger(c.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,e){var n,i=this.$element.find(".item.active"),r=e||i[t](),s=this.interval,o="next"==t?"left":"right",a="next"==t?"first":"last",l=this;if(this.sliding=!0,s&&this.pause(),r=r.length?r:this.$element.find(".item")[a](),n=c.Event("slide",{relatedTarget:r[0]}),!r.hasClass("active")){if(c.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,i.addClass(o),r.addClass(o),this.$element.one(c.support.transition.end,function(){r.removeClass([t,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var t=c.fn.carousel;c.fn.carousel=function(r){return this.each(function(){var t=c(this),e=t.data("carousel"),n=c.extend({},c.fn.carousel.defaults,"object"==typeof r&&r),i="string"==typeof r?r:n.slide;e||t.data("carousel",e=new s(this,n)),"number"==typeof r?e.to(r):i?e[i]():n.interval&&e.cycle()})},c.fn.carousel.defaults={interval:5e3,pause:"hover"},c.fn.carousel.Constructor=s,c.fn.carousel.noConflict=function(){return c.fn.carousel=t,this},c(document).on("click.carousel.data-api","[data-slide]",function(t){var e,n=c(this),i=c(n.attr("data-target")||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),r=c.extend({},i.data(),n.data());i.carousel(r),t.preventDefault()})}(window.jQuery),function(s){"use strict";var r=function(t,e){this.$element=s(t),this.options=s.extend({},s.fn.collapse.defaults,e),this.options.parent&&(this.$parent=s(this.options.parent)),this.options.toggle&&this.toggle()};r.prototype={constructor:r,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var t,e,n,i;if(!this.transitioning){if(t=this.dimension(),e=s.camelCase(["scroll",t].join("-")),(n=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&n.length){if((i=n.data("collapse"))&&i.transitioning)return;n.collapse("hide"),i||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",s.Event("show"),"shown"),s.support.transition&&this.$element[t](this.$element[0][e])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",s.Event("hide"),"hidden"),this.$element[t](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(t,e,n){var i=this,r=function(){"show"==e.type&&i.reset(),i.transitioning=0,i.$element.trigger(n)};this.$element.trigger(e),e.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),s.support.transition&&this.$element.hasClass("collapse")?this.$element.one(s.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var t=s.fn.collapse;s.fn.collapse=function(i){return this.each(function(){var t=s(this),e=t.data("collapse"),n="object"==typeof i&&i;e||t.data("collapse",e=new r(this,n)),"string"==typeof i&&e[i]()})},s.fn.collapse.defaults={toggle:!0},s.fn.collapse.Constructor=r,s.fn.collapse.noConflict=function(){return s.fn.collapse=t,this},s(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var e,n=s(this),i=n.attr("data-target")||t.preventDefault()||(e=n.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),r=s(i).data("collapse")?"toggle":n.data();n[s(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),s(i).collapse(r)})}(window.jQuery),function(o){"use strict";var t="[data-toggle=dropdown]",i=function(t){var e=o(t).on("click.dropdown.data-api",this.toggle);o("html").on("click.dropdown.data-api",function(){e.parent().removeClass("open")})};function r(){o(t).each(function(){a(o(this)).removeClass("open")})}function a(t){var e,n=t.attr("data-target");return n||(n=(n=t.attr("href"))&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),(e=o(n)).length||(e=t.parent()),e}i.prototype={constructor:i,toggle:function(t){var e,n,i=o(this);if(!i.is(".disabled, :disabled"))return n=(e=a(i)).hasClass("open"),r(),n||e.toggleClass("open"),i.focus(),!1},keydown:function(t){var e,n,i,r,s;if(/(38|40|27)/.test(t.keyCode)&&(e=o(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(!(r=(i=a(e)).hasClass("open"))||r&&27==t.keyCode)return e.click();(n=o("[role=menu] li:not(.divider):visible a",i)).length&&(s=n.index(n.filter(":focus")),38==t.keyCode&&0<s&&s--,40==t.keyCode&&s<n.length-1&&s++,~s||(s=0),n.eq(s).focus())}}};var e=o.fn.dropdown;o.fn.dropdown=function(n){return this.each(function(){var t=o(this),e=t.data("dropdown");e||t.data("dropdown",e=new i(this)),"string"==typeof n&&e[n].call(t)})},o.fn.dropdown.Constructor=i,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=e,this},o(document).on("click.dropdown.data-api touchstart.dropdown.data-api",r).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",i.prototype.keydown).on("selectablestart",r)}(window.jQuery),function(s){"use strict";var r=function(t,e){this.options=e,this.$element=s(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",s.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};r.prototype={constructor:r,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,t=s.Event("show");this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var t=s.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),t&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),t?e.$element.one(s.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=s.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),s(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),s.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;s(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,e=setTimeout(function(){t.$element.off(s.support.transition.end),t.hideModal()},500);this.$element.one(s.support.transition.end,function(){clearTimeout(e),t.hideModal()})},hideModal:function(t){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=s.support.transition&&e;this.$backdrop=s('<div class="modal-backdrop '+e+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?s.proxy(this.$element[0].focus,this.$element[0]):s.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(s.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(s.support.transition.end,s.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var t=s.fn.modal;s.fn.modal=function(i){return this.each(function(){var t=s(this),e=t.data("modal"),n=s.extend({},s.fn.modal.defaults,t.data(),"object"==typeof i&&i);e||t.data("modal",e=new r(this,n)),"string"==typeof i?e[i]():n.show&&e.show()})},s.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},s.fn.modal.Constructor=r,s.fn.modal.noConflict=function(){return s.fn.modal=t,this},s(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var e=s(this),n=e.attr("href"),i=s(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=i.data("modal")?"toggle":s.extend({remote:!/#/.test(n)&&n},i.data(),e.data());t.preventDefault(),i.modal(r).one("hide",function(){e.focus()})})}(window.jQuery),function(s){"use strict";var r=function(t,e){this.init("tooltip",t,e)};r.prototype={constructor:r,init:function(t,e,n){var i,r;this.type=t,this.$element=s(e),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,s.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(i="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,s.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,s.proxy(this.leave,this))),this.options.selector?this._options=s.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=s.extend({},s.fn[this.type].defaults,t,this.$element.data())).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var e=s(t.currentTarget)[this.type](this._options).data(this.type);if(!e.options.delay||!e.options.delay.show)return e.show();clearTimeout(this.timeout),e.hoverState="in",this.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)},leave:function(t){var e=s(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!e.options.delay||!e.options.delay.hide)return e.hide();e.hoverState="out",this.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)},show:function(){var t,e,n,i,r,s,o;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(s),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(e),i=t[0].offsetWidth,r=t[0].offsetHeight,e?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":o={top:n.top-r,left:n.left+n.width/2-i/2};break;case"left":o={top:n.top+n.height/2-r/2,left:n.left-i};break;case"right":o={top:n.top+n.height/2-r/2,left:n.left+n.width}}t.offset(o).addClass(s).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){var t,e=this.tip();return e.removeClass("in"),s.support.transition&&this.$tip.hasClass("fade")?(t=setTimeout(function(){e.off(s.support.transition.end).detach()},500),e.one(s.support.transition.end,function(){clearTimeout(t),e.detach()})):e.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return s.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},tip:function(){return this.$tip=this.$tip||s(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var e=s(t.currentTarget)[this.type](this._options).data(this.type);e[e.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var t=s.fn.tooltip;s.fn.tooltip=function(i){return this.each(function(){var t=s(this),e=t.data("tooltip"),n="object"==typeof i&&i;e||t.data("tooltip",e=new r(this,n)),"string"==typeof i&&e[i]()})},s.fn.tooltip.Constructor=r,s.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},s.fn.tooltip.noConflict=function(){return s.fn.tooltip=t,this}}(window.jQuery),function(r){"use strict";var s=function(t,e){this.init("popover",t,e)};s.prototype=r.extend({},r.fn.tooltip.Constructor.prototype,{constructor:s,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},tip:function(){return this.$tip||(this.$tip=r(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var t=r.fn.popover;r.fn.popover=function(i){return this.each(function(){var t=r(this),e=t.data("popover"),n="object"==typeof i&&i;e||t.data("popover",e=new s(this,n)),"string"==typeof i&&e[i]()})},r.fn.popover.Constructor=s,r.fn.popover.defaults=r.extend({},r.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),r.fn.popover.noConflict=function(){return r.fn.popover=t,this}}(window.jQuery),function(s){"use strict";function r(t,e){var n,i=s.proxy(this.process,this),r=s(t).is("body")?s(window):s(t);this.options=s.extend({},s.fn.scrollspy.defaults,e),this.$scrollElement=r.on("scroll.scroll-spy.data-api",i),this.selector=(this.options.target||(n=s(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=s("body"),this.refresh(),this.process()}r.prototype={constructor:r,refresh:function(){var i=this;this.offsets=s([]),this.targets=s([]),this.$body.find(this.selector).map(function(){var t=s(this),e=t.data("target")||t.attr("href"),n=/^#\w/.test(e)&&s(e);return n&&n.length&&[[n.position().top+i.$scrollElement.scrollTop(),e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),i=this.offsets,r=this.targets,s=this.activeTarget;if(n<=e)return s!=(t=r.last()[0])&&this.activate(t);for(t=i.length;t--;)s!=r[t]&&e>=i[t]&&(!i[t+1]||e<=i[t+1])&&this.activate(r[t])},activate:function(t){var e,n;this.activeTarget=t,s(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',(e=s(n).parent("li").addClass("active")).parent(".dropdown-menu").length&&(e=e.closest("li.dropdown").addClass("active")),e.trigger("activate")}};var t=s.fn.scrollspy;s.fn.scrollspy=function(i){return this.each(function(){var t=s(this),e=t.data("scrollspy"),n="object"==typeof i&&i;e||t.data("scrollspy",e=new r(this,n)),"string"==typeof i&&e[i]()})},s.fn.scrollspy.Constructor=r,s.fn.scrollspy.defaults={offset:10},s.fn.scrollspy.noConflict=function(){return s.fn.scrollspy=t,this},s(window).on("load",function(){s('[data-spy="scroll"]').each(function(){var t=s(this);t.scrollspy(t.data())})})}(window.jQuery),function(o){"use strict";var i=function(t){this.element=o(t)};i.prototype={constructor:i,show:function(){var t,e,n,i=this.element,r=i.closest("ul:not(.dropdown-menu)"),s=i.attr("data-target");s||(s=(s=i.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,"")),i.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],n=o.Event("show",{relatedTarget:t}),i.trigger(n),n.isDefaultPrevented()||(e=o(s),this.activate(i.parent("li"),r),this.activate(e,e.parent(),function(){i.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,e,n){var i=e.find("> .active"),r=n&&o.support.transition&&i.hasClass("fade");function s(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),r?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}r?i.one(o.support.transition.end,s):s(),i.removeClass("in")}};var t=o.fn.tab;o.fn.tab=function(n){return this.each(function(){var t=o(this),e=t.data("tab");e||t.data("tab",e=new i(this)),"string"==typeof n&&e[n]()})},o.fn.tab.Constructor=i,o.fn.tab.noConflict=function(){return o.fn.tab=t,this},o(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),o(this).tab("show")})}(window.jQuery),function(r){"use strict";var s=function(t,e){this.$element=r(t),this.options=r.extend({},r.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=r(this.options.menu),this.shown=!1,this.listen()};s.prototype={constructor:s,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var t=r.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=r.isFunction(this.source)?this.source(this.query,r.proxy(this.process,this)):this.source)?this.process(e):this},process:function(t){var e=this;return t=r.grep(t,function(t){return e.matcher(t)}),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],r=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):r.push(e):n.push(e);return n.concat(i,r)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(t){var n=this;return(t=r(t).map(function(t,e){return(t=r(n.options.item).attr("data-value",e)).find("a").html(n.highlighter(e)),t[0]})).first().addClass("active"),this.$menu.html(t),this},next:function(t){var e=this.$menu.find(".active").removeClass("active").next();e.length||(e=r(this.$menu.find("li")[0])),e.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active").prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",r.proxy(this.blur,this)).on("keypress",r.proxy(this.keypress,this)).on("keyup",r.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",r.proxy(this.keydown,this)),this.$menu.on("click",r.proxy(this.click,this)).on("mouseenter","li",r.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~r.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(t){var e=this;setTimeout(function(){e.hide()},150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),r(t.currentTarget).addClass("active")}};var t=r.fn.typeahead;r.fn.typeahead=function(i){return this.each(function(){var t=r(this),e=t.data("typeahead"),n="object"==typeof i&&i;e||t.data("typeahead",e=new s(this,n)),"string"==typeof i&&e[i]()})},r.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},r.fn.typeahead.Constructor=s,r.fn.typeahead.noConflict=function(){return r.fn.typeahead=t,this},r(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var e=r(this);e.data("typeahead")||(t.preventDefault(),e.typeahead(e.data()))})}(window.jQuery),function(a){"use strict";var r=function(t,e){this.options=a.extend({},a.fn.affix.defaults,e),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(t),this.checkPosition()};r.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,e=a(document).height(),n=this.$window.scrollTop(),i=this.$element.offset(),r=this.options.offset,s=r.bottom,o=r.top;"object"!=typeof r&&(s=o=r),"function"==typeof o&&(o=r.top()),"function"==typeof s&&(s=r.bottom()),t=!(null!=this.unpin&&n+this.unpin<=i.top)&&(null!=s&&i.top+this.$element.height()>=e-s?"bottom":null!=o&&n<=o&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?i.top-n:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(t?"-"+t:"")))}};var t=a.fn.affix;a.fn.affix=function(i){return this.each(function(){var t=a(this),e=t.data("affix"),n="object"==typeof i&&i;e||t.data("affix",e=new r(this,n)),"string"==typeof i&&e[i]()})},a.fn.affix.Constructor=r,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=t,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var t=a(this),e=t.data();e.offset=e.offset||{},e.offsetBottom&&(e.offset.bottom=e.offsetBottom),e.offsetTop&&(e.offset.top=e.offsetTop),t.affix(e)})})}(window.jQuery),define("bootstrap",["jquery"],function(){}),function(_,t){_.ui=_.ui||{};var r,k=Math.max,C=Math.abs,S=Math.round,i=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+%?/,a=/^\w+/,l=/%$/,c=_.fn.position;function M(t,e,n){return[parseInt(t[0],10)*(l.test(t[0])?e/100:1),parseInt(t[1],10)*(l.test(t[1])?n/100:1)]}function T(t,e){return parseInt(_.css(t,e),10)||0}_.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,e,n=_("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return _("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),r=t-e},getScrollInfo:function(t){var e=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:i?_.position.scrollbarWidth():0,height:r?_.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=_(t||window),n=_.isWindow(e[0]);return{element:e,isWindow:n,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:n?e.width():e.outerWidth(),height:n?e.height():e.outerHeight()}}},_.fn.position=function(h){if(!h||!h.of)return c.apply(this,arguments);h=_.extend({},h);var d,p,f,m,g,t,e,n,v=_(h.of),b=_.position.getWithinInfo(h.within),y=_.position.getScrollInfo(b),w=(h.collision||"flip").split(" "),x={};return t=9===(n=(e=v)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:_.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},v[0].preventDefault&&(h.at="left top"),p=t.width,f=t.height,m=t.offset,g=_.extend({},m),_.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",t=o.exec(n[0]),e=o.exec(n[1]),x[this]=[t?t[0]:0,e?e[0]:0],h[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===h.at[0]?g.left+=p:"center"===h.at[0]&&(g.left+=p/2),"bottom"===h.at[1]?g.top+=f:"center"===h.at[1]&&(g.top+=f/2),d=M(x.at,p,f),g.left+=d[0],g.top+=d[1],this.each(function(){var n,t,o=_(this),a=o.outerWidth(),l=o.outerHeight(),e=T(this,"marginLeft"),i=T(this,"marginTop"),r=a+e+T(this,"marginRight")+y.width,s=l+i+T(this,"marginBottom")+y.height,c=_.extend({},g),u=M(x.my,o.outerWidth(),o.outerHeight());"right"===h.my[0]?c.left-=a:"center"===h.my[0]&&(c.left-=a/2),"bottom"===h.my[1]?c.top-=l:"center"===h.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],_.support.offsetFractions||(c.left=S(c.left),c.top=S(c.top)),n={marginLeft:e,marginTop:i},_.each(["left","top"],function(t,e){_.ui.position[w[t]]&&_.ui.position[w[t]][e](c,{targetWidth:p,targetHeight:f,elemWidth:a,elemHeight:l,collisionPosition:n,collisionWidth:r,collisionHeight:s,offset:[d[0]+u[0],d[1]+u[1]],my:h.my,at:h.at,within:b,elem:o})}),h.using&&(t=function(t){var e=m.left-c.left,n=e+p-a,i=m.top-c.top,r=i+f-l,s={target:{element:v,left:m.left,top:m.top,width:p,height:f},element:{element:o,left:c.left,top:c.top,width:a,height:l},horizontal:n<0?"left":0<e?"right":"center",vertical:r<0?"top":0<i?"bottom":"middle"};p<a&&C(e+n)<p&&(s.horizontal="center"),f<l&&C(i+r)<f&&(s.vertical="middle"),k(C(e),C(n))>k(C(i),C(r))?s.important="horizontal":s.important="vertical",h.using.call(this,t,s)}),o.offset(_.extend(c,{using:t}))})},_.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,o=t.left-e.collisionPosition.marginLeft,a=r-o,l=o+e.collisionWidth-s-r;e.collisionWidth>s?0<a&&l<=0?(n=t.left+a+e.collisionWidth-s-r,t.left+=a-n):t.left=0<l&&a<=0?r:l<a?r+s-e.collisionWidth:r:0<a?t.left+=a:0<l?t.left-=l:t.left=k(t.left-o,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,s=e.within.height,o=t.top-e.collisionPosition.marginTop,a=r-o,l=o+e.collisionHeight-s-r;e.collisionHeight>s?0<a&&l<=0?(n=t.top+a+e.collisionHeight-s-r,t.top+=a-n):t.top=0<l&&a<=0?r:l<a?r+s-e.collisionHeight:r:0<a?t.top+=a:0<l?t.top-=l:t.top=k(t.top-o,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,s=r.offset.left+r.scrollLeft,o=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-a,u=l+e.collisionWidth-o-a,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];c<0?((n=t.left+h+d+p+e.collisionWidth-o-s)<0||n<C(c))&&(t.left+=h+d+p):0<u&&(0<(i=t.left-e.collisionPosition.marginLeft+h+d+p-a)||C(i)<u)&&(t.left+=h+d+p)},top:function(t,e){var n,i,r=e.within,s=r.offset.top+r.scrollTop,o=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-a,u=l+e.collisionHeight-o-a,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];c<0?(i=t.top+h+d+p+e.collisionHeight-o-s,t.top+h+d+p>c&&(i<0||i<C(c))&&(t.top+=h+d+p)):0<u&&(n=t.top-e.collisionPosition.marginTop+h+d+p-a,t.top+h+d+p>u&&(0<n||C(n)<u)&&(t.top+=h+d+p))}},flipfit:{left:function(){_.ui.position.flip.left.apply(this,arguments),_.ui.position.fit.left.apply(this,arguments)},top:function(){_.ui.position.flip.top.apply(this,arguments),_.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,n,i,r,s=document.getElementsByTagName("body")[0],o=document.createElement("div");for(r in t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&_.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[r]=n[r];t.appendChild(o),(e=s||document.documentElement).insertBefore(t,e.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",i=_(o).offset().left,_.support.offsetFractions=10<i&&i<11,t.innerHTML="",e.removeChild(t)}()}(jQuery),define("position",["jquery"],function(){}),function(u,h){if(u.support.htmlMenuitem="HTMLMenuItemElement"in window,u.support.htmlCommand="HTMLCommandElement"in window,u.support.eventSelectstart="onselectstart"in document.documentElement,!u.ui||!u.ui.widget){var i=u.cleanData;u.cleanData=function(t){for(var e,n=0;null!=(e=t[n]);n++)try{u(e).triggerHandler("remove")}catch(t){}i(t)}}var s=null,l=!1,c=u(window),d=0,p={},f={},m={},g={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(t){if(u.ui&&u.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var e=this.offset();e.top+=this.outerHeight(),e.left+=this.outerWidth()/2-t.outerWidth()/2,t.css(e)}},position:function(t,e,n){var i;if(e||n){i="maintain"===e&&"maintain"===n?t.$menu.position():{top:n,left:e};var r=c.scrollTop()+c.height(),s=c.scrollLeft()+c.width(),o=t.$menu.height(),a=t.$menu.width();i.top+o>r&&(i.top-=o),i.left+a>s&&(i.left-=a),t.$menu.css(i)}else t.determinePosition.call(this,t.$menu)},positionSubmenu:function(t){if(u.ui&&u.ui.position)t.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var e={top:0,left:this.outerWidth()};t.css(e)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:u.noop,hide:u.noop},callback:null,items:{}},r={timer:null,pageX:null,pageY:null},v={abortevent:function(t){t.preventDefault(),t.stopImmediatePropagation()},contextmenu:function(t){var e=u(this);if(t.preventDefault(),t.stopImmediatePropagation(),!("right"!=t.data.trigger&&t.originalEvent||e.hasClass("context-menu-active")||e.hasClass("context-menu-disabled"))){if(s=e,t.data.build){var n=t.data.build(s,t);if(!1===n)return;if(t.data=u.extend(!0,{},g,t.data,n||{}),!t.data.items||u.isEmptyObject(t.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),new Error("No Items specified");t.data.$trigger=s,b.create(t.data)}b.show.call(e,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault(),t.stopImmediatePropagation(),u(this).trigger(u.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var e=u(this);s&&s.length&&!s.is(e)&&s.data("contextMenu").$menu.trigger("contextmenu:hide"),2==t.button&&(s=e.data("contextMenuActive",!0))},mouseup:function(t){var e=u(this);e.data("contextMenuActive")&&s&&s.length&&s.is(e)&&!e.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),(s=e).trigger(u.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))),e.removeData("contextMenuActive")},mouseenter:function(t){var e=u(this),n=u(t.relatedTarget),i=u(document);n.is(".context-menu-list")||n.closest(".context-menu-list").length||s&&s.length||(r.pageX=t.pageX,r.pageY=t.pageY,r.data=t.data,i.on("mousemove.contextMenuShow",v.mousemove),r.timer=setTimeout(function(){r.timer=null,i.off("mousemove.contextMenuShow"),(s=e).trigger(u.Event("contextmenu",{data:r.data,pageX:r.pageX,pageY:r.pageY}))},t.data.delay))},mousemove:function(t){r.pageX=t.pageX,r.pageY=t.pageY},mouseleave:function(t){var e=u(t.relatedTarget);if(!e.is(".context-menu-list")&&!e.closest(".context-menu-list").length){try{clearTimeout(r.timer)}catch(t){}r.timer=null}},layerClick:function(n){var i,r,s=u(this).data("contextMenuRoot"),o=n.button,a=n.pageX,l=n.pageY;n.preventDefault(),n.stopImmediatePropagation(),setTimeout(function(){var t,e="left"==s.trigger&&0===o||"right"==s.trigger&&2===o;if(document.elementFromPoint&&(s.$layer.hide(),i=document.elementFromPoint(a-c.scrollLeft(),l-c.scrollTop()),s.$layer.show()),s.reposition&&e)if(document.elementFromPoint){if(s.$trigger.is(i)||s.$trigger.has(i).length)return void s.position.call(s.$trigger,s,a,l)}else if(r=s.$trigger.offset(),t=u(window),r.top+=t.scrollTop(),r.top<=n.pageY&&(r.left+=t.scrollLeft(),r.left<=n.pageX&&(r.bottom=r.top+s.$trigger.outerHeight(),r.bottom>=n.pageY&&(r.right=r.left+s.$trigger.outerWidth(),r.right>=n.pageX))))return void s.position.call(s.$trigger,s,a,l);i&&e&&s.$trigger.one("contextmenu:hidden",function(){u(i).contextMenu({x:a,y:l})}),s.$menu.trigger("contextmenu:hide")},50)},keyStop:function(t,e){e.isInput||t.preventDefault(),t.stopPropagation()},key:function(t){var e=s.data("contextMenu")||{};switch(t.keyCode){case 9:case 38:if(v.keyStop(t,e),e.isInput){if(9==t.keyCode&&t.shiftKey)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void e.$menu.trigger("prevcommand");if(38==t.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault()}else if(9!=t.keyCode||t.shiftKey)return void e.$menu.trigger("prevcommand");case 40:if(v.keyStop(t,e),!e.isInput)return void e.$menu.trigger("nextcommand");if(9==t.keyCode)return t.preventDefault(),e.$selected&&e.$selected.find("input, textarea, select").blur(),void e.$menu.trigger("nextcommand");if(40==t.keyCode&&"checkbox"==e.$selected.find("input, textarea, select").prop("type"))return void t.preventDefault();break;case 37:if(v.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;if(!e.$selected.parent().hasClass("context-menu-root")){var n=e.$selected.parent().parent();return e.$selected.trigger("contextmenu:blur"),void(e.$selected=n)}break;case 39:if(v.keyStop(t,e),e.isInput||!e.$selected||!e.$selected.length)break;var i=e.$selected.data("contextMenu")||{};if(i.$menu&&e.$selected.hasClass("context-menu-submenu"))return e.$selected=null,i.$selected=null,void i.$menu.trigger("nextcommand");break;case 35:case 36:return e.$selected&&e.$selected.find("input, textarea, select").length?void 0:((e.$selected&&e.$selected.parent()||e.$menu).children(":not(.disabled, .not-selectable)")[36==t.keyCode?"first":"last"]().trigger("contextmenu:focus"),void t.preventDefault());case 13:if(v.keyStop(t,e),e.isInput){if(e.$selected&&!e.$selected.is("textarea, select"))return void t.preventDefault();break}return void(e.$selected&&e.$selected.trigger("mouseup"));case 32:case 33:case 34:return void v.keyStop(t,e);case 27:return v.keyStop(t,e),void e.$menu.trigger("contextmenu:hide");default:var r=String.fromCharCode(t.keyCode).toUpperCase();if(e.accesskeys[r])return void e.accesskeys[r].$node.trigger(e.accesskeys[r].$menu?"contextmenu:focus":"mouseup")}t.stopPropagation(),e.$selected&&e.$selected.trigger(t)},prevItem:function(t){t.stopPropagation();var e=u(this).data("contextMenu")||{};if(e.$selected){var n=e.$selected;(e=e.$selected.parent().data("contextMenu")||{}).$selected=n}for(var i=e.$menu.children(),r=e.$selected&&e.$selected.prev().length?e.$selected.prev():i.last(),s=r;r.hasClass("disabled")||r.hasClass("not-selectable");)if((r=r.prev().length?r.prev():i.last()).is(s))return;e.$selected&&v.itemMouseleave.call(e.$selected.get(0),t),v.itemMouseenter.call(r.get(0),t);var o=r.find("input, textarea, select");o.length&&o.focus()},nextItem:function(t){t.stopPropagation();var e=u(this).data("contextMenu")||{};if(e.$selected){var n=e.$selected;(e=e.$selected.parent().data("contextMenu")||{}).$selected=n}for(var i=e.$menu.children(),r=e.$selected&&e.$selected.next().length?e.$selected.next():i.first(),s=r;r.hasClass("disabled")||r.hasClass("not-selectable");)if((r=r.next().length?r.next():i.first()).is(s))return;e.$selected&&v.itemMouseleave.call(e.$selected.get(0),t),v.itemMouseenter.call(r.get(0),t);var o=r.find("input, textarea, select");o.length&&o.focus()},focusInput:function(t){var e=u(this).closest(".context-menu-item"),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;r.$selected=i.$selected=e,r.isInput=i.isInput=!0},blurInput:function(t){var e=u(this).closest(".context-menu-item").data(),n=e.contextMenu;e.contextMenuRoot.isInput=n.isInput=!1},menuMouseenter:function(t){u(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(t){var e=u(this).data().contextMenuRoot;e.$layer&&e.$layer.is(t.relatedTarget)&&(e.hovering=!1)},itemMouseenter:function(t){var e=u(this),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;r.hovering=!0,t&&r.$layer&&r.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(i.$menu?i:r).$menu.children(".hover").trigger("contextmenu:blur"),e.hasClass("disabled")||e.hasClass("not-selectable")?i.$selected=null:e.trigger("contextmenu:focus")},itemMouseleave:function(t){var e=u(this),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;if(r!==i&&r.$layer&&r.$layer.is(t.relatedTarget))return r.$selected&&r.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),void(r.$selected=i.$selected=i.$node);e.trigger("contextmenu:blur")},itemClick:function(t){var e,n=u(this),i=n.data(),r=i.contextMenu,s=i.contextMenuRoot,o=i.contextMenuKey;if(r.items[o]&&!n.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){if(t.preventDefault(),t.stopImmediatePropagation(),u.isFunction(s.callbacks[o])&&Object.prototype.hasOwnProperty.call(s.callbacks,o))e=s.callbacks[o];else{if(!u.isFunction(s.callback))return;e=s.callback}!1!==e.call(s.$trigger,o,s)?s.$menu.trigger("contextmenu:hide"):s.$menu.parent().length&&b.update.call(s.$trigger,s)}},inputClick:function(t){t.stopImmediatePropagation()},hideMenu:function(t,e){var n=u(this).data("contextMenuRoot");b.hide.call(n.$trigger,n,e&&e.force)},focusItem:function(t){t.stopPropagation();var e=u(this),n=e.data(),i=n.contextMenu,r=n.contextMenuRoot;e.addClass("hover").siblings(".hover").trigger("contextmenu:blur"),i.$selected=r.$selected=e,i.$node&&r.positionSubmenu.call(i.$node,i.$menu)},blurItem:function(t){t.stopPropagation();var e=u(this),n=e.data(),i=n.contextMenu;n.contextMenuRoot;e.removeClass("hover"),i.$selected=null}},b={show:function(n,t,e){var i=u(this),r={};u("#context-menu-layer").trigger("mousedown"),n.$trigger=i,!1!==n.events.show.call(i,n)?(b.update.call(i,n),n.position.call(i,n,t,e),n.zIndex&&(r.zIndex=function(t){for(var e=0,n=t;e=Math.max(e,parseInt(n.css("z-index"),10)||0),(n=n.parent())&&n.length&&!(-1<"html body".indexOf(n.prop("nodeName").toLowerCase())););return e}(i)+n.zIndex),b.layer.call(n.$menu,n,r.zIndex),n.$menu.find("ul").css("zIndex",r.zIndex+1),n.$menu.css(r)[n.animation.show](n.animation.duration,function(){i.trigger("contextmenu:visible")}),i.data("contextMenu",n).addClass("context-menu-active"),u(document).off("keydown.contextMenu").on("keydown.contextMenu",v.key),n.autoHide&&u(document).on("mousemove.contextMenuAutoHide",function(t){var e=i.offset();e.right=e.left+i.outerWidth(),e.bottom=e.top+i.outerHeight(),!n.$layer||n.hovering||t.pageX>=e.left&&t.pageX<=e.right&&t.pageY>=e.top&&t.pageY<=e.bottom||n.$menu.trigger("contextmenu:hide")}),n.events.shown&&n.events.shown.call(i,n)):s=null},hide:function(n,t){var e=u(this);if(n||(n=e.data("contextMenu")||{}),t||!n.events||!1!==n.events.hide.call(e,n)){if(e.removeData("contextMenu").removeClass("context-menu-active"),n.$layer){setTimeout((i=n.$layer,function(){i.remove()}),10);try{delete n.$layer}catch(t){n.$layer=null}}var i;s=null,n.$menu.find(".hover").trigger("contextmenu:blur"),n.$selected=null,u(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),n.$menu&&n.$menu[n.animation.hide](n.animation.duration,function(){n.build&&(n.$menu.remove(),u.each(n,function(t,e){switch(t){case"ns":case"selector":case"build":case"trigger":return!0;default:n[t]=h;try{delete n[t]}catch(t){}return!0}})),setTimeout(function(){e.trigger("contextmenu:hidden")},10)})}},create:function(l,c){c===h&&(c=l),l.$menu=u('<ul class="context-menu-list"></ul>').addClass(l.className||"").data({contextMenu:l,contextMenuRoot:c}),u.each(["callbacks","commands","inputs"],function(t,e){l[e]={},c[e]||(c[e]={})}),c.accesskeys||(c.accesskeys={}),u.each(l.items,function(n,i){var t=u('<li class="context-menu-item"></li>').addClass(i.className||""),e=null,r=null;if(t.on("click",u.noop),i.$node=t.data({contextMenu:l,contextMenuRoot:c,contextMenuKey:n}),i.accesskey)for(var s,o=function(t){for(var e,n=t.split(/\s+/),i=[],r=0;e=n[r];r++)e=e[0].toUpperCase(),i.push(e);return i}(i.accesskey),a=0;s=o[a];a++)if(!c.accesskeys[s]){(c.accesskeys[s]=i)._name=i.name.replace(new RegExp("("+s+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof i)t.addClass("context-menu-separator not-selectable");else if(i.type&&m[i.type])m[i.type].call(t,i,l,c),u.each([l,c],function(t,e){e.commands[n]=i,u.isFunction(i.callback)&&(e.callbacks[n]=i.callback)});else{switch("html"==i.type?t.addClass("context-menu-html not-selectable"):i.type?(e=u("<label></label>").appendTo(t),u("<span></span>").html(i._name||i.name).appendTo(e),t.addClass("context-menu-input"),l.hasTypes=!0,u.each([l,c],function(t,e){e.commands[n]=i,e.inputs[n]=i})):i.items&&(i.type="sub"),i.type){case"text":r=u('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+n).val(i.value||"").appendTo(e);break;case"textarea":r=u('<textarea name=""></textarea>').attr("name","context-menu-input-"+n).val(i.value||"").appendTo(e),i.height&&r.height(i.height);break;case"checkbox":r=u('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+n).val(i.value||"").prop("checked",!!i.selected).prependTo(e);break;case"radio":r=u('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+i.radio).val(i.value||"").prop("checked",!!i.selected).prependTo(e);break;case"select":r=u('<select name="">').attr("name","context-menu-input-"+n).appendTo(e),i.options&&(u.each(i.options,function(t,e){u("<option></option>").val(t).text(e).appendTo(r)}),r.val(i.selected));break;case"sub":u("<span></span>").html(i._name||i.name).appendTo(t),i.appendTo=i.$node,b.create(i,c),t.data("contextMenu",i).addClass("context-menu-submenu"),i.callback=null;break;case"html":u(i.html).appendTo(t);break;default:u.each([l,c],function(t,e){e.commands[n]=i,u.isFunction(i.callback)&&(e.callbacks[n]=i.callback)}),u("<span></span>").html(i._name||i.name||"").appendTo(t)}i.type&&"sub"!=i.type&&"html"!=i.type&&(r.on("focus",v.focusInput).on("blur",v.blurInput),i.events&&r.on(i.events,l)),i.icon&&t.prepend('<i class="icon icon-'+i.icon+'"></i>'),i.background&&(t.addClass(i.background),t[0].dataset.background=i.background)}i.$input=r,i.$label=e,t.appendTo(l.$menu),!l.hasTypes&&u.support.eventSelectstart&&t.on("selectstart.disableTextSelect",v.abortevent)}),l.$node||l.$menu.css("display","none").addClass("context-menu-root"),l.$menu.appendTo(l.appendTo||document.body)},resize:function(t,e){t.css({position:"absolute",display:"block"}),t.data("width",Math.ceil(t.width())+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(){b.resize(u(this),!0)}),e||t.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return u(this).data("width")})},update:function(r,s){var o=this;s===h&&(s=r,b.resize(r.$menu)),r.$menu.children().each(function(){var t=u(this),e=t.data("contextMenuKey"),n=r.items[e],i=u.isFunction(n.disabled)&&n.disabled.call(o,e,s)||!0===n.disabled;if(t[i?"addClass":"removeClass"]("disabled"),n.type)switch(t.find("input, select, textarea").prop("disabled",i),n.type){case"text":case"textarea":n.$input.val(n.value||"");break;case"checkbox":case"radio":n.$input.val(n.value||"").prop("checked",!!n.selected);break;case"select":n.$input.val(n.selected||"")}n.$menu&&b.update.call(o,n,s)})},layer:function(t,e){var n=t.$layer=u('<div id="context-menu-layer" style="position:fixed; z-index:'+e+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:c.height(),width:c.width(),display:"block"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",v.abortevent).on("mousedown",v.layerClick);return u.support.fixedPosition||n.css({position:"absolute",height:u(document).height()}),n}};function y(t){return t.id&&u('label[for="'+t.id+'"]').val()||t.name}u.fn.contextMenu=function(t){if(t===h)this.first().trigger("contextmenu");else if(t.x&&t.y)this.first().trigger(u.Event("contextmenu",{pageX:t.x,pageY:t.y}));else if("hide"===t){var e=this.data("contextMenu").$menu;e&&e.trigger("contextmenu:hide")}else"destroy"===t?u.contextMenu("destroy",{context:this}):u.isPlainObject(t)?(t.context=this,u.contextMenu("create",t)):t?this.removeClass("context-menu-disabled"):t||this.addClass("context-menu-disabled");return this},u.contextMenu=function(t,e){"string"!=typeof t&&(e=t,t="create"),"string"==typeof e?e={selector:e}:e===h&&(e={});var n=u.extend(!0,{},g,e||{}),i=u(document),r=i,s=!1;switch(n.context&&n.context.length?(r=u(n.context).first(),n.context=r.get(0),s=n.context!==document):n.context=document,t){case"create":if(!n.selector)throw new Error("No selector specified");if(n.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+n.selector+'" as it contains a reserved className');if(!n.build&&(!n.items||u.isEmptyObject(n.items)))throw new Error("No Items specified");switch(d++,n.ns=".contextMenu"+d,s||(p[n.selector]=n.ns),(f[n.ns]=n).trigger||(n.trigger="right"),l||(i.on({"contextmenu:hide.contextMenu":v.hideMenu,"prevcommand.contextMenu":v.prevItem,"nextcommand.contextMenu":v.nextItem,"contextmenu.contextMenu":v.abortevent,"mouseenter.contextMenu":v.menuMouseenter,"mouseleave.contextMenu":v.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",v.inputClick).on({"mouseup.contextMenu":v.itemClick,"contextmenu:focus.contextMenu":v.focusItem,"contextmenu:blur.contextMenu":v.blurItem,"contextmenu.contextMenu":v.abortevent,"mouseenter.contextMenu":v.itemMouseenter,"mouseleave.contextMenu":v.itemMouseleave},".context-menu-item"),l=!0),r.on("contextmenu"+n.ns,n.selector,n,v.contextmenu),s&&r.on("remove"+n.ns,function(){u(this).contextMenu("destroy")}),n.trigger){case"hover":r.on("mouseenter"+n.ns,n.selector,n,v.mouseenter).on("mouseleave"+n.ns,n.selector,n,v.mouseleave);break;case"left":r.on("click"+n.ns,n.selector,n,v.click)}n.build||b.create(n);break;case"destroy":var o;if(s){var a=n.context;u.each(f,function(t,e){if(e.context!==a)return!0;(o=u(".context-menu-list").filter(":visible")).length&&o.data().contextMenuRoot.$trigger.is(u(e.context).find(e.selector))&&o.trigger("contextmenu:hide",{force:!0});try{f[e.ns].$menu&&f[e.ns].$menu.remove(),delete f[e.ns]}catch(t){f[e.ns]=null}return u(e.context).off(e.ns),!0})}else if(n.selector){if(p[n.selector]){(o=u(".context-menu-list").filter(":visible")).length&&o.data().contextMenuRoot.$trigger.is(n.selector)&&o.trigger("contextmenu:hide",{force:!0});try{f[p[n.selector]].$menu&&f[p[n.selector]].$menu.remove(),delete f[p[n.selector]]}catch(t){f[p[n.selector]]=null}i.off(p[n.selector])}}else i.off(".contextMenu .contextMenuAutoHide"),u.each(f,function(t,e){u(e.context).off(e.ns)}),p={},d=0,l=!(f={}),u("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!u.support.htmlCommand&&!u.support.htmlMenuitem||"boolean"==typeof e&&e)&&u('menu[type="context"]').each(function(){this.id&&u.contextMenu({selector:"[contextmenu="+this.id+"]",items:u.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+t+'"')}return this},u.contextMenu.setInputValues=function(t,n){n===h&&(n={}),u.each(t.inputs,function(t,e){switch(e.type){case"text":case"textarea":e.value=n[t]||"";break;case"checkbox":e.selected=!!n[t];break;case"radio":e.selected=(n[e.radio]||"")==e.value;break;case"select":e.selected=n[t]||""}})},u.contextMenu.getInputValues=function(t,n){return n===h&&(n={}),u.each(t.inputs,function(t,e){switch(e.type){case"text":case"textarea":case"select":n[t]=e.$input.val();break;case"checkbox":n[t]=e.$input.prop("checked");break;case"radio":e.$input.prop("checked")&&(n[e.radio]=e.value)}}),n},u.contextMenu.fromMenu=function(t){var e={};return function s(o,t,a){return a||(a=0),t.each(function(){var t,e,n=u(this),i=this,r=this.nodeName.toLowerCase();switch("label"==r&&n.find("input, textarea, select").length&&(t=n.text(),r=(i=(n=n.children().first()).get(0)).nodeName.toLowerCase()),r){case"menu":e={name:n.attr("label"),items:{}},a=s(e.items,n.children(),a);break;case"a":case"button":e={name:n.text(),disabled:!!n.attr("disabled"),callback:function(){n.click()}};break;case"menuitem":case"command":switch(n.attr("type")){case h:case"command":case"menuitem":e={name:n.attr("label"),disabled:!!n.attr("disabled"),callback:function(){n.click()}};break;case"checkbox":e={type:"checkbox",disabled:!!n.attr("disabled"),name:n.attr("label"),selected:!!n.attr("checked")};break;case"radio":e={type:"radio",disabled:!!n.attr("disabled"),name:n.attr("label"),radio:n.attr("radiogroup"),value:n.attr("id"),selected:!!n.attr("checked")};break;default:e=h}break;case"hr":e="-------";break;case"input":switch(n.attr("type")){case"text":e={type:"text",name:t||y(i),disabled:!!n.attr("disabled"),value:n.val()};break;case"checkbox":e={type:"checkbox",name:t||y(i),disabled:!!n.attr("disabled"),selected:!!n.attr("checked")};break;case"radio":e={type:"radio",name:t||y(i),disabled:!!n.attr("disabled"),radio:!!n.attr("name"),value:n.val(),selected:!!n.attr("checked")};break;default:e=h}break;case"select":e={type:"select",name:t||y(i),disabled:!!n.attr("disabled"),selected:n.val(),options:{}},n.children().each(function(){e.options[this.value]=u(this).text()});break;case"textarea":e={type:"textarea",name:t||y(i),disabled:!!n.attr("disabled"),value:n.val()};break;case"label":break;default:e={type:"html",html:n.clone(!0)}}e&&(o["key"+ ++a]=e)}),a}(e,u(t).children()),e},u.contextMenu.defaults=g,u.contextMenu.types=m,u.contextMenu.handle=v,u.contextMenu.op=b,u.contextMenu.menus=f}(jQuery),define("jqContextMenu",["jquery","position"],function(){}),function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,i=n._mouseInit;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,r(t,"mouseover"),r(t,"mousemove"),r(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,r(t,"mousemove"))},n._touchEnd=function(t){e&&(r(t,"mouseup"),r(t,"mouseout"),this._touchMoved||r(t,"click"),e=!1)},n._mouseInit=function(){this.element.bind("touchstart",t.proxy(this,"_touchStart")).bind("touchmove",t.proxy(this,"_touchMove")).bind("touchend",t.proxy(this,"_touchEnd")),i.call(this)}}function r(t,e){if(!(1<t.originalEvent.touches.length)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}}(jQuery),define("touchpunch",["jquery","jqueryui"],function(){}),Function.prototype.bind||(Function.prototype.bind=function(t){"use strict";if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),function(){"use strict";var t=Object.prototype,i=t.__defineGetter__,r=t.__defineSetter__,s=t.__lookupGetter__,o=t.__lookupSetter__,a=t.hasOwnProperty;i&&r&&s&&o&&(Object.defineProperty||(Object.defineProperty=function(t,e,n){if(arguments.length<3)throw new TypeError("Arguments not optional");if(e+="",a.call(n,"value")&&(s.call(t,e)||o.call(t,e)||(t[e]=n.value),a.call(n,"get")||a.call(n,"set")))throw new TypeError("Cannot specify an accessor and a value");if(!(n.writable&&n.enumerable&&n.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return n.get&&i.call(t,e,n.get),n.set&&r.call(t,e,n.set),t}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(t,e){if(arguments.length<2)throw new TypeError("Arguments not optional.");e+="";var n={configurable:!0,enumerable:!0,writable:!0},i=s.call(t,e),r=o.call(t,e);return a.call(t,e)&&(i||r?(delete n.writable,n.get=n.set=void 0,i&&(n.get=i),r&&(n.set=r)):n.value=t[e]),n}),Object.defineProperties||(Object.defineProperties=function(t,e){var n;for(n in e)a.call(e,n)&&Object.defineProperty(t,n,e[n])}))}(),!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var d={enumerable:!0,get:function(){"use strict";var t,e,n,i,r,s,o=this.attributes,a=o.length,l=function(t){return t.charAt(1).toUpperCase()},c=function(){return this},u=function(t,e){return void 0!==e?this.setAttribute(t,e):this.removeAttribute(t)};try{({}).__defineGetter__("test",function(){}),e={}}catch(t){e=document.createElement("div")}for(t=0;t<a;t++)if((s=o[t])&&s.name&&/^data-\w[\w\-]*$/.test(s.name)){n=s.value,r=(i=s.name).substr(5).replace(/-./g,l);try{Object.defineProperty(e,r,{enumerable:this.enumerable,get:c.bind(n||""),set:u.bind(this,i)})}catch(t){e[r]=n}}return e}};try{Object.defineProperty(Element.prototype,"dataset",d)}catch(t){d.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",d)}}define("preview_export/scripts/dataset-shim",function(){}),require.config({paths:{libs:"../scripts/libs",preview_export:"../preview_export",jquery:"../scripts/libs/jQuery",jqueryui:"../scripts/libs/jquery-ui",touchpunch:"../scripts/libs/jquery-ui-touch-punch","jquery.multisortable":"../scripts/libs/jquery.multisortable",position:"../components/jq-contextmenu/jquery.ui.position",jqContextMenu:"../components/jq-contextmenu/jquery.contextMenu",lodash:"../scripts/libs/lodash",backbone:"../scripts/libs/backbone",css:"../scripts/libs/css",bootstrap:"../components/bootstrap/bootstrap",colorpicker:"../components/spectrum/spectrum",handlebars:"../scripts/libs/Handlebars",lang:"../locales/lang",lexed:"../components/lexed/lexed",codemirror:"../components/codemirror",marked:"../components/marked/marked","strut/presentation_generator/bespoke":"../bundles/app/strut.presentation_generator.bespoke","strut/presentation_generator/reveal":"../bundles/app/strut.presentation_generator.reveal","strut/presentation_generator/handouts":"../bundles/app/strut.presentation_generator.handouts","strut/deck":"../bundles/app/strut.deck","strut/startup":"../bundles/app/strut.startup","strut/editor":"../bundles/app/strut.editor","strut/etch_extension":"../bundles/app/strut.etch_extension","strut/exporter/zip/browser":"../bundles/app/strut.exporter.zip.browser","strut/exporter":"../bundles/app/strut.exporter","strut/exporter/json":"../bundles/app/strut.exporter.json","strut/header":"../bundles/app/strut.header","strut/importer":"../bundles/app/strut.importer","strut/importer/json":"../bundles/app/strut.importer.json","strut/presentation_generator/impress":"../bundles/app/strut.presentation_generator.impress","strut/logo_button":"../bundles/app/strut.logo_button","strut/presentation_generator":"../bundles/app/strut.presentation_generator","strut/slide_components":"../bundles/app/strut.slide_components","strut/slide_editor":"../bundles/app/strut.slide_editor","strut/slide_snapshot":"../bundles/app/strut.slide_snapshot","strut/storage":"../bundles/app/strut.storage","strut/themes":"../bundles/app/strut.themes","strut/well_context_buttons":"../bundles/app/strut.well_context_buttons","strut/config":"../bundles/app/strut.config","strut/transition_editor":"../bundles/app/strut.transition_editor","tantaman/web":"../bundles/common/tantaman.web","tantaman/web/local_storage":"../bundles/common/tantaman.web.local_storage","tantaman/web/remote_storage":"../bundles/common/tantaman.web.remote_storage","tantaman/web/saver":"../bundles/common/tantaman.web.saver","tantaman/web/storage":"../bundles/common/tantaman.web.storage","tantaman/web/undo_support":"../bundles/common/tantaman.web.undo_support","tantaman/web/interactions":"../bundles/common/tantaman.web.interactions","tantaman/web/widgets":"../bundles/common/tantaman.web.widgets","tantaman/web/css_manip":"../bundles/common/tantaman.web.css_manip"},shim:{bootstrap:{deps:["jquery"]},"jquery.multisortable":{deps:["jquery","jqueryui"]},touchpunch:{deps:["jquery","jqueryui"]},jqueryui:{deps:["jquery"]},colorpicker:{deps:["jquery"]},gradientPicker:{deps:["jquery","colorpicker"]},position:{deps:["jquery"]},jqContextMenu:{deps:["jquery","position"]},"codemirror/codemirror":{deps:["css!../components/codemirror/codemirror.css"],exports:"CodeMirror"},"codemirror/modes/css":{deps:["codemirror/codemirror"]},"codemirror/modes/markdown":{deps:["codemirror/codemirror"]}}});var p={}.hasOwnProperty,f=function(t,e){for(var n in e)p.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};window.__extends=f,window.zTracker={z:0,next:function(){return++this.z}},window.clearPresentations=function(){for(var t=localStorage.length,e=0;e<t;++e){var n=localStorage.key(e);n&&-1!=n.indexOf(".strut")&&(console.log("Removing: "+n),localStorage.removeItem(n))}},window.log=function(t){log.enabled.log&&console.log(t)},log.enabled={notice:!0,err:!0,log:!0},log.err=function(t){log.enabeld.err&&console.error(t)},log.notice=function(t){log.enabled.notice&&console.log(t)},require(["handlebars","lang","compiled-templates","colorpicker","strut/config/config","features","./StrutLoader","bootstrap","jqContextMenu","css!components/jq-contextmenu/jquery.contextMenu.css","touchpunch","preview_export/scripts/dataset-shim"],function(t,e,n,i,r,s,o,a,l,c,u,h){"use strict";var d=window.navigator.userAgent;0<=d.indexOf("WebKit")?window.browserPrefix="-webkit-":0<=d.indexOf("MSIE")?window.browserPrefix="-ms-":0<=d.indexOf("Mozilla")?window.browserPrefix="-moz-":window.browserPrefix="",t.registerHelper("either",function(t,e){return null!=e?e:t}),$.event.special.destroyed={remove:function(t){t.handler&&t.handler()}},o.start(s,function(){},function(){}),$(window).unload(function(){localStorage.setItem("Strut_sessionMeta",JSON.stringify(window.sessionMeta))})}),define("main",function(){})}();